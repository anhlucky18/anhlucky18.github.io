(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[76],{1284:function(e,t,n){"use strict";var r=n(0);t.a=function(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),e}},1304:function(e,t,n){"use strict";var r=n(244),a=n(243);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),s=(0,r(n(246)).default)(c.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");t.default=s},1412:function(e,t,n){"use strict";var r=n(16),a=n(12),c=n(38),s=(n(0),n(5)),o=n(1579),i=n(89),l=n.n(i),u=n(401),d=n(94),b=n(395),h=n(1218),j=n(1160),p=n(1161),f=n(1220),m=n(1180),O=n(1189),v=n(675),x=n(1178),g=n(1577),y=n.n(g),k=n(1578),w=n.n(k),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(n));return"".concat(parseFloat((e/Math.pow(n,c)).toFixed(r))," ").concat(a[c])},N=n(1),B=["className","handleDrop","files","handleRemoveAll"],_=Object(u.a)((function(e){return{root:{},dropZone:{border:"1px dashed ".concat(e.palette.divider),padding:e.spacing(6),outline:"none",display:"flex",justifyContent:"center",flexWrap:"wrap",alignItems:"center","&:hover":{backgroundColor:e.palette.action.hover,opacity:.5,cursor:"pointer"}},dragActive:{backgroundColor:e.palette.action.active,opacity:.5},image:{width:130},info:{marginTop:e.spacing(1)},list:{maxHeight:320},actions:{marginTop:e.spacing(2),display:"flex",justifyContent:"flex-end","& > * + *":{marginLeft:e.spacing(2)}}}}));t.a=function(e){var t,n=e.className,i=e.handleDrop,u=e.files,g=e.handleRemoveAll,k=Object(c.a)(e,B),M=_(),T=Object(o.a)({onDrop:i}),A=T.getRootProps,D=T.getInputProps,C=T.isDragActive;return Object(N.jsxs)("div",Object(r.a)(Object(r.a)({className:Object(s.default)(M.root,n)},k),{},{children:[Object(N.jsxs)("div",Object(r.a)(Object(r.a)({className:Object(s.default)((t={},Object(a.a)(t,M.dropZone,!0),Object(a.a)(t,M.dragActive,C),t))},A()),{},{children:[Object(N.jsx)("input",Object(r.a)({},D())),Object(N.jsx)("div",{children:Object(N.jsx)("img",{alt:"Select file",className:M.image,src:"/static/images/undraw_add_file2_gvbb.svg"})}),Object(N.jsxs)("div",{children:[Object(N.jsx)(d.a,{gutterBottom:!0,variant:"h3",children:"T\u1ea3i file l\xean"}),Object(N.jsx)(b.a,{mt:2,children:Object(N.jsxs)(d.a,{color:"textPrimary",variant:"body1",children:["B\u1eb1ng c\xe1ch k\xe9o th\u1ea3 ho\u1eb7c click"," ",Object(N.jsx)(h.a,{underline:"always",children:"v\xe0o \u0111\xe2y"})," ","\u0111\u1ec3 ch\u1ecdn file tr\xean m\xe1y c\u1ee7a b\u1ea1n"]})})]})]})),u.length>0&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(l.a,{options:{suppressScrollX:!0},children:Object(N.jsx)(j.a,{className:M.list,children:u.map((function(e,t){return Object(N.jsxs)(p.a,{divider:t<u.length-1,children:[Object(N.jsx)(f.a,{children:Object(N.jsx)(y.a,{})}),Object(N.jsx)(m.a,{primary:e.name,primaryTypographyProps:{variant:"h5"},secondary:S(e.size)}),Object(N.jsx)(O.a,{title:"More options",children:Object(N.jsx)(v.a,{edge:"end",children:Object(N.jsx)(w.a,{})})})]},t)}))})}),Object(N.jsx)("div",{className:M.actions,children:Object(N.jsx)(x.a,{onClick:g,size:"small",children:"Remove all"})})]})]}))}},1601:function(e,t){},1609:function(e,t){},1610:function(e,t){},1962:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return j})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return O}));n(24);var r=n(16),a=n(2),c=n.n(a),s=n(4),o=n(152),i=n(153),l=n.n(i),u=n(1580),d=n.n(u),b=n(140),h=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.firestore().collection("schools").doc(t.id);case 3:if(n=e.sent,t.total_student=0,t.total_teacher=0,t.lms_url=t.id.trim()+".dschool.vn",!n.get().exists){e.next=13;break}return console.log("doc exist"),e.abrupt("return","existed");case 13:return console.log(t),e.next=16,o.a.firestore().collection("schools").doc(t.id).set(t);case 16:e.sent,console.log("add school success");case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.firestore().collection("schools").doc(t).get();case 3:return n=e.sent,(r=n.data()).id=t,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id,e.next=4,o.a.firestore().collection("schools").doc(n).update(t);case 4:return r=e.sent,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.firestore().collection("schools").get();case 3:return n=e.sent,a=n.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.firestore().collection("commands").where("data.school_id","==",t).where("type","==","school").where("action","==","upload").where("status","==",1).get();case 3:return n=e.sent,a=n.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),console.log(a),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a={school_id:r}).year="2021_2022",i=new FileReader,u=!!i.readAsBinaryString,i.onabort=function(){return console.log("file reading was aborted")},i.onerror=function(){return console.log("file reading has failed")},i.onload=function(){var e=Object(s.a)(c.a.mark((function e(n){var r,s,i,h,j,p,f,m,O,v,x;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.result,s=d.a.read(r,{type:u?"binary":"array"}),i={type:"school",action:"upload",status:0,executer:t},console.log(s.Sheets),h=Object.keys(s.Sheets).length,console.log("length",h),2!=h){e.next=17;break}j=s.SheetNames[0],p=d.a.utils.sheet_to_json(s.Sheets[j],{raw:!1,dateNF:"MM-DD-YYYY",header:1,blankrows:!1,defval:""}),a.hs=JSON.stringify(p),f=s.SheetNames[1],m=d.a.utils.sheet_to_json(s.Sheets[f],{raw:!1,dateNF:"MM-DD-YYYY",header:1,blankrows:!1,defval:""}),a.gv=JSON.stringify(m),a.template=2,i.data=a,e.next=20;break;case 17:if(3!=h){e.next=20;break}return console.log("not use 3 temp"),e.abrupt("return","please review template");case 20:return e.next=22,o.a.firestore().collection("commands").add(i);case 22:return O=e.sent,e.next=25,O.get();case 25:return e.next=27,e.sent.id;case 27:return v=e.sent,console.log(v),i.data.commandid=v,x="".concat(b.a,"/api/upload_school"),l.a.post(x,{id:v}).then((function(e){console.log(e.data)})),e.abrupt("return","success");case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!u){e.next=13;break}return e.next=11,i.readAsBinaryString(n);case 11:e.next=15;break;case 13:return e.next=15,i.readAsArrayBuffer(n);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","L\u1ed7i r\u1ed3i !!!");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n,r){return e.apply(this,arguments)}}()},2793:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(401),c=n(1207),s=n(395),o=n(412),i=n(16),l=n(2),u=n.n(l),d=n(4),b=n(23),h=n(38),j=n(5),p=(n(1382),n(1373)),f=n(72),m=n(1178),O=n(1201),v=n(1203),x=n(205),g=n(1412),y=n(34),k=n(1962),w=n(66),S=n(1284),N=n(1),B=["className"],_=Object(a.a)((function(){return{root:{}}})),M=function(e){var t=e.className,n=Object(h.a)(e,B),a=Object(w.g)(),c=localStorage.getItem("schoolid"),o=Object(r.useState)(null),l=Object(b.a)(o,2),M=l[0],T=l[1],A=Object(S.a)(),D=Object(r.useCallback)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.c)(c);case 3:t=e.sent,console.log(t),A.current&&T(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[A]);Object(r.useEffect)((function(){D()}),[D]);var C=Object(r.useState)([]),Y=Object(b.a)(C,2),R=Y[0],F=Y[1],P=Object(y.a)().user;console.log(P.name);var E=function(){F([])},L=Object(r.useCallback)((function(e){F((function(t){return e}))}),[]),z=_(),I=Object(f.b)().enqueueSnackbar;return null!=M&&M.length>0?(console.log(M),Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Running"}),M.map((function(e){return Object(N.jsx)("h5",{children:e.data.school_id},e.id)}))]})):Object(N.jsx)(p.a,{initialValues:{submit:null},onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,s,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.resetForm,s=n.setErrors,o=n.setStatus,i=n.setSubmitting;try{console.log("click save"),fetch("https://geolocation-db.com/json/").then((function(e){return e.json()})).then(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"==typeof P.name?t.name=P.firstname+" "+P.lastname:t.name=P.name,t.userid=P.userId,t.created_at=(new Date).getTime(),e.next=5,Object(k.f)(t,R[0],c);case 5:if("success"!=(n=e.sent)){e.next=18;break}return e.next=9,Object(x.a)(500);case 9:return r(),o({success:!0}),i(!1),I("B\u1eaft \u0111\u1ea7u ch\u1ea1y \u0111\u1ed3ng b\u1ed9",{variant:"success",action:Object(N.jsx)(m.a,{children:"start"})}),e.next=15,Object(x.a)(500);case 15:a.push("/school/management/classes"),e.next=27;break;case 18:return e.next=20,Object(x.a)(500);case 20:return r(),o({success:!0}),i(!1),I(n,{variant:"resultUp",action:Object(N.jsx)(m.a,{children:"start"})}),e.next=26,Object(x.a)(500);case 26:a.push("/school/management/classes");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(t){console.error(t),o({success:!1}),s({submit:t.message}),i(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){e.errors,e.handleBlur,e.handleChange;var r=e.handleSubmit,a=e.isSubmitting;e.touched,e.values;return Object(N.jsx)("form",Object(i.a)(Object(i.a)({className:Object(j.default)(z.root,t),onSubmit:r},n),{},{children:Object(N.jsx)(O.a,{children:Object(N.jsxs)(v.a,{children:[Object(N.jsx)(v.a,{children:Object(N.jsx)(g.a,{handleDrop:L,files:R,handleRemoveAll:E})}),Object(N.jsx)(s.a,{mt:2,children:Object(N.jsx)(m.a,{variant:"contained",color:"secondary",type:"submit",disabled:a,children:"L\u01b0u"})})]})})}))}})},T=n(15),A=n(1260),D=n(1218),C=n(94),Y=n(1304),R=n.n(Y),F=["className"],P=Object(a.a)((function(){return{root:{}}})),E=function(e){var t=e.className,n=Object(h.a)(e,F),r=P();return Object(N.jsxs)("div",Object(i.a)(Object(i.a)({className:Object(j.default)(r.root,t)},n),{},{children:[Object(N.jsxs)(A.a,{separator:Object(N.jsx)(R.a,{fontSize:"small"}),"aria-label":"breadcrumb",children:[Object(N.jsx)(D.a,{variant:"body1",color:"inherit",to:"/hbon/management/schools",component:T.b,children:"Trang ch\u1ee7"}),Object(N.jsx)(D.a,{variant:"body1",color:"inherit",to:"/hbon/management/schools",component:T.b,children:"Tr\u01b0\u1eddng h\u1ecdc"})]}),Object(N.jsx)(C.a,{variant:"h3",color:"textPrimary",children:"Th\xeam tr\u01b0\u1eddng h\u1ecdc"})]}))},L=Object(a.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));t.default=function(){var e=L();return console.log("creating school"),Object(N.jsxs)(o.a,{className:e.root,title:"Th\xeam tr\u01b0\u1eddng h\u1ecdc",children:[Object(N.jsx)(c.a,{maxWidth:!1,children:Object(N.jsx)(E,{})}),Object(N.jsx)(s.a,{mt:3,children:Object(N.jsx)(c.a,{maxWidth:"lg",children:Object(N.jsx)(M,{})})})]})}}}]);
//# sourceMappingURL=76.7b90ae5a.chunk.js.map