(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[60],{1284:function(e,t,n){"use strict";var o=n(0);t.a=function(){var e=Object(o.useRef)(!0);return Object(o.useEffect)((function(){return function(){e.current=!1}}),[]),e}},1287:function(e,t,n){"use strict";var o=n(20);n.d(t,"a",(function(){return o.S}))},1304:function(e,t,n){"use strict";var o=n(244),c=n(243);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n(0)),r=(0,o(n(246)).default)(a.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");t.default=r},1376:function(e,t,n){"use strict";n.d(t,"h",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return j})),n.d(t,"i",(function(){return O})),n.d(t,"f",(function(){return E})),n.d(t,"k",(function(){return x})),n.d(t,"b",(function(){return w})),n.d(t,"g",(function(){return A})),n.d(t,"d",(function(){return T})),n.d(t,"l",(function(){return k})),n.d(t,"j",(function(){return y})),n.d(t,"e",(function(){return S}));var o=n(2),c=n.n(o),a=n(16),r=n(4),s=n(152),i=n(1408),l=n.n(i),u=n(1170),d=n(1580),p=n(1383),f=n(1287),b=n(1374),h=Object(f.a)(),g=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=null,!t){e.next=8;break}return e.next=5,s.a.firestore().collection("schools").doc(t).collection("contents").orderBy("create_at","desc").get();case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,s.a.firestore().collection("contents").orderBy("create_at","desc").get();case 10:n=e.sent;case 11:return o=n.docs.map((function(e){return Object(a.a)({id:e.id},e.data())})),e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var o,a,r,i,l,u,d,p,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,t.content_type="news",t.create_at=h.FieldValue.serverTimestamp(),e.next=7,s.a.firestore().collection("contents").add(t);case 7:return a=e.sent,e.next=10,a.get();case 10:if(r=e.sent,console.log("done content:"+r.id),i=r.data(),(l=s.a.storage().ref().child("public/contents/"+r.id).putString(o)).on(Object(b.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(b.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(b.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){l.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),a.collection("detail").doc("content").set({data:o,file:"public/contents/"+r.id,content_url:e})}))})),"undefined"!=typeof n){e.next=17;break}return e.abrupt("return");case 17:u={contentType:"image/jpeg"},d="public/images/content/"+r.id,"public/images/content/app"+r.id,p=s.a.storage().ref(),(f=p.child(d).put(n,u)).on(Object(b.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(b.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(b.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){f.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),i.cover=e,s.a.firestore().collection("contents").doc(r.id).update(i)}))})),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(e){try{e.map((function(e){var t="public/images/content/"+e,n=s.a.storage().ref();n.child(t).getDownloadURL().then((function(e){n.child(t).delete()}),(function(e){console.log(e.code)})),s.a.firestore().collection("contents").doc(e).collection("detail").doc("content").delete(),s.a.firestore().collection("contents").doc(e).delete()}))}catch(t){console.log(t)}},O=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t,(function(e,t){return e?(console.log(e),{statusCode:500,message:"G\u1eedi notify th\u1ea5t b\u1ea1i"}):(console.log(t),{statusCode:200,message:"G\u1eedi notify th\xe0nh c\xf4ng"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function m(e,t){return _.apply(this,arguments)}function _(){return(_=Object(r.a)(c.a.mark((function e(t,n){var o,a,r,i,u,d,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),o=s.a.firestore().collection("contents").doc(t),e.next=4,o.get();case 4:(a=e.sent).exists&&(r=a.data(),(i=r.tags).length>0&&(u=[],i.forEach((function(e,t){i.length>=5?t<5&&(u+=4==t?"'"+e+"' in topics ":"'"+e+"' in topics || "):(console.log(u.length),console.log("topic.length"),t<5&&(t+1==i.length?u+="'"+e+"' in topics ":u+="'"+e+"' in topics || "))})),d={"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:24.0) Gecko/20100101 Firefox/24.0","Content-Type":"application/json",Authorization:"key="+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH0_CLIENT_ID:"",REACT_APP_AUTH0_DOMAIN:"",REACT_APP_SERVER_URL:"https://server.dschool.vn",REACT_APP_LOGOUT_URL:"https://id.hocbaionha.com/oauth2/sessions/logout",REACT_APP_H5P_URL:"https://h5p.dschool.vn",REACT_APP_FIREBASE_API_KEY:"AIzaSyD1rFzhNHcbWql0L8g4dWMcdgn5KiZ3cv4",REACT_APP_FIREBASE_APP_ID:"1:666303282505:web:2daabfe2056b8bcf276e98",REACT_APP_FIREBASE_AUTH_DOMAIN:"hbon-sso.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://hbon-sso.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"666303282505",REACT_APP_FIREBASE_PROJECT_ID:"hbon-sso",REACT_APP_FIREBASE_STORAGE_BUCKET:"hbon-sso.appspot.com",REACT_APP_GA_MEASUREMENT_ID:"G-6ED668BBJC"}).REACT_APP_FIREBASE_CLOUD_MESSAGE_KEY},p={condition:u,priority:"high",notification:{body:r.title,title:"Hbon news",sound:"default",image:r.cover},apns:{payload:{aps:{"mutable-content":1}},fcm_options:{image:r.cover}},data:{click_action:"FLUTTER_NOTIFICATION_CLICK",deep_link:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH0_CLIENT_ID:"",REACT_APP_AUTH0_DOMAIN:"",REACT_APP_SERVER_URL:"https://server.dschool.vn",REACT_APP_LOGOUT_URL:"https://id.hocbaionha.com/oauth2/sessions/logout",REACT_APP_H5P_URL:"https://h5p.dschool.vn",REACT_APP_FIREBASE_API_KEY:"AIzaSyD1rFzhNHcbWql0L8g4dWMcdgn5KiZ3cv4",REACT_APP_FIREBASE_APP_ID:"1:666303282505:web:2daabfe2056b8bcf276e98",REACT_APP_FIREBASE_AUTH_DOMAIN:"hbon-sso.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://hbon-sso.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"666303282505",REACT_APP_FIREBASE_PROJECT_ID:"hbon-sso",REACT_APP_FIREBASE_STORAGE_BUCKET:"hbon-sso.appspot.com",REACT_APP_GA_MEASUREMENT_ID:"G-6ED668BBJC"}).REACT_APP_DOMAIN_VIEWER+"/news_detail?content_id="+t+"&news_title="+encodeURIComponent(r.title),body:r.title,title:"Hbon news",content_type:"news"}},l()({method:"POST",url:"https://fcm.googleapis.com/fcm/send",body:p,headers:d,json:!0},(function(e,t,o){if(console.log(o),console.log(t),console.log(t.statusCode),console.log(t.request),e||200!==t.statusCode)return console.log(o),n(e||{statusCode:t.statusCode});n(null,o)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o,a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("contents").doc(t).get();case 3:return n=e.sent,(o=n.data()).id=t,e.next=8,s.a.firestore().collection("contents").doc(t).collection("detail").doc("content").get();case 8:return a=e.sent,r=a.data(),console.log(r.content_url),e.next=13,fetch(r.content_url).then((function(e){return e.text()}));case 13:return i=e.sent,console.log(i),o.detail=i,e.abrupt("return",o);case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var o,a,r,i,l,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("update contents"),o=t.id,a=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,e.next=7,s.a.firestore().collection("contents").doc(o).update(t);case 7:if((r=s.a.storage().ref().child("public/contents/"+o).putString(a)).on(Object(b.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(b.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(b.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){r.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),s.a.firestore().collection("contents").doc(o).collection("detail").doc("content").set({file:"public/contents/"+o,content_url:e})}))})),"undefined"!=typeof n){e.next=11;break}return e.abrupt("return");case 11:t.cover,i={contentType:"image/jpeg"},l="public/images/content/"+t.id,u=s.a.storage().ref(),(d=u.child(l).put(n,i)).on(Object(b.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(b.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(b.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){d.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),t.cover=e,s.a.firestore().collection("contents").doc(o).update(t)}))})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var o,a,r,i,l,u,d,p,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=t.schoolid)){e.next=28;break}return e.prev=2,a=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,t.content_type="news",t.create_at=h.FieldValue.serverTimestamp(),e.next=9,s.a.firestore().collection("schools").doc(o).collection("contents").add(t);case 9:return r=e.sent,e.next=12,r.get();case 12:if(i=e.sent,console.log("done content:"+i.id),r.collection("detail").doc("content").set({data:a}),l=i.data(),"undefined"!=typeof n){e.next=18;break}return e.abrupt("return");case 18:u={contentType:"image/jpeg"},d="public/images/content/"+i.id,p=s.a.storage().ref(),(f=p.child(d).put(n,u)).on(Object(b.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(b.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(b.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){f.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),l.cover=e,s.a.firestore().collection("schools").doc(o).collection("contents").doc(i.id).update(l)}))})),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(2),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[2,25]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var o,a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("schools").doc(n).collection("contents").doc(t).get();case 3:return o=e.sent,(a=o.data()).id=t,e.next=8,s.a.firestore().collection("schools").doc(n).collection("contents").doc(t).collection("detail").doc("content").get();case 8:return r=e.sent,i=r.data(),a.detail=i.data,e.abrupt("return",a);case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e,t){try{e.map((function(e){var n="public/images/content/"+e,o=s.a.storage().ref();o.child(n).getDownloadURL().then((function(e){o.child(n).delete()}),(function(e){console.log(e.code)})),s.a.firestore().collection("schools").doc(t).collection("contents").doc(e).collection("detail").doc("content").delete(),s.a.firestore().collection("schools").doc(t).collection("contents").doc(e).delete()}))}catch(n){console.log(n)}},k=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var o,a,r,i,l,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t.schoolid,console.log("update contents"),a=t.id,r=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,e.next=8,s.a.firestore().collection("schools").doc(o).collection("contents").doc(a).update(t);case 8:return e.next=10,s.a.firestore().collection("schools").doc(o).collection("contents").doc(a).collection("detail").doc("content").update({data:r});case 10:if("undefined"!=typeof n){e.next=12;break}return e.abrupt("return");case 12:t.cover,i={contentType:"image/jpeg"},l="public/images/content/"+t.id,u=s.a.storage().ref(),(d=u.child(l).put(n,i)).on(Object(b.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(b.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(b.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){d.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),t.cover=e,s.a.firestore().collection("schools").doc(o).collection("contents").doc(a).update(t)}))})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var o,a,r,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=Object(u.a)(),"undefined"!=typeof t){e.next=4;break}return e.abrupt("return",n(null));case 4:a={contentType:"image/jpeg"},r="public/images/content/detail/"+o,i=s.a.storage().ref(),(l=i.child(r).put(t,a)).on(Object(b.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(b.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(b.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){l.snapshot.ref.getDownloadURL().then((function(e){return console.log("File available at",e),n(e)}))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=[],o=s.a.firestore().collection("contents").doc(t).collection("embedded_submissions"),e.next=5,o.get();case 5:return e.sent.forEach(function(){var e=Object(r.a)(c.a.mark((function e(o){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.data(),i=s.a.firestore().collection("contents").doc(t).collection("embedded_submissions").doc(o.id).collection("quizzes_submissions"),e.next=4,i.get();case 4:e.sent.forEach(function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data().result,a["logs-"+t.id]=n.toString(),a["results-"+t.id]=n.filter((function(e){return!0===e})).length;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.push(a),console.log(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,s.a.firestore().collection("contents").doc(t).get();case 9:a=e.sent,i=a.data(),setTimeout((function(){var e=i.title,t={Sheets:{data:d.utils.json_to_sheet(n)},SheetNames:["data"]},o=d.write(t,{bookType:"xlsx",type:"array"}),c=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});p.saveAs(c,e+".xlsx")}),3e4);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1383:function(e,t,n){(function(n){var o,c,a;c=[],void 0===(a="function"===typeof(o=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function o(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){i(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function c(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,n){var s=r.URL||r.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?a(i):c(i.href)?o(e,t,n):a(i,i.target="_blank")):(i.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(i.href)}),4e4),setTimeout((function(){a(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,r){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,r),n);else if(c(e))o(e,n,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){a(s)}))}}:function(e,t,n,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof e)return o(e,t,n);var a="application/octet-stream"===e.type,i=/constructor/i.test(r.HTMLElement)||r.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&i||s)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=e:location=e,c=null},u.readAsDataURL(e)}else{var d=r.URL||r.webkitURL,p=d.createObjectURL(e);c?c.location=p:location.href=p,c=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});r.saveAs=i.saveAs=i,e.exports=i})?o.apply(t,c):o)||(e.exports=a)}).call(this,n(55))},1409:function(e,t){},1601:function(e,t){},1609:function(e,t){},1610:function(e,t){},1613:function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\s+/," ").split(" ").slice(0,2).map((function(e){return e&&e[0].toUpperCase()})).join("")}},1717:function(e,t,n){"use strict";var o=n(0),c=n.n(o),a=n(7),r=n.n(a);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,o,c=function(e,t){if(null==e)return{};var n,o,c={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var l=Object(o.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,a=e.size,r=void 0===a?24:a,l=i(e,["color","size"]);return c.a.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),c.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),c.a.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),c.a.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}))}));l.propTypes={color:r.a.string,size:r.a.oneOfType([r.a.string,r.a.number])},l.displayName="PlusCircle",t.a=l},1931:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return b}));var o=n(2),c=n.n(o),a=n(16),r=n(4),s=n(152),i=n(1287),l=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("video").get();case 3:return t=e.sent,n=t.docs.map((function(e){return Object(a.a)({id:e.id},e.data())})),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.content_type="livestream",t.create_at=Object(i.a)().FieldValue.serverTimestamp(),e.next=5,s.a.firestore().collection("video").add(t);case 5:return n=e.sent,e.next=8,n.get();case 8:return o=e.sent,e.abrupt("return",o.data());case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),e.next=4,s.a.firestore().collection("video").doc(t).get();case 4:return n=e.sent,o=n.data(),console.log(o),o.id=t,e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id,console.log(n),t.update_at=Object(i.a)().FieldValue.serverTimestamp(),e.next=6,s.a.firestore().collection("video").doc(n).update(t);case 6:return o=e.sent,e.abrupt("return",o);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("video").doc(t).collection("questions").get();case 3:return n=e.sent,o=n.docs.map((function(e){return Object(a.a)({id:e.id},e.data())})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("video").doc(t).update({questionId:n});case 3:return o=e.sent,e.abrupt("return",o);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},2429:function(e,t,n){"use strict";var o=n(244),c=n(243);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n(0)),r=(0,o(n(246)).default)(a.createElement("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2zm0 14H3V8h18v12zM9 10v8l7-4z"}),"LiveTv");t.default=r},2747:function(e,t,n){"use strict";n.r(t);var o=n(2),c=n.n(o),a=n(4),r=n(23),s=n(0),i=n(401),l=n(1207),u=n(395),d=n(412),p=n(1284),f=n(16),b=n(38),h=n(15),g=n(5),v=n(1215),j=n(1260),O=n(1218),m=n(94),_=n(1178),E=n(201),x=n(1304),w=n.n(x),A=n(1717),T=n(1),k=["className"],y=Object(i.a)((function(e){return{root:{},action:{marginBottom:e.spacing(1),"& + &":{marginLeft:e.spacing(1)}}}})),S=function(e){var t=e.className,n=Object(b.a)(e,k),o=y();return Object(T.jsxs)(v.a,Object(f.a)(Object(f.a)({className:Object(g.default)(o.root,t),container:!0,justify:"space-between",spacing:3},n),{},{children:[Object(T.jsxs)(v.a,{item:!0,children:[Object(T.jsxs)(j.a,{separator:Object(T.jsx)(w.a,{fontSize:"small"}),"aria-label":"breadcrumb",children:[Object(T.jsx)(O.a,{variant:"body1",color:"inherit",to:"/teacher/management/livestream",component:h.b,children:"Trang ch\u1ee7"}),Object(T.jsx)(O.a,{variant:"body1",color:"inherit",to:"#",component:h.b,children:"Qu\u1ea3n l\xfd"}),Object(T.jsx)(m.a,{variant:"body1",color:"textPrimary",children:"N\u1ed9i dung"})]}),Object(T.jsx)(m.a,{variant:"h3",color:"textPrimary",children:"Danh s\xe1ch video live stream"})]}),Object(T.jsx)(v.a,{item:!0,children:Object(T.jsx)(O.a,{to:"/teacher/management/livestream/create",component:h.b,children:Object(T.jsx)(_.a,{color:"secondary",variant:"contained",startIcon:Object(T.jsx)(E.a,{fontSize:"small",children:Object(T.jsx)(A.a,{})}),children:"Th\xeam video"})})})]}))},R=n(43),P=n(89),C=n.n(P),U=n(1201),N=n(1257),I=n(1225),D=n(1214),L=n(1188),B=n(1216),F=n(1190),z=n(1182),H=n(1226),M=n(1187),G=n(1184),K=n(1183),W=n(675),V=n(1191),q=n(2429),Y=n.n(q),J=n(1253),X=n(1251),Z=(n(1613),n(1376)),Q=n(13),$=n.n(Q),ee=["className","contents"],te=[{value:"all",label:"T\u1ea5t c\u1ea3"}],ne=[{value:"updatedAt|desc",label:"Last update (newest first)"},{value:"updatedAt|asc",label:"Last update (oldest first)"},{value:"name|desc",label:"T\xean (gi\u1ea3m)"},{value:"name|asc",label:"T\xean (t\u0103ng)"}],oe=function(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0},ce=function(e,t){var n=t.split("|"),o=Object(r.a)(n,2),c=o[0],a=function(e,t){return"desc"===e?function(e,n){return oe(e,n,t)}:function(e,n){return-oe(e,n,t)}}(o[1],c),s=e.map((function(e,t){return[e,t]}));return s.sort((function(e,t){var n=a(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),s.map((function(e){return e[0]}))},ae=Object(i.a)((function(e){return{root:{},queryField:{width:500},bulkOperations:{position:"relative"},bulkActions:{paddingLeft:4,paddingRight:4,marginTop:6,position:"absolute",width:"100%",zIndex:2,backgroundColor:e.palette.background.default},bulkAction:{marginLeft:e.spacing(2)},avatar:{height:42,width:42,marginRight:e.spacing(1)}}})),re=function(e){var t=e.className,n=e.contents,o=Object(b.a)(e,ee),c=ae(),a=Object(s.useState)("all"),i=Object(r.a)(a,2),l=i[0],d=i[1],p=Object(s.useState)([]),v=Object(r.a)(p,2),j=v[0],O=v[1],m=Object(s.useState)(0),x=Object(r.a)(m,2),w=x[0],A=x[1],k=Object(s.useState)(10),y=Object(r.a)(k,2),S=y[0],P=y[1],q=Object(s.useState)(""),Q=Object(r.a)(q,2),oe=Q[0],re=Q[1],se=Object(s.useState)(ne[0].value),ie=Object(r.a)(se,2),le=ie[0],ue=ie[1],de=Object(s.useState)({hasAcceptedMarketing:null,isProspect:null,isReturning:null}),pe=Object(r.a)(de,2),fe=pe[0],be=pe[1],he=function(e){O(e.target.checked?n.map((function(e){return e.id})):[])},ge=function(e,t,n){return e.filter((function(e){var o=!0;if(t){var c=!1;["title","description"].forEach((function(n){n in e&&e[n].toLowerCase().includes(t.toLowerCase())&&(c=!0)})),c||(o=!1)}return Object.keys(n).forEach((function(t){var c=n[t];c&&e[t]!==c&&(o=!1)})),o}))}(n,oe,fe),ve=function(e,t,n){return e.slice(t*n,t*n+n)}(ce(ge,le),w,S),je=j.length>0,Oe=j.length>0&&j.length<n.length,me=j.length===n.length;return Object(T.jsxs)(U.a,Object(f.a)(Object(f.a)({className:Object(g.default)(c.root,t)},o),{},{children:[Object(T.jsx)(N.a,{onChange:function(e,t){var n=Object(f.a)(Object(f.a)({},fe),{},{hasAcceptedMarketing:null,isProspect:null,isReturning:null});"all"!==t&&(n[t]=!0),be(n),O([]),d(t)},scrollButtons:"auto",textColor:"secondary",value:l,variant:"scrollable",children:te.map((function(e){return Object(T.jsx)(I.a,{value:e.value,label:e.label},e.value)}))}),Object(T.jsx)(D.a,{}),Object(T.jsxs)(u.a,{p:2,minHeight:56,display:"flex",alignItems:"center",children:[Object(T.jsx)(L.a,{className:c.queryField,InputProps:{startAdornment:Object(T.jsx)(B.a,{position:"start",children:Object(T.jsx)(E.a,{fontSize:"small",color:"action",children:Object(T.jsx)(J.a,{})})})},onChange:function(e){e.persist(),re(e.target.value)},placeholder:"T\xecm ki\u1ebfm",value:oe,variant:"outlined"}),Object(T.jsx)(u.a,{flexGrow:1}),Object(T.jsx)(L.a,{label:"S\u1eafp x\u1ebfp",name:"sort",onChange:function(e){e.persist(),ue(e.target.value)},select:!0,SelectProps:{native:!0},value:le,variant:"outlined",children:ne.map((function(e){return Object(T.jsx)("option",{value:e.value,children:e.label},e.value)}))})]}),je&&Object(T.jsx)("div",{className:c.bulkOperations,children:Object(T.jsxs)("div",{className:c.bulkActions,children:[Object(T.jsx)(F.a,{checked:me,indeterminate:Oe,onChange:he}),Object(T.jsx)(_.a,{variant:"outlined",className:c.bulkAction,onClick:function(){Object(Z.c)(j)},children:"X\xf3a"})]})}),Object(T.jsx)(C.a,{children:Object(T.jsx)(u.a,{minWidth:700,children:Object(T.jsxs)(z.a,{children:[Object(T.jsx)(H.a,{children:Object(T.jsxs)(M.a,{children:[Object(T.jsx)(G.a,{padding:"checkbox",children:Object(T.jsx)(F.a,{checked:me,indeterminate:Oe,onChange:he})}),Object(T.jsx)(G.a,{children:"Lo\u1ea1i Content"}),Object(T.jsx)(G.a,{children:"Ti\xeau \u0111\u1ec1 (title)"}),Object(T.jsx)(G.a,{children:"Link Video"}),Object(T.jsx)(G.a,{children:"Tr\u1ea1ng th\xe1i"}),Object(T.jsx)(G.a,{children:"Ng\xe0y t\u1ea1o"}),Object(T.jsx)(G.a,{align:"right",children:"Actions"})]})}),Object(T.jsx)(K.a,{children:ve.map((function(e){var t=j.includes(e.id),n=null;return e.create_at&&(n=1e3*e.create_at.seconds),Object(T.jsxs)(M.a,{hover:!0,selected:t,children:[Object(T.jsx)(G.a,{padding:"checkbox",children:Object(T.jsx)(F.a,{checked:t,onChange:function(t){return n=e.id,void(j.includes(n)?O((function(e){return e.filter((function(e){return e!==n}))})):O((function(e){return[].concat(Object(R.a)(e),[n])})));var n},value:t})}),Object(T.jsx)(G.a,{children:Object(T.jsx)(u.a,{display:"flex",alignItems:"center",children:e.content_type})}),Object(T.jsx)(G.a,{children:e.title}),Object(T.jsx)(G.a,{children:e.url}),Object(T.jsx)(G.a,{children:e.live}),Object(T.jsx)(G.a,{children:$()(n||null).format("DD/MM/YYYY")}),Object(T.jsxs)(G.a,{align:"right",children:[Object(T.jsx)(W.a,{component:h.b,to:"/teacher/management/livestream/"+e.id+"/edit",children:Object(T.jsx)(E.a,{fontSize:"small",children:Object(T.jsx)(X.a,{})})}),Object(T.jsx)(W.a,{component:h.b,to:"/teacher/management/livestream/"+e.id+"/live",children:Object(T.jsx)(E.a,{fontSize:"small",children:Object(T.jsx)(Y.a,{})})})]})]},e.id)}))})]})})}),Object(T.jsx)(V.a,{component:"div",count:ge.length,onChangePage:function(e,t){A(t)},onChangeRowsPerPage:function(e){P(parseInt(e.target.value))},page:w,rowsPerPage:S,rowsPerPageOptions:[5,10,25]})]}))};re.defaultProps={contents:[]};var se=re,ie=n(1931),le=Object(i.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));t.default=function(){var e=le(),t=Object(p.a)(),n=Object(s.useState)([]),o=Object(r.a)(n,2),i=o[0],f=o[1],b=Object(s.useCallback)(Object(a.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ie.d)();case 3:n=e.sent,t.current&&f(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);return Object(s.useEffect)((function(){b()}),[b]),Object(T.jsx)(d.a,{className:e.root,title:"Tr\u01b0\u1eddng h\u1ecdc",children:Object(T.jsxs)(l.a,{maxWidth:!1,children:[Object(T.jsx)(S,{}),Object(T.jsx)(u.a,{mt:3,children:Object(T.jsx)(se,{contents:i})})]})})}}}]);
//# sourceMappingURL=60.84784250.chunk.js.map