(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[93],{1284:function(e,t,n){"use strict";var a=n(0);t.a=function(){var e=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return function(){e.current=!1}}),[]),e}},1601:function(e,t){},1609:function(e,t){},1610:function(e,t){},1907:function(e,t,n){"use strict";n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return g})),n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return x})),n.d(t,"f",(function(){return k})),n.d(t,"b",(function(){return y})),n.d(t,"l",(function(){return j})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return T}));var a=n(2),r=n.n(a),o=n(16),s=n(4),c=n(1312),i=n(152),u=n(1287),l=n(1374),d=n(1963),p=n(1383),f=n(1580),b=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,i.a.firestore().collection("live_events").where("type","==","competition").orderBy("created_at","desc").get();case 4:return t=e.sent,n=t.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,i.a.firestore().collection("live_events").where("type","==","school_competition").orderBy("created_at","desc").get();case 4:return t=e.sent,n=t.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,a=i.a.firestore(),"undefined"===typeof n){e.next=11;break}return e.next=5,a.collection("live_events").doc(n).collection("submission").get();case 5:return o=e.sent,e.next=8,o.docs.map(function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,s,i,u,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data(),o={},2!==n.status){e.next=36;break}return s=a.collection("students").doc(n.uid),e.next=6,s.get();case 6:if((i=e.sent).exists){e.next=24;break}return u=a.collection("users").doc(n.uid),e.next=11,u.get();case 11:l=e.sent,o.display_name="undefined"!==typeof l.data().display_name?l.data().display_name:n.display_name,o.school_id="undefined"!==typeof n.school_id?n.school_id:l.data().school_id,o.point=n.point,o.submit_at=w(n.submit_at),o.created_at=w(n.created_at),o.time_work=parseInt((n.submit_at-n.created_at)/60),o.email="undefined"!==typeof l.data().email?l.data().email:"",o.grade="undefined"!==typeof l.data().class?l.data().class:"",parseInt((n.submit_at-n.created_at)/60)>70?o.autosubmit="Tool auto":o.autosubmit="",o.not_student="Ch\u01b0a c\xf3 trong Student",e.next=34;break;case 24:o.display_name="undefined"!==typeof n.display_name?n.display_name:i.data().lastname+i.data().firstname,o.school_id="undefined"!==typeof n.school_id?n.school_id:i.data().school_id,o.point=n.point,o.submit_at=w(n.submit_at),o.created_at=w(n.created_at),o.time_work=parseInt((n.submit_at-n.created_at)/60),o.email="undefined"!==typeof i.data().email?i.data().email:"",o.grade="undefined"!==typeof i.data().class?i.data().class.name:"",parseInt((n.submit_at-n.created_at)/60)>70?o.autosubmit="Tool auto":o.autosubmit="",o.not_student="";case 34:console.log(o),c.push(o);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return c=e.sent,console.log(c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,i.a.firestore().collection("resource/public/quizzes").get();case 4:return t=e.sent,n=t.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,i.a.firestore().collection("/resource/kimchung/quizzes").get();case 4:return t=e.sent,n=t.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(r.a.mark((function e(t,n){var a,o,s,c,p,f,b,m,v,h,g,_,x,k,y;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("start_at"in t||(t.start_at=Object(u.a)().FieldValue.serverTimestamp()),"end_at"in t||(t.end_at=Object(u.a)().FieldValue.serverTimestamp()),null===typeof t.school||"undefined"===typeof t.school.id){e.next=9;break}return e.next=5,i.a.firestore().collection("resource/kimchung/quizzes/").doc(t.quizid);case 5:a=e.sent,t.quizRef=a,e.next=13;break;case 9:return e.next=11,i.a.firestore().collection("resource/public/quizzes/").doc(t.quizid);case 11:o=e.sent,t.quizRef=o;case 13:return s={eventType:"image/jpeg"},e.prev=14,t.created_at=Date.now(),null==typeof t.start_at&&(t.start_at=Date.now()),null==typeof t.end_at&&(t.end_at=Date.now()),c=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,t.created_at=Object(u.a)().FieldValue.serverTimestamp(),p=(p=t.tags).filter((function(e){return e})),t.tags=p,e.next=26,i.a.firestore().collection("live_events").add(t);case 26:return f=e.sent,e.next=29,f.get();case 29:if(b=e.sent,console.log("done event:"+b.id),f.collection("detail").doc("content").set({data:c}),m=b.data(),"undefined"!=typeof n){e.next=35;break}return e.abrupt("return");case 35:return e.next=37,Object(d.fromImage)(n);case 37:return v=e.sent,e.next=40,v.thumbnail(512).toFile();case 40:if(h=e.sent,g="public/images/events/"+b.id,_="public/images/events/full/"+b.id,x=i.a.storage().ref(),(k=x.child(_).put(n,s)).on(Object(l.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(l.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(l.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){k.snapshot.ref.getDownloadURL().then((function(e){console.log("image full available at",e),m.cover_full=e,i.a.firestore().collection("live_events").doc(b.id).update(m)}))})),"undefined"!=typeof h){e.next=48;break}return e.abrupt("return");case 48:(y=x.child(g).put(h,s)).on(Object(l.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(l.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(l.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){y.snapshot.ref.getDownloadURL().then((function(e){console.log("image available at",e),i.a.firestore().collection("live_events").doc(b.id).update({cover:e})}))})),e.next=55;break;case 52:e.prev=52,e.t0=e.catch(14),console.log(e.t0);case 55:case"end":return e.stop()}}),e,null,[[14,52]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e){try{var t=i.a.storage().ref();e.map((function(e){console.log(e);var n="public/images/events/"+e,a="public/images/events/full"+e;t.child(n).getDownloadURL().then((function(e){t.child(n).delete()}),(function(e){console.log(e.code)})),t.child(a).getDownloadURL().then((function(e){t.child(a).delete()}),(function(e){console.log(e.code)})),i.a.firestore().collection("events").doc(e).collection("detail").doc("content").delete(),i.a.firestore().collection("events").doc(e).delete()}))}catch(n){console.log(n)}},k=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,o,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,i.a.firestore().collection("live_events").doc(t).get();case 4:return n=e.sent,(a=n.data()).id=t,console.log(t),e.next=10,i.a.firestore().collection("live_events").doc(t).collection("detail").doc("content").get();case 10:return o=e.sent,s=o.data(),a.detail=s.data,console.log(a),e.next=16,a.quizRef.get();case 16:return(c=e.sent).exists?a.quizname=c.data().name:a.quizname="Ch\u1ecdn quizzes",e.abrupt("return",a);case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,o,s,l,d,p,f,b,m,v,h,g,_,x,k,y,j,w,O,T,z,S,U,E,N,q,D,I,R,A,B,F,C,G,L,P,V,H,M,J,K,Q,W,Y,X,Z,$,ee,te;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),null!=(n=t)&&""!=n){e.next=4;break}return e.abrupt("return",{error_code:1,message:"kh\xf4ng t\u1ed3n t\u1ea1i eventId"});case 4:return a=i.a.firestore(),o=0,e.next=8,a.collection("live_events").doc(n).get();case 8:return s=e.sent,e.next=11,s.data();case 11:if(l=e.sent,d=0,null==l){e.next=54;break}return e.next=16,l.quizRef.get();case 16:return p=e.sent,e.next=19,p.data();case 19:f=e.sent,b=f.questions,m=!0,v=!1,e.prev=23,g=Object(c.a)(b);case 25:return e.next=27,g.next();case 27:return _=e.sent,m=_.done,e.next=31,_.value;case 31:if(x=e.sent,m){e.next=38;break}"id"in x&&d++;case 35:m=!0,e.next=25;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e.catch(23),v=!0,h=e.t0;case 44:if(e.prev=44,e.prev=45,m||null==g.return){e.next=49;break}return e.next=49,g.return();case 49:if(e.prev=49,!v){e.next=52;break}throw h;case 52:return e.finish(49);case 53:return e.finish(44);case 54:return e.next=56,a.collection("live_events").doc(n).collection("submission").where("status","==",1).limit(50).get();case 56:k=e.sent,y=!0,j=!1,e.prev=59,O=Object(c.a)(k.docs);case 61:return e.next=63,O.next();case 63:return T=e.sent,y=T.done,e.next=67,T.value;case 67:if(z=e.sent,y){e.next=210;break}return S=z,console.log("cuongpt"),console.log(S),e.prev=72,e.next=75,S.ref.collection("attemps").get();case 75:U=e.sent,E=!0,N=!1,e.prev=78,D=Object(c.a)(U.docs);case 80:return e.next=82,D.next();case 82:return I=e.sent,E=I.done,e.next=86,I.value;case 86:if(R=e.sent,E){e.next=168;break}if(!("selection"in(A=R.data()))){e.next=164;break}B=!0,F=!1,e.prev=93,G=Object(c.a)(A.selection);case 95:return e.next=97,G.next();case 97:return L=e.sent,B=L.done,e.next=101,L.value;case 101:if(P=e.sent,B){e.next=148;break}if(null==(V=P)){e.next=145;break}return H=V.selection_values[0],e.next=108,V.quiz_ref.get();case 108:if(!(M=e.sent).exists){e.next=145;break}J=M.data(),K=!0,Q=!1,e.prev=113,Y=Object(c.a)(J.options);case 115:return e.next=117,Y.next();case 117:return X=e.sent,K=X.done,e.next=121,X.value;case 121:if(Z=e.sent,K){e.next=128;break}($=Z).fraction>0&&$.value==H&&(o++,console.log(o,",",S.id,M.data().label));case 125:K=!0,e.next=115;break;case 128:e.next=134;break;case 130:e.prev=130,e.t1=e.catch(113),Q=!0,W=e.t1;case 134:if(e.prev=134,e.prev=135,K||null==Y.return){e.next=139;break}return e.next=139,Y.return();case 139:if(e.prev=139,!Q){e.next=142;break}throw W;case 142:return e.finish(139);case 143:return e.finish(134);case 144:case 145:B=!0,e.next=95;break;case 148:e.next=154;break;case 150:e.prev=150,e.t2=e.catch(93),F=!0,C=e.t2;case 154:if(e.prev=154,e.prev=155,B||null==G.return){e.next=159;break}return e.next=159,G.return();case 159:if(e.prev=159,!F){e.next=162;break}throw C;case 162:return e.finish(159);case 163:return e.finish(154);case 164:case 165:E=!0,e.next=80;break;case 168:e.next=174;break;case 170:e.prev=170,e.t3=e.catch(78),N=!0,q=e.t3;case 174:if(e.prev=174,e.prev=175,E||null==D.return){e.next=179;break}return e.next=179,D.return();case 179:if(e.prev=179,!N){e.next=182;break}throw q;case 182:return e.finish(179);case 183:return e.finish(174);case 184:return ee=Math.round(1e3*o/d)/100,e.t4=o,e.t5=o,e.t6=d,e.t7=d,e.t8=ee,e.next=193,Object(u.a)().FieldValue.serverTimestamp();case 193:return e.t9=e.sent,te={correct_quiz_count:e.t4,grade:e.t5,grade_max:e.t6,total_quiz_count:e.t7,point:e.t8,status:2,submit_at:e.t9,submit_by:"auto"},e.next=197,S.ref.update(te);case 197:return console.log("Graded: ,",S.id,",",te,",",S.id),o=0,e.abrupt("return",{error_code:0,message:"T\u1ea5t c\u1ea3 c\xe1c b\xe0i thi \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng n\u1ed9p"});case 202:return e.prev=202,e.t10=e.catch(72),console.log(S.id),console.log(e.t10),e.abrupt("return",{error_code:1,message:"kh\xf4ng t\u1ed3n t\u1ea1i eventId"});case 207:y=!0,e.next=61;break;case 210:e.next=216;break;case 212:e.prev=212,e.t11=e.catch(59),j=!0,w=e.t11;case 216:if(e.prev=216,e.prev=217,y||null==O.return){e.next=221;break}return e.next=221,O.return();case 221:if(e.prev=221,!j){e.next=224;break}throw w;case 224:return e.finish(221);case 225:return e.finish(216);case 226:return e.abrupt("return",{error_code:0,message:"T\u1ea5t c\u1ea3 c\xe1c b\xe0i thi \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng n\u1ed9p"});case 228:case"end":return e.stop()}}),e,null,[[23,40,44,54],[45,,49,53],[59,212,216,226],[72,202],[78,170,174,184],[93,150,154,164],[113,130,134,144],[135,,139,143],[155,,159,163],[175,,179,183],[217,,221,225]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(r.a.mark((function e(t,n){var a,o,s,c,p,f,b,m,v,h,g,_,x,k;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("start_at"in t||(t.start_at=Object(u.a)().FieldValue.serverTimestamp()),"end_at"in t||(t.end_at=Object(u.a)().FieldValue.serverTimestamp()),null===typeof t.school||"undefined"===typeof t.school.id){e.next=9;break}return e.next=5,i.a.firestore().collection("resource/kimchung/quizzes/").doc(t.quizid);case 5:a=e.sent,t.quizRef=a,e.next=13;break;case 9:return e.next=11,i.a.firestore().collection("resource/public/quizzes/").doc(t.quizid);case 11:o=e.sent,t.quizRef=o;case 13:return s={eventType:"image/jpeg"},e.prev=14,t.created_at=Date.now(),null==typeof t.start_at&&(t.start_at=Date.now()),null==typeof t.end_at&&(t.end_at=Date.now()),c=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,t.created_at=Object(u.a)().FieldValue.serverTimestamp(),p=(p=t.tags).filter((function(e){return e})),t.tags=p,e.next=26,i.a.firestore().collection("live_events").doc(t.id).update(t);case 26:return e.next=28,i.a.firestore().collection("live_events").doc(t.id).get();case 28:return f=e.sent,console.log("done event:"+f.id),e.next=32,i.a.firestore().collection("live_events").doc(t.id).collection("detail").doc("content").update({data:c});case 32:if(b=f.data(),"undefined"!=typeof n){e.next=35;break}return e.abrupt("return");case 35:return e.next=37,Object(d.fromImage)(n);case 37:return m=e.sent,e.next=40,m.thumbnail(512).toFile();case 40:if(v=e.sent,h="public/images/events/"+f.id,g="public/images/events/full/"+f.id,_=i.a.storage().ref(),(x=_.child(g).put(n,s)).on(Object(l.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(l.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(l.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){x.snapshot.ref.getDownloadURL().then((function(e){console.log("image full available at",e),b.cover_full=e,i.a.firestore().collection("live_events").doc(f.id).update(b)}))})),"undefined"!=typeof v){e.next=48;break}return e.abrupt("return");case 48:(k=_.child(h).put(v,s)).on(Object(l.a)().TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case Object(l.a)().TaskState.PAUSED:console.log("Upload cover is paused");break;case Object(l.a)().TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){k.snapshot.ref.getDownloadURL().then((function(e){console.log("image available at",e),i.a.firestore().collection("live_events").doc(f.id).update({cover:e})}))})),e.next=55;break;case 52:e.prev=52,e.t0=e.catch(14),console.log(e.t0);case 55:case"end":return e.stop()}}),e,null,[[14,52]])})));return function(t,n){return e.apply(this,arguments)}}();function w(e){if(e){var t=e.toDate(),n=t.getMonth(),a=t.getDate(),r=t.getFullYear(),o=t.getHours(),s=t.getMinutes(),c=t.getSeconds();return t=a+"/"+n+"/"+r+" "+o+":"+s+":"+c}return null}var O=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,o,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,a=[],o=i.a.firestore(),"undefined"===typeof n){e.next=20;break}return e.prev=4,e.next=7,o.collection("live_events").doc(n).collection("submission").get();case 7:return e.sent.forEach(function(){var e=Object(s.a)(r.a.mark((function e(t){var n,s,c,i,u,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data(),s={},2!=n.status){e.next=38;break}return c=o.collection("students").doc(n.uid),e.next=6,c.get();case 6:if((i=e.sent).exists){e.next=26;break}return u=o.collection("users").doc(n.uid),e.next=11,u.get();case 11:l=e.sent,s.display_name="undefined"!==typeof l.data().display_name?l.data().display_name:n.display_name,s.school_id="undefined"!==typeof n.school_id?n.school_id:l.data().school_id,s.point=n.point,s.submit_at=w(n.submit_at),s.created_at=w(n.created_at),s.time_work=parseInt((n.submit_at-n.created_at)/60),s.email="undefined"!==typeof l.data().email?l.data().email:"",s.grade="undefined"!==typeof l.data().class?l.data().class:"",a.push(s),parseInt((n.submit_at-n.created_at)/60)>70?s.autosubmit="Tool auto":s.autosubmit="",s.not_student="Ch\u01b0a c\xf3 trong Student",console.log(s),e.next=38;break;case 26:s.display_name="undefined"!==typeof n.display_name?n.display_name:i.data().lastname+i.data().firstname,s.school_id="undefined"!==typeof n.school_id?n.school_id:i.data().school_id,s.point=n.point,s.submit_at=w(n.submit_at),s.created_at=w(n.created_at),s.time_work=parseInt((n.submit_at-n.created_at)/60),s.email="undefined"!==typeof i.data().email?i.data().email:"",s.grade="undefined"!==typeof i.data().class?i.data().class.name:"",a.push(s),parseInt((n.submit_at-n.created_at)/60)>70?s.autosubmit="Tool auto":s.autosubmit="",console.log(s),s.not_student="";case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11,o.collection("live_events").doc(n).get();case 11:c=e.sent,u=c.data(),setTimeout((function(){var e=u.title,t={Sheets:{data:f.utils.json_to_sheet(a)},SheetNames:["data"]},n=f.write(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});p.saveAs(r,e+".xlsx")}),3e4),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(4);case 18:e.next=20;break;case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,o,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,a=[],o=i.a.firestore(),"undefined"===typeof n){e.next=20;break}return e.prev=4,e.next=7,o.collection("live_events").doc(n).collection("submission").get();case 7:return e.sent.forEach(function(){var e=Object(s.a)(r.a.mark((function e(t){var c,i,u,l,d,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.data(),(i={}).devicesid="",2!=c.status){e.next=43;break}return u=o.collection("students").doc(c.uid),e.next=7,u.get();case 7:return l=e.sent,e.next=10,o.collection("live_events").doc(n).collection("submission").doc(t.id).collection("devices").get();case 10:if(e.sent.forEach(function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.devicesid+=","+t.id;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.exists){e.next=31;break}return d=o.collection("users").doc(c.uid),e.next=16,d.get();case 16:p=e.sent,i.display_name="undefined"!==typeof p.data().display_name?p.data().display_name:c.display_name,i.school_id="undefined"!==typeof c.school_id?c.school_id:p.data().school_id,i.point=c.point,i.submit_at=w(c.submit_at),i.created_at=w(c.created_at),i.time_work=parseInt((c.submit_at-c.created_at)/60),i.email="undefined"!==typeof p.data().email?p.data().email:"",i.grade="undefined"!==typeof p.data().class?p.data().class:"",a.push(i),parseInt((c.submit_at-c.created_at)/60)>70?i.autosubmit="Tool auto":i.autosubmit="",i.not_student="Ch\u01b0a c\xf3 trong Student",console.log(i),e.next=43;break;case 31:i.display_name="undefined"!==typeof c.display_name?c.display_name:l.data().lastname+l.data().firstname,i.school_id="undefined"!==typeof c.school_id?c.school_id:l.data().school_id,i.point=c.point,i.submit_at=w(c.submit_at),i.created_at=w(c.created_at),i.time_work=parseInt((c.submit_at-c.created_at)/60),i.email="undefined"!==typeof l.data().email?l.data().email:"",i.grade="undefined"!==typeof l.data().class?l.data().class.name:"",a.push(i),parseInt((c.submit_at-c.created_at)/60)>70?i.autosubmit="Tool auto":i.autosubmit="",console.log(i),i.not_student="";case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11,o.collection("live_events").doc(n).get();case 11:c=e.sent,u=c.data(),setTimeout((function(){var e=u.title,t={Sheets:{data:f.utils.json_to_sheet(a)},SheetNames:["data"]},n=f.write(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});p.saveAs(r,e+".xlsx")}),3e4),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(4);case 18:e.next=20;break;case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()},2788:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(4),s=n(23),c=n(0),i=n(401),u=n(1207),l=n(395),d=n(412),p=n(1284),f=n(16),b=n(38),m=n(15),v=n(5),h=n(1215),g=n(1260),_=n(1218),x=n(94),k=n(1178),y=n(201),j=n(1304),w=n.n(j),O=n(1717),T=n(1),z=["className"],S=Object(i.a)((function(e){return{root:{},action:{marginBottom:e.spacing(1),"& + &":{marginLeft:e.spacing(1)}}}})),U=function(e){var t=e.className,n=Object(b.a)(e,z),a=S();return Object(T.jsxs)(h.a,Object(f.a)(Object(f.a)({className:Object(v.default)(a.root,t),container:!0,justify:"space-between",spacing:3},n),{},{children:[Object(T.jsxs)(h.a,{item:!0,children:[Object(T.jsxs)(g.a,{separator:Object(T.jsx)(w.a,{fontSize:"small"}),"aria-label":"breadcrumb",children:[Object(T.jsx)(_.a,{variant:"body1",color:"inherit",to:"/hbon/management/schools",component:m.b,children:"Trang ch\u1ee7"}),Object(T.jsx)(_.a,{variant:"body1",color:"inherit",to:"#",component:m.b,children:"Qu\u1ea3n l\xfd"}),Object(T.jsx)(x.a,{variant:"body1",color:"textPrimary",children:"Event"})]}),Object(T.jsx)(x.a,{variant:"h3",color:"textPrimary",children:"Danh s\xe1ch event"})]}),Object(T.jsx)(h.a,{item:!0,children:Object(T.jsx)(_.a,{to:"/hbon/management/events/create",component:m.b,children:Object(T.jsx)(k.a,{color:"secondary",variant:"contained",startIcon:Object(T.jsx)(y.a,{fontSize:"small",children:Object(T.jsx)(O.a,{})}),children:"Th\xeam Event"})})})]}))},E=n(1907),N=n(2275),q=n.n(N),D=["className","events"];console.log(E.i);var I=[{name:"display_name",label:"T\xean",options:{filter:!1,sort:!0}},{name:"school_id",label:"Tr\u01b0\u1eddng",options:{filter:!0,sort:!1}},{name:"point",label:"\u0110i\u1ec3m",options:{filter:!0,sort:!1}},{name:"created_at",label:"B\u1eaft \u0111\u1ea7u",options:{filter:!0,sort:!1}},{name:"submit_at",label:"K\u1ebft th\xfac",options:{filter:!0,sort:!1}},{name:"time_work",label:"Th\u1eddi gian l\xe0m",options:{filter:!0,sort:!1}},{name:"email",label:"Email",options:{filter:!0,sort:!1}},{name:"grade",label:"\u0110i\u1ec3m",options:{filter:!0,sort:!1}}],R={filterType:"checkbox"},A=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.className,n=t.events,Object(b.a)(t,D),e.abrupt("return",Object(T.jsx)(q.a,{title:"Employee List",data:n,columns:I,options:R}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();A.defaultProps={events:[]};n(2257);var B=[{name:"display_name",label:"T\xean",options:{filter:!1,sort:!0}},{name:"school_id",label:"Tr\u01b0\u1eddng",options:{filter:!0,sort:!1}},{name:"point",label:"\u0110i\u1ec3m",options:{filter:!0,sort:!1}},{name:"created_at",label:"B\u1eaft \u0111\u1ea7u",options:{filter:!0,sort:!1}},{name:"submit_at",label:"K\u1ebft th\xfac",options:{filter:!0,sort:!1}},{name:"time_work",label:"Th\u1eddi gian l\xe0m",options:{filter:!0,sort:!1}},{name:"email",label:"Email",options:{filter:!0,sort:!1}},{name:"grade",label:"\u0110i\u1ec3m",options:{filter:!0,sort:!1}}],F={filterType:"checkbox"},C=Object(i.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));t.default=function(e){var t=e.match.params.eventId,n=C(),a=Object(p.a)(),i=Object(c.useState)([]),f=Object(s.a)(i,2),b=f[0],m=f[1],v=Object(c.useCallback)(Object(o.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(E.i)(t);case 3:if(n=e.sent,console.log(n),!a.current){e.next=8;break}return e.next=8,m(n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[a]);return Object(c.useEffect)((function(){v()}),[v]),Object(T.jsx)(d.a,{className:n.root,title:"Tr\u01b0\u1eddng h\u1ecdc",children:Object(T.jsxs)(u.a,{maxWidth:!1,children:[Object(T.jsx)(U,{}),Object(T.jsx)(l.a,{mt:3,children:Object(T.jsx)(q.a,{title:"List Submit",data:b,columns:B,options:F})})]})})}}}]);
//# sourceMappingURL=93.c10ff2c0.chunk.js.map