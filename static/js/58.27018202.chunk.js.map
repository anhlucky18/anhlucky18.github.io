{"version":3,"sources":["../node_modules/@material-ui/core/esm/Paper/index.js","hooks/useIsMountedRef.js","../node_modules/@material-ui/lab/esm/useAutocomplete/useAutocomplete.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/@material-ui/lab/Autocomplete/Autocomplete.js","../node_modules/@material-ui/lab/esm/useAutocomplete/index.js","../node_modules/@material-ui/lab/internal/svg-icons/Close.js","../node_modules/@material-ui/lab/internal/svg-icons/ArrowDropDown.js","utils/bytesToSize.js","components/FilesDropzone.js","../node_modules/@material-ui/icons/FileCopy.js","../node_modules/@material-ui/icons/MoreVert.js","../node_modules/tslib/tslib.es6.js","../../../src/file.ts","../../../src/file-selector.ts","../node_modules/react-dropzone/dist/es/utils/index.js","../node_modules/react-dropzone/dist/es/index.js","../node_modules/attr-accept/dist/index.js","../node_modules/idb/build/idb.js","api/catalog.js","../../lib/hashids.ts","../node_modules/@material-ui/core/esm/IconButton/index.js","../../src/util/constants.ts","../../src/util/errors.ts","../../src/functions/common.ts","../../src/functions/create-installation-request.ts","../../src/util/sleep.ts","../../src/helpers/generate-fid.ts","../../src/helpers/buffer-to-base64-url-safe.ts","../../src/util/get-key.ts","../../src/helpers/fid-changed.ts","../../src/helpers/idb-manager.ts","../../src/helpers/get-installation-entry.ts","../../src/functions/generate-auth-token-request.ts","../../src/helpers/refresh-auth-token.ts","../../src/api/get-id.ts","../../src/api/get-token.ts","../../src/helpers/extract-app-config.ts","../../src/functions/config.ts","../../src/index.ts","../../src/interfaces/internal-message-payload.ts","../../src/helpers/array-base64-translator.ts","../../src/helpers/migrate-old-database.ts","../../src/internals/idb-manager.ts","../../src/internals/requests.ts","../../src/internals/token-manager.ts","../../src/helpers/externalizePayload.ts","../../src/helpers/is-console-message.ts","../../src/helpers/logToFirelog.ts","../../src/messaging-service.ts","../../src/helpers/registerDefaultSw.ts","../../src/helpers/updateSwReg.ts","../../src/helpers/updateVapidKey.ts","../../src/api/getToken.ts","../../src/helpers/logToScion.ts","../../src/listeners/window-listener.ts","../../src/helpers/register.ts","../../src/api/deleteToken.ts","../../src/api.ts","../../src/api/onMessage.ts","../../src/helpers/sleep.ts","../../src/listeners/sw-listeners.ts","../../src/api/onBackgroundMessage.ts","../../src/messaging-compat.ts","../../src/registerMessagingCompat.ts","api/slides.js","views/teachers/slides/SlideCreateView/SlideCreateForm.js","views/teachers/slides/SlideCreateView/index.js","../node_modules/@material-ui/core/esm/Popper/index.js","../node_modules/@material-ui/core/esm/Chip/index.js","../node_modules/@material-ui/core/esm/ListSubheader/index.js"],"names":["useIsMountedRef","isMounted","useRef","useEffect","current","stripDiacritics","string","normalize","replace","createFilterOptions","config","arguments","length","undefined","_config$ignoreAccents","ignoreAccents","_config$ignoreCase","ignoreCase","limit","_config$matchFrom","matchFrom","stringify","_config$trim","trim","options","_ref","inputValue","getOptionLabel","input","toLowerCase","filteredOptions","filter","option","candidate","indexOf","slice","findIndex","array","comp","i","defaultFilterOptions","useAutocomplete","props","_props$autoComplete","autoComplete","_props$autoHighlight","autoHighlight","_props$autoSelect","autoSelect","_props$blurOnSelect","blurOnSelect","_props$clearOnBlur","clearOnBlur","freeSolo","_props$clearOnEscape","clearOnEscape","_props$componentName","componentName","_props$debug","debug","_props$defaultValue","defaultValue","multiple","_props$disableClearab","disableClearable","_props$disableCloseOn","disableCloseOnSelect","_props$disabledItemsF","disabledItemsFocusable","_props$disableListWra","disableListWrap","_props$filterOptions","filterOptions","_props$filterSelected","filterSelectedOptions","_props$freeSolo","getOptionDisabled","_props$getOptionLabel","getOptionLabelProp","_props$getOptionSelec","getOptionSelected","value","groupBy","_props$handleHomeEndK","handleHomeEndKeys","idProp","id","_props$includeInputIn","includeInputInList","inputValueProp","_props$multiple","onChange","onClose","onHighlightChange","onInputChange","onOpen","openProp","open","_props$openOnFocus","openOnFocus","_props$selectOnFocus","selectOnFocus","valueProp","useId","ignoreFocus","React","firstFocus","inputRef","listboxRef","_React$useState","anchorEl","setAnchorEl","_React$useState2","focusedTag","setFocusedTag","defaultHighlighted","highlightedIndexRef","_useControlled","useControlled","controlled","default","name","_useControlled2","_slicedToArray","setValue","_useControlled3","state","_useControlled4","setInputValue","_React$useState3","focused","setFocused","resetInputValue","useEventCallback","event","newValue","newInputValue","optionLabel","_useControlled5","_useControlled6","setOpenState","inputValueIsSelectedValue","popupOpen","some","value2","focusTag","tagToFocus","focus","querySelector","concat","setHighlightedIndex","_ref2","index","_ref2$reason","reason","removeAttribute","setAttribute","prev","listboxNode","parentElement","scrollHeight","clientHeight","element","scrollBottom","scrollTop","elementBottom","offsetTop","offsetHeight","changeHighlightedIndex","_ref3","diff","_ref3$direction","direction","_ref3$reason","nextIndex","nextFocus","nextFocusDisabled","disabled","getAttribute","hasAttribute","validOptionIndex","maxIndex","newIndex","Math","abs","getNextIndex","setSelectionRange","syncHighlightedIndex","valueItem","currentOption","val","itemIndex","optionItem","handleListboxRef","node","setRef","handleOpen","handleClose","handleValue","details","isTouch","selectNewValue","reasonProp","origin","Array","isArray","push","splice","blur","handleFocusTag","nextTag","validTagIndex","handleClear","handleKeyDown","other","key","preventDefault","which","stopPropagation","onKeyDown","handleFocus","handleBlur","document","activeElement","handleInputChange","target","handleOptionMouseOver","Number","currentTarget","handleOptionTouchStart","handleOptionClick","handleTagDelete","handlePopupIndicator","handleMouseDown","handleClick","selectionEnd","selectionStart","select","handleInputMouseDown","dirty","groupedOptions","Map","reduce","acc","group","getRootProps","_extends","role","onMouseDown","onClick","getInputLabelProps","htmlFor","getInputProps","onBlur","onFocus","ref","autoCapitalize","spellCheck","getClearProps","tabIndex","getPopupIndicatorProps","getTagProps","_ref4","onDelete","getListboxProps","getOptionProps","_ref5","selected","onMouseOver","onTouchStart","objectWithoutPropertiesLoose","module","exports","source","excluded","Object","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","_interopRequireWildcard","require","_interopRequireDefault","defineProperty","enumerable","get","_useAutocomplete2","styles","_objectWithoutProperties2","_defineProperty2","_extends2","_clsx","_styles","_Popper","_ListSubheader","_Paper","_IconButton","_Chip","_Close","_ArrowDropDown","theme","_option","root","visibility","fullWidth","width","tag","margin","maxWidth","tagSizeSmall","hasPopupIcon","hasClearIcon","inputRoot","flexWrap","paddingRight","minWidth","paddingBottom","padding","paddingLeft","right","paddingTop","flexGrow","textOverflow","opacity","inputFocused","endAdornment","position","top","clearIndicator","marginRight","clearIndicatorDirty","popupIndicator","popupIndicatorOpen","transform","popper","zIndex","modal","popperDisablePortal","paper","typography","body1","overflow","listbox","listStyle","maxHeight","loading","color","palette","text","secondary","noOptions","minHeight","display","justifyContent","alignItems","cursor","boxSizing","outline","WebkitTapHighlightColor","breakpoints","up","backgroundColor","action","hover","disabledOpacity","pointerEvents","groupLabel","background","groupUl","DisablePortal","createElement","fontSize","Autocomplete","forwardRef","startAdornment","ChipProps","classes","className","_props$clearText","clearText","_props$closeIcon","closeIcon","_props$closeText","closeText","_props$disabled","_props$disablePortal","disablePortal","_props$forcePopupIcon","forcePopupIcon","_props$fullWidth","_props$getLimitTagsTe","getLimitTagsText","more","x","_props$limitTags","limitTags","_props$ListboxCompone","ListboxComponent","ListboxProps","_props$loading","_props$loadingText","loadingText","_props$noOptionsText","noOptionsText","_props$openText","openText","_props$PaperComponent","PaperComponent","_props$PopperComponen","PopperComponent","PopperComponentProp","_props$popupIcon","popupIcon","renderGroupProp","renderGroup","renderInput","renderOptionProp","renderOption","renderTags","_props$size","size","_useAutocomplete","getCustomizedTagProps","params","map","label","component","children","renderListOption","optionProps","Fragment","InputLabelProps","InputProps","title","inputProps","style","clientWidth","option2","index2","_default","withStyles","createSvgIcon","d","bytesToSize","bytes","decimals","k","dm","sizes","floor","log","parseFloat","pow","toFixed","useStyles","makeStyles","dropZone","border","divider","spacing","dragActive","active","image","info","marginTop","list","actions","marginLeft","FilesDropzone","handleDrop","files","handleRemoveAll","rest","useDropzone","onDrop","isDragActive","clsx","alt","src","Typography","gutterBottom","variant","Box","mt","Link","underline","suppressScrollX","List","file","ListItem","ListItemIcon","ListItemText","primary","primaryTypographyProps","Tooltip","IconButton","edge","Button","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","pop","__read","o","m","r","ar","error","dataTransfer","items","fileAccepted","accept","type","accepts","fileMatchSize","minSize","maxSize","isDefined","allFilesAccepted","every","isPropagationStopped","cancelBubble","isEvtWithFiles","types","onDocumentDragOver","isIe","userAgent","isEdge","isIeOrEdge","window","navigator","composeEventHandlers","_len","fns","_key","_len2","args","_key2","fn","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","toString","from","_iterableToArray","_nonIterableSpread","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","err","_iterableToArrayLimit","_nonIterableRest","ownKeys","object","enumerableOnly","keys","symbols","sym","getOwnPropertyDescriptor","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","configurable","writable","_objectWithoutProperties","sourceKeys","_objectWithoutPropertiesLoose","Dropzone","_useDropzone","useImperativeHandle","displayName","propTypes","PropTypes","func","oneOfType","arrayOf","bool","preventDropOnDocument","noClick","noKeyboard","noDrag","noDragEventsBubbling","number","getFilesFromEvent","onFileDialogCancel","onDragEnter","onDragLeave","onDragOver","onDropAccepted","onDropRejected","initialState","isFocused","isFileDialogActive","isDragAccept","isDragReject","draggedFiles","acceptedFiles","rejectedFiles","_ref2$disabled","_ref2$getFilesFromEve","fromEvent","_ref2$maxSize","Infinity","_ref2$minSize","_ref2$multiple","_ref2$preventDropOnDo","_ref2$noClick","_ref2$noKeyboard","_ref2$noDrag","_ref2$noDragEventsBub","rootRef","_useReducer","useReducer","reducer","_useReducer2","dispatch","openFileDialog","useCallback","click","onWindowFocus","setTimeout","addEventListener","removeEventListener","onKeyDownCb","isEqualNode","keyCode","onFocusCb","onBlurCb","onClickCb","dragTargetsRef","onDocumentDrop","contains","onDragEnterCb","persist","onDragOverCb","dropEffect","_unused","onDragLeaveCb","targets","onDropCb","composeHandler","composeKeyboardHandler","composeDragHandler","useMemo","_ref3$refKey","refKey","onInputElementClick","_ref4$refKey","fileCount","l","c","__esModule","hasOwnProperty","p","s","split","u","charAt","endsWith","toArray","promisifyRequest","request","onsuccess","onerror","promisifyRequestCall","method","promisifyCursorRequestCall","Cursor","proxyProperties","ProxyClass","targetProp","properties","prop","set","proxyRequestMethods","Constructor","proxyMethods","proxyCursorRequestMethods","Index","_index","_cursor","_request","ObjectStore","store","_store","Transaction","idbTransaction","_tx","complete","oncomplete","onabort","UpgradeDB","db","oldVersion","transaction","_db","DB","openDb","version","upgradeCallback","indexedDB","onupgradeneeded","deleteDb","IDBIndex","IDBCursor","methodName","createIndex","IDBObjectStore","objectStore","IDBTransaction","createObjectStore","IDBDatabase","funcName","callback","nativeObject","getAll","query","count","instance","iterateCursor","continue","factory","app","firestore","listCataloges","teacherid","a","collection","doc","orderBy","querySnapshot","docs","catalogs","data","console","getCatalog","catalogId","catalogData","catalogDetail","exists","detail","sectionSnapshot","sections","getSubjects","updateCatalog","created_by","update","doIndex","createCatalog","author","add","catalogRef","getListAllTags","tags","addCatalogSection","lastSection","empty","section","location","reload","updateCatalogSection","sectionId","userId","deleteSection","delete","deleteQuiz","quizId","activityType","quizref","sectionRef","sectionData","activities","entries","path","addUrlActivity","values","activity","url","getFirestore","FieldValue","arrayUnion","deleteCatalogs","ids","doPublic","teacherId","param","axios","post","API_URL","Hashids","salt","minLength","alphabet","seps","saltChars","alphabetChars","sepsChars","uniqueAlphabet","keepUnique","Error","withoutChars","filteredSeps","onlyChars","shuffle","sepsLength","guardCount","makeAnyOfCharsRegExp","makeAtLeastSomeCharRegExp","encode","numbers","ret","first","safeParseInt10","String","_encode","decode","_decode","encodeHex","hex","test","splitAtIntervalAndMap","parseInt","decodeHex","numbersIdInt","last","BigInt","lottery","guards","buffer","toAlphabet","charCode","extraNumber","prefixGuardIndex","suffixGuardIndex","halfLength","excess","halfOfExcess","isValidId","allowedCharsRegExp","join","idGuardsArray","idBreakdown","lotteryChar","idArray","lastAlphabet","subId","nextAlphabet","fromAlphabet","minAlphabetLength","sepDiv","guardDiv","Set","chars","keepChars","isIntegerNumber","isPositiveAndFinite","transformed","integer","j","b","alphabetLength","inputChars","carry","safeToParseNumberRegExp","str","RegExp","escapeRegExp","getInstallationsEndpoint","projectId","extractAuthTokenInfoFromResponse","response","token","requestStatus","expiresIn","responseExpiresIn","creationTime","Date","now","getErrorFromResponse","requestName","json","responseJson","errorData","ERROR_FACTORY","create","serverCode","code","serverMessage","message","serverStatus","status","getHeaders","apiKey","Headers","Accept","getHeadersWithAuth","appConfig","refreshToken","headers","append","INTERNAL_AUTH_VERSION","getAuthorizationHeader","retryIfServerError","createInstallationRequest","fid","endpoint","authVersion","appId","sdkVersion","PACKAGE_VERSION","JSON","fetch","ok","responseValue","registeredInstallationEntry","registrationStatus","authToken","sleep","ms","VALID_FID_PATTERN","generateFid","fidByteArray","Uint8Array","self","crypto","msCrypto","getRandomValues","btoa","fromCharCode","substr","getKey","appName","fidChangeCallbacks","fidChanged","callFidChangeCallbacks","channel","getBroadcastChannel","postMessage","closeBroadcastChannel","broadcastFidChange","callbacks","broadcastChannel","BroadcastChannel","onmessage","close","OBJECT_STORE_NAME","dbPromise","getDbPromise","upgradeDB","tx","oldValue","put","remove","updateFn","getInstallationEntry","oldEntry","installationEntry","updateOrCreateInstallationEntry","entryWithPromise","triggerRegistrationIfNecessary","registrationPromise","clearTimedOutRequest","onLine","inProgressEntry","registrationTime","registerInstallation","waitUntilFidRegistration","isServerError","customData","updateInstallationRequest","entry","PENDING_TIMEOUT_MS","generateAuthTokenRequest","platformLoggerProvider","getGenerateAuthTokenEndpoint","platformLogger","getImmediate","optional","getPlatformInfoString","installation","completedAuthToken","refreshAuthToken","installations","forceRefresh","isEntryRegistered","oldAuthToken","isAuthTokenValid","tokenPromise","waitUntilAuthTokenRequest","makeAuthTokenRequestInProgressEntry","fetchAuthTokenFromServer","updateAuthTokenRequest","requestTime","updatedInstallationEntry","TOKEN_EXPIRATION_BUFFER","isAuthTokenExpired","inProgressAuthToken","installationsImpl","catch","completeInstallationRegistration","INSTALLATIONS_NAME","container","getProvider","extractAppConfig","_delete","getId","getToken","MessageType","DEFAULT_SW_PATH","DEFAULT_SW_SCOPE","DEFAULT_VAPID_KEY","CONSOLE_CAMPAIGN_ID","arrayToBase64","uint8Array","base64ToArray","base64String","base64","repeat","rawData","atob","outputArray","charCodeAt","OLD_DB_NAME","OLD_OBJECT_STORE_NAME","migrateOldDatabase","senderId","databases","includes","tokenDetails","objectStoreNames","clear","oldDetails","auth","p256dh","fcmToken","createTime","subscriptionOptions","swScope","vapidKey","checkTokenDetails","upgradeDb","dbGet","firebaseDependencies","oldTokenDetails","dbSet","dbRemove","ERROR_MAP","requestGetToken","getBody","subscribeOptions","getEndpoint","responseData","errorInfo","requestUpdateToken","updateOptions","requestDeleteToken","unsubscribeOptions","web","applicationPubKey","TOKEN_EXPIRATION_MS","getTokenInternal","messaging","getPushSubscription","swRegistration","pushSubscription","scope","getNewToken","isTokenValid","warn","updateToken","deleteTokenInternal","pushManager","getSubscription","unsubscribe","updatedToken","updatedTokenDetails","subscription","subscribe","userVisibleOnly","applicationServerKey","dbOptions","currentOptions","isVapidKeyEqual","isEndpointEqual","isAuthEqual","isP256dhEqual","externalizePayload","internalPayload","payload","collapseKey","collapse_key","messageId","fcm_message_id","messagePayloadInternal","notification","propagateNotificationPayload","propagateDataPayload","fcmOptions","link","analyticsLabel","analytics_label","propagateFcmOptions","isConsoleMessage","_mergeStrings","s1","s2","resultArray","valueName","analyticsProvider","deliveryMetricsExportedToBigQueryEnabled","onBackgroundMessageHandler","onMessageHandler","logEvents","isLogServiceStarted","keyName","messagingSenderId","registerDefaultSw","serviceWorker","register","browserErrorMessage","updateSwReg","ServiceWorkerRegistration","updateVapidKey","Notification","permission","requestPermission","serviceWorkerRegistration","logToScion","messageType","eventType","getEventType","logEvent","message_id","message_name","CONSOLE_CAMPAIGN_NAME","message_time","CONSOLE_CAMPAIGN_TIME","message_device_time","NOTIFICATION_CLICKED","PUSH_RECEIVED","isFirebaseMessaging","dataPayload","CONSOLE_CAMPAIGN_ANALYTICS_ENABLED","WindowMessagingFactory","messageEventListener","WindowMessagingInternalFactory","_getToken","_deleteToken","nextOrObserver","_onMessage","FCM_MSG","stageLog","createFcmEvent","fcmEvent","createAndEnqueueLogEvent","project_number","instance_id","message_type","DISPLAY_NOTIFICATION","DATA_MESSAGE","sdk_platform","package_name","event_time_ms","source_extension_json_proto3","newSubscription","getMessagePayloadInternal","getClientList","hasVisibleClients","clientList","sendMessagePayloadInternalToWindows","showNotification","wrapInternalPayload","stopImmediatePropagation","getLink","URL","href","originUrl","host","getWindowClient","client","clients","openWindow","wrappedInternalPayload","clientUrl","visibilityState","startsWith","matchAll","includeUncontrolled","notificationPayloadInternal","maxActions","registration","click_action","SwMessagingFactory","waitUntil","onPush","onSubChange","onNotificationClick","_onBackgroundMessage","_delegate","messagingCompatFactory","NAMESPACE_EXPORTS","isSupported","PushSubscription","cookieEnabled","INTERNAL","registerComponent","setServiceProps","registerVersion","addSlide","create_at","serverTimestamp","slideRef","slide","slideId","slideData","metadata","contentType","cover_url","storageRef","storage","uploadTask","child","on","getStorage","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","TaskState","PAUSED","RUNNING","getDownloadURL","downloadURL","cover","addPartSlide","subSlide","parentId","updatePartSlide","getSlideMaster","getSlide","subslideRef","listSlides","listSlide","deleteslides","SlideCreateForm","isMountedRef","history","useHistory","user","useAuth","useState","setFiles","prevFiles","setTags","getTags","initialValues","desc","submit","validationSchema","Yup","shape","max","required","onSubmit","resetForm","setErrors","setStatus","setSubmitting","idSlide","success","errors","handleChange","handleSubmit","touched","isSubmitting","Card","CardContent","Grid","item","md","xs","TextField","Boolean","helperText","hidden","Chip","placeholder","CardHeader","Divider","dark","avatar","colors","red","stepper","Slide","Page"],"mappings":"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","file":"static/js/58.27018202.chunk.js","sourcesContent":["export { default } from './Paper';","import {useRef, useEffect } from 'react';\n\nconst useIsMountedRef = () => {\n  const isMounted = useRef(true);\n\n  useEffect(() => () => {\n    isMounted.current = false;\n  }, []);\n\n  return isMounted;\n};\n\nexport default useIsMountedRef;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\n/* eslint-disable no-constant-condition */\nimport * as React from 'react';\nimport { setRef, useEventCallback, useControlled, unstable_useId as useId } from '@material-ui/core/utils'; // https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript\n// Give up on IE 11 support for this feature\n\nfunction stripDiacritics(string) {\n  return typeof string.normalize !== 'undefined' ? string.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '') : string;\n}\n\nexport function createFilterOptions() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _config$ignoreAccents = config.ignoreAccents,\n      ignoreAccents = _config$ignoreAccents === void 0 ? true : _config$ignoreAccents,\n      _config$ignoreCase = config.ignoreCase,\n      ignoreCase = _config$ignoreCase === void 0 ? true : _config$ignoreCase,\n      limit = config.limit,\n      _config$matchFrom = config.matchFrom,\n      matchFrom = _config$matchFrom === void 0 ? 'any' : _config$matchFrom,\n      stringify = config.stringify,\n      _config$trim = config.trim,\n      trim = _config$trim === void 0 ? false : _config$trim;\n  return function (options, _ref) {\n    var inputValue = _ref.inputValue,\n        getOptionLabel = _ref.getOptionLabel;\n    var input = trim ? inputValue.trim() : inputValue;\n\n    if (ignoreCase) {\n      input = input.toLowerCase();\n    }\n\n    if (ignoreAccents) {\n      input = stripDiacritics(input);\n    }\n\n    var filteredOptions = options.filter(function (option) {\n      var candidate = (stringify || getOptionLabel)(option);\n\n      if (ignoreCase) {\n        candidate = candidate.toLowerCase();\n      }\n\n      if (ignoreAccents) {\n        candidate = stripDiacritics(candidate);\n      }\n\n      return matchFrom === 'start' ? candidate.indexOf(input) === 0 : candidate.indexOf(input) > -1;\n    });\n    return typeof limit === 'number' ? filteredOptions.slice(0, limit) : filteredOptions;\n  };\n} // To replace with .findIndex() once we stop IE 11 support.\n\nfunction findIndex(array, comp) {\n  for (var i = 0; i < array.length; i += 1) {\n    if (comp(array[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nvar defaultFilterOptions = createFilterOptions(); // Number of options to jump in list box when pageup and pagedown keys are used.\n\nvar pageSize = 5;\nexport default function useAutocomplete(props) {\n  var _props$autoComplete = props.autoComplete,\n      autoComplete = _props$autoComplete === void 0 ? false : _props$autoComplete,\n      _props$autoHighlight = props.autoHighlight,\n      autoHighlight = _props$autoHighlight === void 0 ? false : _props$autoHighlight,\n      _props$autoSelect = props.autoSelect,\n      autoSelect = _props$autoSelect === void 0 ? false : _props$autoSelect,\n      _props$blurOnSelect = props.blurOnSelect,\n      blurOnSelect = _props$blurOnSelect === void 0 ? false : _props$blurOnSelect,\n      _props$clearOnBlur = props.clearOnBlur,\n      clearOnBlur = _props$clearOnBlur === void 0 ? !props.freeSolo : _props$clearOnBlur,\n      _props$clearOnEscape = props.clearOnEscape,\n      clearOnEscape = _props$clearOnEscape === void 0 ? false : _props$clearOnEscape,\n      _props$componentName = props.componentName,\n      componentName = _props$componentName === void 0 ? 'useAutocomplete' : _props$componentName,\n      _props$debug = props.debug,\n      debug = _props$debug === void 0 ? false : _props$debug,\n      _props$defaultValue = props.defaultValue,\n      defaultValue = _props$defaultValue === void 0 ? props.multiple ? [] : null : _props$defaultValue,\n      _props$disableClearab = props.disableClearable,\n      disableClearable = _props$disableClearab === void 0 ? false : _props$disableClearab,\n      _props$disableCloseOn = props.disableCloseOnSelect,\n      disableCloseOnSelect = _props$disableCloseOn === void 0 ? false : _props$disableCloseOn,\n      _props$disabledItemsF = props.disabledItemsFocusable,\n      disabledItemsFocusable = _props$disabledItemsF === void 0 ? false : _props$disabledItemsF,\n      _props$disableListWra = props.disableListWrap,\n      disableListWrap = _props$disableListWra === void 0 ? false : _props$disableListWra,\n      _props$filterOptions = props.filterOptions,\n      filterOptions = _props$filterOptions === void 0 ? defaultFilterOptions : _props$filterOptions,\n      _props$filterSelected = props.filterSelectedOptions,\n      filterSelectedOptions = _props$filterSelected === void 0 ? false : _props$filterSelected,\n      _props$freeSolo = props.freeSolo,\n      freeSolo = _props$freeSolo === void 0 ? false : _props$freeSolo,\n      getOptionDisabled = props.getOptionDisabled,\n      _props$getOptionLabel = props.getOptionLabel,\n      getOptionLabelProp = _props$getOptionLabel === void 0 ? function (option) {\n    return option;\n  } : _props$getOptionLabel,\n      _props$getOptionSelec = props.getOptionSelected,\n      getOptionSelected = _props$getOptionSelec === void 0 ? function (option, value) {\n    return option === value;\n  } : _props$getOptionSelec,\n      groupBy = props.groupBy,\n      _props$handleHomeEndK = props.handleHomeEndKeys,\n      handleHomeEndKeys = _props$handleHomeEndK === void 0 ? !props.freeSolo : _props$handleHomeEndK,\n      idProp = props.id,\n      _props$includeInputIn = props.includeInputInList,\n      includeInputInList = _props$includeInputIn === void 0 ? false : _props$includeInputIn,\n      inputValueProp = props.inputValue,\n      _props$multiple = props.multiple,\n      multiple = _props$multiple === void 0 ? false : _props$multiple,\n      onChange = props.onChange,\n      onClose = props.onClose,\n      onHighlightChange = props.onHighlightChange,\n      onInputChange = props.onInputChange,\n      onOpen = props.onOpen,\n      openProp = props.open,\n      _props$openOnFocus = props.openOnFocus,\n      openOnFocus = _props$openOnFocus === void 0 ? false : _props$openOnFocus,\n      options = props.options,\n      _props$selectOnFocus = props.selectOnFocus,\n      selectOnFocus = _props$selectOnFocus === void 0 ? !props.freeSolo : _props$selectOnFocus,\n      valueProp = props.value;\n  var id = useId(idProp);\n  var getOptionLabel = getOptionLabelProp;\n\n  if (process.env.NODE_ENV !== 'production') {\n    getOptionLabel = function getOptionLabel(option) {\n      var optionLabel = getOptionLabelProp(option);\n\n      if (typeof optionLabel !== 'string') {\n        var erroneousReturn = optionLabel === undefined ? 'undefined' : \"\".concat(_typeof(optionLabel), \" (\").concat(optionLabel, \")\");\n        console.error(\"Material-UI: The `getOptionLabel` method of \".concat(componentName, \" returned \").concat(erroneousReturn, \" instead of a string for \").concat(JSON.stringify(option), \".\"));\n      }\n\n      return optionLabel;\n    };\n  }\n\n  var ignoreFocus = React.useRef(false);\n  var firstFocus = React.useRef(true);\n  var inputRef = React.useRef(null);\n  var listboxRef = React.useRef(null);\n\n  var _React$useState = React.useState(null),\n      anchorEl = _React$useState[0],\n      setAnchorEl = _React$useState[1];\n\n  var _React$useState2 = React.useState(-1),\n      focusedTag = _React$useState2[0],\n      setFocusedTag = _React$useState2[1];\n\n  var defaultHighlighted = autoHighlight ? 0 : -1;\n  var highlightedIndexRef = React.useRef(defaultHighlighted);\n\n  var _useControlled = useControlled({\n    controlled: valueProp,\n    default: defaultValue,\n    name: componentName\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      value = _useControlled2[0],\n      setValue = _useControlled2[1];\n\n  var _useControlled3 = useControlled({\n    controlled: inputValueProp,\n    default: '',\n    name: componentName,\n    state: 'inputValue'\n  }),\n      _useControlled4 = _slicedToArray(_useControlled3, 2),\n      inputValue = _useControlled4[0],\n      setInputValue = _useControlled4[1];\n\n  var _React$useState3 = React.useState(false),\n      focused = _React$useState3[0],\n      setFocused = _React$useState3[1];\n\n  var resetInputValue = useEventCallback(function (event, newValue) {\n    var newInputValue;\n\n    if (multiple) {\n      newInputValue = '';\n    } else if (newValue == null) {\n      newInputValue = '';\n    } else {\n      var optionLabel = getOptionLabel(newValue);\n      newInputValue = typeof optionLabel === 'string' ? optionLabel : '';\n    }\n\n    if (inputValue === newInputValue) {\n      return;\n    }\n\n    setInputValue(newInputValue);\n\n    if (onInputChange) {\n      onInputChange(event, newInputValue, 'reset');\n    }\n  });\n  React.useEffect(function () {\n    resetInputValue(null, value);\n  }, [value, resetInputValue]);\n\n  var _useControlled5 = useControlled({\n    controlled: openProp,\n    default: false,\n    name: componentName,\n    state: 'open'\n  }),\n      _useControlled6 = _slicedToArray(_useControlled5, 2),\n      open = _useControlled6[0],\n      setOpenState = _useControlled6[1];\n\n  var inputValueIsSelectedValue = !multiple && value != null && inputValue === getOptionLabel(value);\n  var popupOpen = open;\n  var filteredOptions = popupOpen ? filterOptions(options.filter(function (option) {\n    if (filterSelectedOptions && (multiple ? value : [value]).some(function (value2) {\n      return value2 !== null && getOptionSelected(option, value2);\n    })) {\n      return false;\n    }\n\n    return true;\n  }), // we use the empty string to manipulate `filterOptions` to not filter any options\n  // i.e. the filter predicate always returns true\n  {\n    inputValue: inputValueIsSelectedValue ? '' : inputValue,\n    getOptionLabel: getOptionLabel\n  }) : [];\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (value !== null && !freeSolo && options.length > 0) {\n      var missingValue = (multiple ? value : [value]).filter(function (value2) {\n        return !options.some(function (option) {\n          return getOptionSelected(option, value2);\n        });\n      });\n\n      if (missingValue.length > 0) {\n        console.warn([\"Material-UI: The value provided to \".concat(componentName, \" is invalid.\"), \"None of the options match with `\".concat(missingValue.length > 1 ? JSON.stringify(missingValue) : JSON.stringify(missingValue[0]), \"`.\"), 'You can use the `getOptionSelected` prop to customize the equality test.'].join('\\n'));\n      }\n    }\n  }\n\n  var focusTag = useEventCallback(function (tagToFocus) {\n    if (tagToFocus === -1) {\n      inputRef.current.focus();\n    } else {\n      anchorEl.querySelector(\"[data-tag-index=\\\"\".concat(tagToFocus, \"\\\"]\")).focus();\n    }\n  }); // Ensure the focusedTag is never inconsistent\n\n  React.useEffect(function () {\n    if (multiple && focusedTag > value.length - 1) {\n      setFocusedTag(-1);\n      focusTag(-1);\n    }\n  }, [value, multiple, focusedTag, focusTag]);\n\n  function validOptionIndex(index, direction) {\n    if (!listboxRef.current || index === -1) {\n      return -1;\n    }\n\n    var nextFocus = index;\n\n    while (true) {\n      // Out of range\n      if (direction === 'next' && nextFocus === filteredOptions.length || direction === 'previous' && nextFocus === -1) {\n        return -1;\n      }\n\n      var option = listboxRef.current.querySelector(\"[data-option-index=\\\"\".concat(nextFocus, \"\\\"]\")); // Same logic as MenuList.js\n\n      var nextFocusDisabled = disabledItemsFocusable ? false : option && (option.disabled || option.getAttribute('aria-disabled') === 'true');\n\n      if (option && !option.hasAttribute('tabindex') || nextFocusDisabled) {\n        // Move to the next element.\n        nextFocus += direction === 'next' ? 1 : -1;\n      } else {\n        return nextFocus;\n      }\n    }\n  }\n\n  var setHighlightedIndex = useEventCallback(function (_ref2) {\n    var event = _ref2.event,\n        index = _ref2.index,\n        _ref2$reason = _ref2.reason,\n        reason = _ref2$reason === void 0 ? 'auto' : _ref2$reason;\n    highlightedIndexRef.current = index; // does the index exist?\n\n    if (index === -1) {\n      inputRef.current.removeAttribute('aria-activedescendant');\n    } else {\n      inputRef.current.setAttribute('aria-activedescendant', \"\".concat(id, \"-option-\").concat(index));\n    }\n\n    if (onHighlightChange) {\n      onHighlightChange(event, index === -1 ? null : filteredOptions[index], reason);\n    }\n\n    if (!listboxRef.current) {\n      return;\n    }\n\n    var prev = listboxRef.current.querySelector('[data-focus]');\n\n    if (prev) {\n      prev.removeAttribute('data-focus');\n    }\n\n    var listboxNode = listboxRef.current.parentElement.querySelector('[role=\"listbox\"]'); // \"No results\"\n\n    if (!listboxNode) {\n      return;\n    }\n\n    if (index === -1) {\n      listboxNode.scrollTop = 0;\n      return;\n    }\n\n    var option = listboxRef.current.querySelector(\"[data-option-index=\\\"\".concat(index, \"\\\"]\"));\n\n    if (!option) {\n      return;\n    }\n\n    option.setAttribute('data-focus', 'true'); // Scroll active descendant into view.\n    // Logic copied from https://www.w3.org/TR/wai-aria-practices/examples/listbox/js/listbox.js\n    //\n    // Consider this API instead once it has a better browser support:\n    // .scrollIntoView({ scrollMode: 'if-needed', block: 'nearest' });\n\n    if (listboxNode.scrollHeight > listboxNode.clientHeight && reason !== 'mouse') {\n      var element = option;\n      var scrollBottom = listboxNode.clientHeight + listboxNode.scrollTop;\n      var elementBottom = element.offsetTop + element.offsetHeight;\n\n      if (elementBottom > scrollBottom) {\n        listboxNode.scrollTop = elementBottom - listboxNode.clientHeight;\n      } else if (element.offsetTop - element.offsetHeight * (groupBy ? 1.3 : 0) < listboxNode.scrollTop) {\n        listboxNode.scrollTop = element.offsetTop - element.offsetHeight * (groupBy ? 1.3 : 0);\n      }\n    }\n  });\n  var changeHighlightedIndex = useEventCallback(function (_ref3) {\n    var event = _ref3.event,\n        diff = _ref3.diff,\n        _ref3$direction = _ref3.direction,\n        direction = _ref3$direction === void 0 ? 'next' : _ref3$direction,\n        _ref3$reason = _ref3.reason,\n        reason = _ref3$reason === void 0 ? 'auto' : _ref3$reason;\n\n    if (!popupOpen) {\n      return;\n    }\n\n    var getNextIndex = function getNextIndex() {\n      var maxIndex = filteredOptions.length - 1;\n\n      if (diff === 'reset') {\n        return defaultHighlighted;\n      }\n\n      if (diff === 'start') {\n        return 0;\n      }\n\n      if (diff === 'end') {\n        return maxIndex;\n      }\n\n      var newIndex = highlightedIndexRef.current + diff;\n\n      if (newIndex < 0) {\n        if (newIndex === -1 && includeInputInList) {\n          return -1;\n        }\n\n        if (disableListWrap && highlightedIndexRef.current !== -1 || Math.abs(diff) > 1) {\n          return 0;\n        }\n\n        return maxIndex;\n      }\n\n      if (newIndex > maxIndex) {\n        if (newIndex === maxIndex + 1 && includeInputInList) {\n          return -1;\n        }\n\n        if (disableListWrap || Math.abs(diff) > 1) {\n          return maxIndex;\n        }\n\n        return 0;\n      }\n\n      return newIndex;\n    };\n\n    var nextIndex = validOptionIndex(getNextIndex(), direction);\n    setHighlightedIndex({\n      index: nextIndex,\n      reason: reason,\n      event: event\n    }); // Sync the content of the input with the highlighted option.\n\n    if (autoComplete && diff !== 'reset') {\n      if (nextIndex === -1) {\n        inputRef.current.value = inputValue;\n      } else {\n        var option = getOptionLabel(filteredOptions[nextIndex]);\n        inputRef.current.value = option; // The portion of the selected suggestion that has not been typed by the user,\n        // a completion string, appears inline after the input cursor in the textbox.\n\n        var index = option.toLowerCase().indexOf(inputValue.toLowerCase());\n\n        if (index === 0 && inputValue.length > 0) {\n          inputRef.current.setSelectionRange(inputValue.length, option.length);\n        }\n      }\n    }\n  });\n  var syncHighlightedIndex = React.useCallback(function () {\n    if (!popupOpen) {\n      return;\n    }\n\n    var valueItem = multiple ? value[0] : value; // The popup is empty, reset\n\n    if (filteredOptions.length === 0 || valueItem == null) {\n      changeHighlightedIndex({\n        diff: 'reset'\n      });\n      return;\n    }\n\n    if (!listboxRef.current) {\n      return;\n    } // Synchronize the value with the highlighted index\n\n\n    if (!filterSelectedOptions && valueItem != null) {\n      var currentOption = filteredOptions[highlightedIndexRef.current]; // Keep the current highlighted index if possible\n\n      if (multiple && currentOption && findIndex(value, function (val) {\n        return getOptionSelected(currentOption, val);\n      }) !== -1) {\n        return;\n      }\n\n      var itemIndex = findIndex(filteredOptions, function (optionItem) {\n        return getOptionSelected(optionItem, valueItem);\n      });\n\n      if (itemIndex === -1) {\n        changeHighlightedIndex({\n          diff: 'reset'\n        });\n      } else {\n        setHighlightedIndex({\n          index: itemIndex\n        });\n      }\n\n      return;\n    } // Prevent the highlighted index to leak outside the boundaries.\n\n\n    if (highlightedIndexRef.current >= filteredOptions.length - 1) {\n      setHighlightedIndex({\n        index: filteredOptions.length - 1\n      });\n      return;\n    } // Restore the focus to the previous index.\n\n\n    setHighlightedIndex({\n      index: highlightedIndexRef.current\n    }); // Ignore filteredOptions (and options, getOptionSelected, getOptionLabel) not to break the scroll position\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [// Only sync the highlighted index when the option switch between empty and not\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  filteredOptions.length === 0, // Don't sync the highlighted index with the value when multiple\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  multiple ? false : value, filterSelectedOptions, changeHighlightedIndex, setHighlightedIndex, popupOpen, inputValue, multiple]);\n  var handleListboxRef = useEventCallback(function (node) {\n    setRef(listboxRef, node);\n\n    if (!node) {\n      return;\n    }\n\n    syncHighlightedIndex();\n  });\n  React.useEffect(function () {\n    syncHighlightedIndex();\n  }, [syncHighlightedIndex]);\n\n  var handleOpen = function handleOpen(event) {\n    if (open) {\n      return;\n    }\n\n    setOpenState(true);\n\n    if (onOpen) {\n      onOpen(event);\n    }\n  };\n\n  var handleClose = function handleClose(event, reason) {\n    if (!open) {\n      return;\n    }\n\n    setOpenState(false);\n\n    if (onClose) {\n      onClose(event, reason);\n    }\n  };\n\n  var handleValue = function handleValue(event, newValue, reason, details) {\n    if (value === newValue) {\n      return;\n    }\n\n    if (onChange) {\n      onChange(event, newValue, reason, details);\n    }\n\n    setValue(newValue);\n  };\n\n  var isTouch = React.useRef(false);\n\n  var selectNewValue = function selectNewValue(event, option) {\n    var reasonProp = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'select-option';\n    var origin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'options';\n    var reason = reasonProp;\n    var newValue = option;\n\n    if (multiple) {\n      newValue = Array.isArray(value) ? value.slice() : [];\n\n      if (process.env.NODE_ENV !== 'production') {\n        var matches = newValue.filter(function (val) {\n          return getOptionSelected(option, val);\n        });\n\n        if (matches.length > 1) {\n          console.error([\"Material-UI: The `getOptionSelected` method of \".concat(componentName, \" do not handle the arguments correctly.\"), \"The component expects a single value to match a given option but found \".concat(matches.length, \" matches.\")].join('\\n'));\n        }\n      }\n\n      var itemIndex = findIndex(newValue, function (valueItem) {\n        return getOptionSelected(option, valueItem);\n      });\n\n      if (itemIndex === -1) {\n        newValue.push(option);\n      } else if (origin !== 'freeSolo') {\n        newValue.splice(itemIndex, 1);\n        reason = 'remove-option';\n      }\n    }\n\n    resetInputValue(event, newValue);\n    handleValue(event, newValue, reason, {\n      option: option\n    });\n\n    if (!disableCloseOnSelect) {\n      handleClose(event, reason);\n    }\n\n    if (blurOnSelect === true || blurOnSelect === 'touch' && isTouch.current || blurOnSelect === 'mouse' && !isTouch.current) {\n      inputRef.current.blur();\n    }\n  };\n\n  function validTagIndex(index, direction) {\n    if (index === -1) {\n      return -1;\n    }\n\n    var nextFocus = index;\n\n    while (true) {\n      // Out of range\n      if (direction === 'next' && nextFocus === value.length || direction === 'previous' && nextFocus === -1) {\n        return -1;\n      }\n\n      var option = anchorEl.querySelector(\"[data-tag-index=\\\"\".concat(nextFocus, \"\\\"]\")); // Same logic as MenuList.js\n\n      if (option && (!option.hasAttribute('tabindex') || option.disabled || option.getAttribute('aria-disabled') === 'true')) {\n        nextFocus += direction === 'next' ? 1 : -1;\n      } else {\n        return nextFocus;\n      }\n    }\n  }\n\n  var handleFocusTag = function handleFocusTag(event, direction) {\n    if (!multiple) {\n      return;\n    }\n\n    handleClose(event, 'toggleInput');\n    var nextTag = focusedTag;\n\n    if (focusedTag === -1) {\n      if (inputValue === '' && direction === 'previous') {\n        nextTag = value.length - 1;\n      }\n    } else {\n      nextTag += direction === 'next' ? 1 : -1;\n\n      if (nextTag < 0) {\n        nextTag = 0;\n      }\n\n      if (nextTag === value.length) {\n        nextTag = -1;\n      }\n    }\n\n    nextTag = validTagIndex(nextTag, direction);\n    setFocusedTag(nextTag);\n    focusTag(nextTag);\n  };\n\n  var handleClear = function handleClear(event) {\n    ignoreFocus.current = true;\n    setInputValue('');\n\n    if (onInputChange) {\n      onInputChange(event, '', 'clear');\n    }\n\n    handleValue(event, multiple ? [] : null, 'clear');\n  };\n\n  var handleKeyDown = function handleKeyDown(other) {\n    return function (event) {\n      if (focusedTag !== -1 && ['ArrowLeft', 'ArrowRight'].indexOf(event.key) === -1) {\n        setFocusedTag(-1);\n        focusTag(-1);\n      }\n\n      switch (event.key) {\n        case 'Home':\n          if (popupOpen && handleHomeEndKeys) {\n            // Prevent scroll of the page\n            event.preventDefault();\n            changeHighlightedIndex({\n              diff: 'start',\n              direction: 'next',\n              reason: 'keyboard',\n              event: event\n            });\n          }\n\n          break;\n\n        case 'End':\n          if (popupOpen && handleHomeEndKeys) {\n            // Prevent scroll of the page\n            event.preventDefault();\n            changeHighlightedIndex({\n              diff: 'end',\n              direction: 'previous',\n              reason: 'keyboard',\n              event: event\n            });\n          }\n\n          break;\n\n        case 'PageUp':\n          // Prevent scroll of the page\n          event.preventDefault();\n          changeHighlightedIndex({\n            diff: -pageSize,\n            direction: 'previous',\n            reason: 'keyboard',\n            event: event\n          });\n          handleOpen(event);\n          break;\n\n        case 'PageDown':\n          // Prevent scroll of the page\n          event.preventDefault();\n          changeHighlightedIndex({\n            diff: pageSize,\n            direction: 'next',\n            reason: 'keyboard',\n            event: event\n          });\n          handleOpen(event);\n          break;\n\n        case 'ArrowDown':\n          // Prevent cursor move\n          event.preventDefault();\n          changeHighlightedIndex({\n            diff: 1,\n            direction: 'next',\n            reason: 'keyboard',\n            event: event\n          });\n          handleOpen(event);\n          break;\n\n        case 'ArrowUp':\n          // Prevent cursor move\n          event.preventDefault();\n          changeHighlightedIndex({\n            diff: -1,\n            direction: 'previous',\n            reason: 'keyboard',\n            event: event\n          });\n          handleOpen(event);\n          break;\n\n        case 'ArrowLeft':\n          handleFocusTag(event, 'previous');\n          break;\n\n        case 'ArrowRight':\n          handleFocusTag(event, 'next');\n          break;\n\n        case 'Enter':\n          // Wait until IME is settled.\n          if (event.which === 229) {\n            break;\n          }\n\n          if (highlightedIndexRef.current !== -1 && popupOpen) {\n            var option = filteredOptions[highlightedIndexRef.current];\n            var disabled = getOptionDisabled ? getOptionDisabled(option) : false; // We don't want to validate the form.\n\n            event.preventDefault();\n\n            if (disabled) {\n              return;\n            }\n\n            selectNewValue(event, option, 'select-option'); // Move the selection to the end.\n\n            if (autoComplete) {\n              inputRef.current.setSelectionRange(inputRef.current.value.length, inputRef.current.value.length);\n            }\n          } else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue === false) {\n            if (multiple) {\n              // Allow people to add new values before they submit the form.\n              event.preventDefault();\n            }\n\n            selectNewValue(event, inputValue, 'create-option', 'freeSolo');\n          }\n\n          break;\n\n        case 'Escape':\n          if (popupOpen) {\n            // Avoid Opera to exit fullscreen mode.\n            event.preventDefault(); // Avoid the Modal to handle the event.\n\n            event.stopPropagation();\n            handleClose(event, 'escape');\n          } else if (clearOnEscape && (inputValue !== '' || multiple && value.length > 0)) {\n            // Avoid Opera to exit fullscreen mode.\n            event.preventDefault(); // Avoid the Modal to handle the event.\n\n            event.stopPropagation();\n            handleClear(event);\n          }\n\n          break;\n\n        case 'Backspace':\n          if (multiple && inputValue === '' && value.length > 0) {\n            var index = focusedTag === -1 ? value.length - 1 : focusedTag;\n            var newValue = value.slice();\n            newValue.splice(index, 1);\n            handleValue(event, newValue, 'remove-option', {\n              option: value[index]\n            });\n          }\n\n          break;\n\n        default:\n      }\n\n      if (other.onKeyDown) {\n        other.onKeyDown(event);\n      }\n    };\n  };\n\n  var handleFocus = function handleFocus(event) {\n    setFocused(true);\n\n    if (openOnFocus && !ignoreFocus.current) {\n      handleOpen(event);\n    }\n  };\n\n  var handleBlur = function handleBlur(event) {\n    // Ignore the event when using the scrollbar with IE 11\n    if (listboxRef.current !== null && document.activeElement === listboxRef.current.parentElement) {\n      inputRef.current.focus();\n      return;\n    }\n\n    setFocused(false);\n    firstFocus.current = true;\n    ignoreFocus.current = false;\n\n    if (debug && inputValue !== '') {\n      return;\n    }\n\n    if (autoSelect && highlightedIndexRef.current !== -1 && popupOpen) {\n      selectNewValue(event, filteredOptions[highlightedIndexRef.current], 'blur');\n    } else if (autoSelect && freeSolo && inputValue !== '') {\n      selectNewValue(event, inputValue, 'blur', 'freeSolo');\n    } else if (clearOnBlur) {\n      resetInputValue(event, value);\n    }\n\n    handleClose(event, 'blur');\n  };\n\n  var handleInputChange = function handleInputChange(event) {\n    var newValue = event.target.value;\n\n    if (inputValue !== newValue) {\n      setInputValue(newValue);\n\n      if (onInputChange) {\n        onInputChange(event, newValue, 'input');\n      }\n    }\n\n    if (newValue === '') {\n      if (!disableClearable && !multiple) {\n        handleValue(event, null, 'clear');\n      }\n    } else {\n      handleOpen(event);\n    }\n  };\n\n  var handleOptionMouseOver = function handleOptionMouseOver(event) {\n    setHighlightedIndex({\n      event: event,\n      index: Number(event.currentTarget.getAttribute('data-option-index')),\n      reason: 'mouse'\n    });\n  };\n\n  var handleOptionTouchStart = function handleOptionTouchStart() {\n    isTouch.current = true;\n  };\n\n  var handleOptionClick = function handleOptionClick(event) {\n    var index = Number(event.currentTarget.getAttribute('data-option-index'));\n    selectNewValue(event, filteredOptions[index], 'select-option');\n    isTouch.current = false;\n  };\n\n  var handleTagDelete = function handleTagDelete(index) {\n    return function (event) {\n      var newValue = value.slice();\n      newValue.splice(index, 1);\n      handleValue(event, newValue, 'remove-option', {\n        option: value[index]\n      });\n    };\n  };\n\n  var handlePopupIndicator = function handlePopupIndicator(event) {\n    if (open) {\n      handleClose(event, 'toggleInput');\n    } else {\n      handleOpen(event);\n    }\n  }; // Prevent input blur when interacting with the combobox\n\n\n  var handleMouseDown = function handleMouseDown(event) {\n    if (event.target.getAttribute('id') !== id) {\n      event.preventDefault();\n    }\n  }; // Focus the input when interacting with the combobox\n\n\n  var handleClick = function handleClick() {\n    inputRef.current.focus();\n\n    if (selectOnFocus && firstFocus.current && inputRef.current.selectionEnd - inputRef.current.selectionStart === 0) {\n      inputRef.current.select();\n    }\n\n    firstFocus.current = false;\n  };\n\n  var handleInputMouseDown = function handleInputMouseDown(event) {\n    if (inputValue === '' || !open) {\n      handlePopupIndicator(event);\n    }\n  };\n\n  var dirty = freeSolo && inputValue.length > 0;\n  dirty = dirty || (multiple ? value.length > 0 : value !== null);\n  var groupedOptions = filteredOptions;\n\n  if (groupBy) {\n    // used to keep track of key and indexes in the result array\n    var indexBy = new Map();\n    var warn = false;\n    groupedOptions = filteredOptions.reduce(function (acc, option, index) {\n      var group = groupBy(option);\n\n      if (acc.length > 0 && acc[acc.length - 1].group === group) {\n        acc[acc.length - 1].options.push(option);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          if (indexBy.get(group) && !warn) {\n            console.warn(\"Material-UI: The options provided combined with the `groupBy` method of \".concat(componentName, \" returns duplicated headers.\"), 'You can solve the issue by sorting the options with the output of `groupBy`.');\n            warn = true;\n          }\n\n          indexBy.set(group, true);\n        }\n\n        acc.push({\n          key: index,\n          index: index,\n          group: group,\n          options: [option]\n        });\n      }\n\n      return acc;\n    }, []);\n  }\n\n  return {\n    getRootProps: function getRootProps() {\n      var other = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return _extends({\n        'aria-owns': popupOpen ? \"\".concat(id, \"-popup\") : null,\n        role: 'combobox',\n        'aria-expanded': popupOpen\n      }, other, {\n        onKeyDown: handleKeyDown(other),\n        onMouseDown: handleMouseDown,\n        onClick: handleClick\n      });\n    },\n    getInputLabelProps: function getInputLabelProps() {\n      return {\n        id: \"\".concat(id, \"-label\"),\n        htmlFor: id\n      };\n    },\n    getInputProps: function getInputProps() {\n      return {\n        id: id,\n        value: inputValue,\n        onBlur: handleBlur,\n        onFocus: handleFocus,\n        onChange: handleInputChange,\n        onMouseDown: handleInputMouseDown,\n        // if open then this is handled imperativeley so don't let react override\n        // only have an opinion about this when closed\n        'aria-activedescendant': popupOpen ? '' : null,\n        'aria-autocomplete': autoComplete ? 'both' : 'list',\n        'aria-controls': popupOpen ? \"\".concat(id, \"-popup\") : null,\n        // Disable browser's suggestion that might overlap with the popup.\n        // Handle autocomplete but not autofill.\n        autoComplete: 'off',\n        ref: inputRef,\n        autoCapitalize: 'none',\n        spellCheck: 'false'\n      };\n    },\n    getClearProps: function getClearProps() {\n      return {\n        tabIndex: -1,\n        onClick: handleClear\n      };\n    },\n    getPopupIndicatorProps: function getPopupIndicatorProps() {\n      return {\n        tabIndex: -1,\n        onClick: handlePopupIndicator\n      };\n    },\n    getTagProps: function getTagProps(_ref4) {\n      var index = _ref4.index;\n      return {\n        key: index,\n        'data-tag-index': index,\n        tabIndex: -1,\n        onDelete: handleTagDelete(index)\n      };\n    },\n    getListboxProps: function getListboxProps() {\n      return {\n        role: 'listbox',\n        id: \"\".concat(id, \"-popup\"),\n        'aria-labelledby': \"\".concat(id, \"-label\"),\n        ref: handleListboxRef,\n        onMouseDown: function onMouseDown(event) {\n          // Prevent blur\n          event.preventDefault();\n        }\n      };\n    },\n    getOptionProps: function getOptionProps(_ref5) {\n      var index = _ref5.index,\n          option = _ref5.option;\n      var selected = (multiple ? value : [value]).some(function (value2) {\n        return value2 != null && getOptionSelected(option, value2);\n      });\n      var disabled = getOptionDisabled ? getOptionDisabled(option) : false;\n      return {\n        key: index,\n        tabIndex: -1,\n        role: 'option',\n        id: \"\".concat(id, \"-option-\").concat(index),\n        onMouseOver: handleOptionMouseOver,\n        onClick: handleOptionClick,\n        onTouchStart: handleOptionTouchStart,\n        'data-option-index': index,\n        'aria-disabled': disabled,\n        'aria-selected': selected\n      };\n    },\n    id: id,\n    inputValue: inputValue,\n    value: value,\n    dirty: dirty,\n    popupOpen: popupOpen,\n    focused: focused || focusedTag !== -1,\n    anchorEl: anchorEl,\n    setAnchorEl: setAnchorEl,\n    focusedTag: focusedTag,\n    groupedOptions: groupedOptions\n  };\n}","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"createFilterOptions\", {\n  enumerable: true,\n  get: function get() {\n    return _useAutocomplete2.createFilterOptions;\n  }\n});\nexports.default = exports.styles = void 0;\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar _styles = require(\"@material-ui/core/styles\");\n\nvar _Popper = _interopRequireDefault(require(\"@material-ui/core/Popper\"));\n\nvar _ListSubheader = _interopRequireDefault(require(\"@material-ui/core/ListSubheader\"));\n\nvar _Paper = _interopRequireDefault(require(\"@material-ui/core/Paper\"));\n\nvar _IconButton = _interopRequireDefault(require(\"@material-ui/core/IconButton\"));\n\nvar _Chip = _interopRequireDefault(require(\"@material-ui/core/Chip\"));\n\nvar _Close = _interopRequireDefault(require(\"../internal/svg-icons/Close\"));\n\nvar _ArrowDropDown = _interopRequireDefault(require(\"../internal/svg-icons/ArrowDropDown\"));\n\nvar _useAutocomplete2 = _interopRequireWildcard(require(\"../useAutocomplete\"));\n\nvar styles = function styles(theme) {\n  var _option;\n\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      '&$focused $clearIndicatorDirty': {\n        visibility: 'visible'\n      },\n\n      /* Avoid double tap issue on iOS */\n      '@media (pointer: fine)': {\n        '&:hover $clearIndicatorDirty': {\n          visibility: 'visible'\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `fullWidth={true}`. */\n    fullWidth: {\n      width: '100%'\n    },\n\n    /* Pseudo-class applied to the root element if focused. */\n    focused: {},\n\n    /* Styles applied to the tag elements, e.g. the chips. */\n    tag: {\n      margin: 3,\n      maxWidth: 'calc(100% - 6px)'\n    },\n\n    /* Styles applied to the tag elements, e.g. the chips if `size=\"small\"`. */\n    tagSizeSmall: {\n      margin: 2,\n      maxWidth: 'calc(100% - 4px)'\n    },\n\n    /* Styles applied when the popup icon is rendered. */\n    hasPopupIcon: {},\n\n    /* Styles applied when the clear icon is rendered. */\n    hasClearIcon: {},\n\n    /* Styles applied to the Input element. */\n    inputRoot: {\n      flexWrap: 'wrap',\n      '$hasPopupIcon &, $hasClearIcon &': {\n        paddingRight: 26 + 4\n      },\n      '$hasPopupIcon$hasClearIcon &': {\n        paddingRight: 52 + 4\n      },\n      '& $input': {\n        width: 0,\n        minWidth: 30\n      },\n      '&[class*=\"MuiInput-root\"]': {\n        paddingBottom: 1,\n        '& $input': {\n          padding: 4\n        },\n        '& $input:first-child': {\n          padding: '6px 0'\n        }\n      },\n      '&[class*=\"MuiInput-root\"][class*=\"MuiInput-marginDense\"]': {\n        '& $input': {\n          padding: '4px 4px 5px'\n        },\n        '& $input:first-child': {\n          padding: '3px 0 6px'\n        }\n      },\n      '&[class*=\"MuiOutlinedInput-root\"]': {\n        padding: 9,\n        '$hasPopupIcon &, $hasClearIcon &': {\n          paddingRight: 26 + 4 + 9\n        },\n        '$hasPopupIcon$hasClearIcon &': {\n          paddingRight: 52 + 4 + 9\n        },\n        '& $input': {\n          padding: '9.5px 4px'\n        },\n        '& $input:first-child': {\n          paddingLeft: 6\n        },\n        '& $endAdornment': {\n          right: 9\n        }\n      },\n      '&[class*=\"MuiOutlinedInput-root\"][class*=\"MuiOutlinedInput-marginDense\"]': {\n        padding: 6,\n        '& $input': {\n          padding: '4.5px 4px'\n        }\n      },\n      '&[class*=\"MuiFilledInput-root\"]': {\n        paddingTop: 19,\n        paddingLeft: 8,\n        '$hasPopupIcon &, $hasClearIcon &': {\n          paddingRight: 26 + 4 + 9\n        },\n        '$hasPopupIcon$hasClearIcon &': {\n          paddingRight: 52 + 4 + 9\n        },\n        '& $input': {\n          padding: '9px 4px'\n        },\n        '& $endAdornment': {\n          right: 9\n        }\n      },\n      '&[class*=\"MuiFilledInput-root\"][class*=\"MuiFilledInput-marginDense\"]': {\n        paddingBottom: 1,\n        '& $input': {\n          padding: '4.5px 4px'\n        }\n      }\n    },\n\n    /* Styles applied to the input element. */\n    input: {\n      flexGrow: 1,\n      textOverflow: 'ellipsis',\n      opacity: 0\n    },\n\n    /* Styles applied to the input element if tag focused. */\n    inputFocused: {\n      opacity: 1\n    },\n\n    /* Styles applied to the endAdornment element. */\n    endAdornment: {\n      // We use a position absolute to support wrapping tags.\n      position: 'absolute',\n      right: 0,\n      top: 'calc(50% - 14px)' // Center vertically\n\n    },\n\n    /* Styles applied to the clear indicator. */\n    clearIndicator: {\n      marginRight: -2,\n      padding: 4,\n      visibility: 'hidden'\n    },\n\n    /* Styles applied to the clear indicator if the input is dirty. */\n    clearIndicatorDirty: {},\n\n    /* Styles applied to the popup indicator. */\n    popupIndicator: {\n      padding: 2,\n      marginRight: -2\n    },\n\n    /* Styles applied to the popup indicator if the popup is open. */\n    popupIndicatorOpen: {\n      transform: 'rotate(180deg)'\n    },\n\n    /* Styles applied to the popper element. */\n    popper: {\n      zIndex: theme.zIndex.modal\n    },\n\n    /* Styles applied to the popper element if `disablePortal={true}`. */\n    popperDisablePortal: {\n      position: 'absolute'\n    },\n\n    /* Styles applied to the `Paper` component. */\n    paper: (0, _extends2.default)({}, theme.typography.body1, {\n      overflow: 'hidden',\n      margin: '4px 0'\n    }),\n\n    /* Styles applied to the `listbox` component. */\n    listbox: {\n      listStyle: 'none',\n      margin: 0,\n      padding: '8px 0',\n      maxHeight: '40vh',\n      overflow: 'auto'\n    },\n\n    /* Styles applied to the loading wrapper. */\n    loading: {\n      color: theme.palette.text.secondary,\n      padding: '14px 16px'\n    },\n\n    /* Styles applied to the no option wrapper. */\n    noOptions: {\n      color: theme.palette.text.secondary,\n      padding: '14px 16px'\n    },\n\n    /* Styles applied to the option elements. */\n    option: (_option = {\n      minHeight: 48,\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      cursor: 'pointer',\n      paddingTop: 6,\n      boxSizing: 'border-box',\n      outline: '0',\n      WebkitTapHighlightColor: 'transparent',\n      paddingBottom: 6,\n      paddingLeft: 16,\n      paddingRight: 16\n    }, (0, _defineProperty2.default)(_option, theme.breakpoints.up('sm'), {\n      minHeight: 'auto'\n    }), (0, _defineProperty2.default)(_option, '&[aria-selected=\"true\"]', {\n      backgroundColor: theme.palette.action.selected\n    }), (0, _defineProperty2.default)(_option, '&[data-focus=\"true\"]', {\n      backgroundColor: theme.palette.action.hover\n    }), (0, _defineProperty2.default)(_option, '&:active', {\n      backgroundColor: theme.palette.action.selected\n    }), (0, _defineProperty2.default)(_option, '&[aria-disabled=\"true\"]', {\n      opacity: theme.palette.action.disabledOpacity,\n      pointerEvents: 'none'\n    }), _option),\n\n    /* Styles applied to the group's label elements. */\n    groupLabel: {\n      backgroundColor: theme.palette.background.paper,\n      top: -8\n    },\n\n    /* Styles applied to the group's ul elements. */\n    groupUl: {\n      padding: 0,\n      '& $option': {\n        paddingLeft: 24\n      }\n    }\n  };\n};\n\nexports.styles = styles;\n\nfunction DisablePortal(props) {\n  // eslint-disable-next-line react/prop-types\n  var anchorEl = props.anchorEl,\n      open = props.open,\n      other = (0, _objectWithoutProperties2.default)(props, [\"anchorEl\", \"open\"]);\n  return /*#__PURE__*/React.createElement(\"div\", other);\n}\n\nvar _ref = /*#__PURE__*/React.createElement(_Close.default, {\n  fontSize: \"small\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(_ArrowDropDown.default, null);\n\nvar Autocomplete = /*#__PURE__*/React.forwardRef(function Autocomplete(props, ref) {\n  /* eslint-disable no-unused-vars */\n  var _props$autoComplete = props.autoComplete,\n      autoComplete = _props$autoComplete === void 0 ? false : _props$autoComplete,\n      _props$autoHighlight = props.autoHighlight,\n      autoHighlight = _props$autoHighlight === void 0 ? false : _props$autoHighlight,\n      _props$autoSelect = props.autoSelect,\n      autoSelect = _props$autoSelect === void 0 ? false : _props$autoSelect,\n      _props$blurOnSelect = props.blurOnSelect,\n      blurOnSelect = _props$blurOnSelect === void 0 ? false : _props$blurOnSelect,\n      ChipProps = props.ChipProps,\n      classes = props.classes,\n      className = props.className,\n      _props$clearOnBlur = props.clearOnBlur,\n      clearOnBlur = _props$clearOnBlur === void 0 ? !props.freeSolo : _props$clearOnBlur,\n      _props$clearOnEscape = props.clearOnEscape,\n      clearOnEscape = _props$clearOnEscape === void 0 ? false : _props$clearOnEscape,\n      _props$clearText = props.clearText,\n      clearText = _props$clearText === void 0 ? 'Clear' : _props$clearText,\n      _props$closeIcon = props.closeIcon,\n      closeIcon = _props$closeIcon === void 0 ? _ref : _props$closeIcon,\n      _props$closeText = props.closeText,\n      closeText = _props$closeText === void 0 ? 'Close' : _props$closeText,\n      _props$debug = props.debug,\n      debug = _props$debug === void 0 ? false : _props$debug,\n      _props$defaultValue = props.defaultValue,\n      defaultValue = _props$defaultValue === void 0 ? props.multiple ? [] : null : _props$defaultValue,\n      _props$disableClearab = props.disableClearable,\n      disableClearable = _props$disableClearab === void 0 ? false : _props$disableClearab,\n      _props$disableCloseOn = props.disableCloseOnSelect,\n      disableCloseOnSelect = _props$disableCloseOn === void 0 ? false : _props$disableCloseOn,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disabledItemsF = props.disabledItemsFocusable,\n      disabledItemsFocusable = _props$disabledItemsF === void 0 ? false : _props$disabledItemsF,\n      _props$disableListWra = props.disableListWrap,\n      disableListWrap = _props$disableListWra === void 0 ? false : _props$disableListWra,\n      _props$disablePortal = props.disablePortal,\n      disablePortal = _props$disablePortal === void 0 ? false : _props$disablePortal,\n      filterOptions = props.filterOptions,\n      _props$filterSelected = props.filterSelectedOptions,\n      filterSelectedOptions = _props$filterSelected === void 0 ? false : _props$filterSelected,\n      _props$forcePopupIcon = props.forcePopupIcon,\n      forcePopupIcon = _props$forcePopupIcon === void 0 ? 'auto' : _props$forcePopupIcon,\n      _props$freeSolo = props.freeSolo,\n      freeSolo = _props$freeSolo === void 0 ? false : _props$freeSolo,\n      _props$fullWidth = props.fullWidth,\n      fullWidth = _props$fullWidth === void 0 ? false : _props$fullWidth,\n      _props$getLimitTagsTe = props.getLimitTagsText,\n      getLimitTagsText = _props$getLimitTagsTe === void 0 ? function (more) {\n    return \"+\".concat(more);\n  } : _props$getLimitTagsTe,\n      getOptionDisabled = props.getOptionDisabled,\n      _props$getOptionLabel = props.getOptionLabel,\n      getOptionLabel = _props$getOptionLabel === void 0 ? function (x) {\n    return x;\n  } : _props$getOptionLabel,\n      getOptionSelected = props.getOptionSelected,\n      groupBy = props.groupBy,\n      _props$handleHomeEndK = props.handleHomeEndKeys,\n      handleHomeEndKeys = _props$handleHomeEndK === void 0 ? !props.freeSolo : _props$handleHomeEndK,\n      idProp = props.id,\n      _props$includeInputIn = props.includeInputInList,\n      includeInputInList = _props$includeInputIn === void 0 ? false : _props$includeInputIn,\n      inputValueProp = props.inputValue,\n      _props$limitTags = props.limitTags,\n      limitTags = _props$limitTags === void 0 ? -1 : _props$limitTags,\n      _props$ListboxCompone = props.ListboxComponent,\n      ListboxComponent = _props$ListboxCompone === void 0 ? 'ul' : _props$ListboxCompone,\n      ListboxProps = props.ListboxProps,\n      _props$loading = props.loading,\n      loading = _props$loading === void 0 ? false : _props$loading,\n      _props$loadingText = props.loadingText,\n      loadingText = _props$loadingText === void 0 ? 'Loading…' : _props$loadingText,\n      _props$multiple = props.multiple,\n      multiple = _props$multiple === void 0 ? false : _props$multiple,\n      _props$noOptionsText = props.noOptionsText,\n      noOptionsText = _props$noOptionsText === void 0 ? 'No options' : _props$noOptionsText,\n      onChange = props.onChange,\n      onClose = props.onClose,\n      onHighlightChange = props.onHighlightChange,\n      onInputChange = props.onInputChange,\n      onOpen = props.onOpen,\n      open = props.open,\n      _props$openOnFocus = props.openOnFocus,\n      openOnFocus = _props$openOnFocus === void 0 ? false : _props$openOnFocus,\n      _props$openText = props.openText,\n      openText = _props$openText === void 0 ? 'Open' : _props$openText,\n      options = props.options,\n      _props$PaperComponent = props.PaperComponent,\n      PaperComponent = _props$PaperComponent === void 0 ? _Paper.default : _props$PaperComponent,\n      _props$PopperComponen = props.PopperComponent,\n      PopperComponentProp = _props$PopperComponen === void 0 ? _Popper.default : _props$PopperComponen,\n      _props$popupIcon = props.popupIcon,\n      popupIcon = _props$popupIcon === void 0 ? _ref2 : _props$popupIcon,\n      renderGroupProp = props.renderGroup,\n      renderInput = props.renderInput,\n      renderOptionProp = props.renderOption,\n      renderTags = props.renderTags,\n      _props$selectOnFocus = props.selectOnFocus,\n      selectOnFocus = _props$selectOnFocus === void 0 ? !props.freeSolo : _props$selectOnFocus,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      valueProp = props.value,\n      other = (0, _objectWithoutProperties2.default)(props, [\"autoComplete\", \"autoHighlight\", \"autoSelect\", \"blurOnSelect\", \"ChipProps\", \"classes\", \"className\", \"clearOnBlur\", \"clearOnEscape\", \"clearText\", \"closeIcon\", \"closeText\", \"debug\", \"defaultValue\", \"disableClearable\", \"disableCloseOnSelect\", \"disabled\", \"disabledItemsFocusable\", \"disableListWrap\", \"disablePortal\", \"filterOptions\", \"filterSelectedOptions\", \"forcePopupIcon\", \"freeSolo\", \"fullWidth\", \"getLimitTagsText\", \"getOptionDisabled\", \"getOptionLabel\", \"getOptionSelected\", \"groupBy\", \"handleHomeEndKeys\", \"id\", \"includeInputInList\", \"inputValue\", \"limitTags\", \"ListboxComponent\", \"ListboxProps\", \"loading\", \"loadingText\", \"multiple\", \"noOptionsText\", \"onChange\", \"onClose\", \"onHighlightChange\", \"onInputChange\", \"onOpen\", \"open\", \"openOnFocus\", \"openText\", \"options\", \"PaperComponent\", \"PopperComponent\", \"popupIcon\", \"renderGroup\", \"renderInput\", \"renderOption\", \"renderTags\", \"selectOnFocus\", \"size\", \"value\"]);\n  /* eslint-enable no-unused-vars */\n\n  var PopperComponent = disablePortal ? DisablePortal : PopperComponentProp;\n\n  var _useAutocomplete = (0, _useAutocomplete2.default)((0, _extends2.default)({}, props, {\n    componentName: 'Autocomplete'\n  })),\n      getRootProps = _useAutocomplete.getRootProps,\n      getInputProps = _useAutocomplete.getInputProps,\n      getInputLabelProps = _useAutocomplete.getInputLabelProps,\n      getPopupIndicatorProps = _useAutocomplete.getPopupIndicatorProps,\n      getClearProps = _useAutocomplete.getClearProps,\n      getTagProps = _useAutocomplete.getTagProps,\n      getListboxProps = _useAutocomplete.getListboxProps,\n      getOptionProps = _useAutocomplete.getOptionProps,\n      value = _useAutocomplete.value,\n      dirty = _useAutocomplete.dirty,\n      id = _useAutocomplete.id,\n      popupOpen = _useAutocomplete.popupOpen,\n      focused = _useAutocomplete.focused,\n      focusedTag = _useAutocomplete.focusedTag,\n      anchorEl = _useAutocomplete.anchorEl,\n      setAnchorEl = _useAutocomplete.setAnchorEl,\n      inputValue = _useAutocomplete.inputValue,\n      groupedOptions = _useAutocomplete.groupedOptions;\n\n  var startAdornment;\n\n  if (multiple && value.length > 0) {\n    var getCustomizedTagProps = function getCustomizedTagProps(params) {\n      return (0, _extends2.default)({\n        className: (0, _clsx.default)(classes.tag, size === 'small' && classes.tagSizeSmall),\n        disabled: disabled\n      }, getTagProps(params));\n    };\n\n    if (renderTags) {\n      startAdornment = renderTags(value, getCustomizedTagProps);\n    } else {\n      startAdornment = value.map(function (option, index) {\n        return /*#__PURE__*/React.createElement(_Chip.default, (0, _extends2.default)({\n          label: getOptionLabel(option),\n          size: size\n        }, getCustomizedTagProps({\n          index: index\n        }), ChipProps));\n      });\n    }\n  }\n\n  if (limitTags > -1 && Array.isArray(startAdornment)) {\n    var more = startAdornment.length - limitTags;\n\n    if (!focused && more > 0) {\n      startAdornment = startAdornment.splice(0, limitTags);\n      startAdornment.push( /*#__PURE__*/React.createElement(\"span\", {\n        className: classes.tag,\n        key: startAdornment.length\n      }, getLimitTagsText(more)));\n    }\n  }\n\n  var defaultRenderGroup = function defaultRenderGroup(params) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: params.key\n    }, /*#__PURE__*/React.createElement(_ListSubheader.default, {\n      className: classes.groupLabel,\n      component: \"div\"\n    }, params.group), /*#__PURE__*/React.createElement(\"ul\", {\n      className: classes.groupUl\n    }, params.children));\n  };\n\n  var renderGroup = renderGroupProp || defaultRenderGroup;\n  var renderOption = renderOptionProp || getOptionLabel;\n\n  var renderListOption = function renderListOption(option, index) {\n    var optionProps = getOptionProps({\n      option: option,\n      index: index\n    });\n    return /*#__PURE__*/React.createElement(\"li\", (0, _extends2.default)({}, optionProps, {\n      className: classes.option\n    }), renderOption(option, {\n      selected: optionProps['aria-selected'],\n      inputValue: inputValue\n    }));\n  };\n\n  var hasClearIcon = !disableClearable && !disabled;\n  var hasPopupIcon = (!freeSolo || forcePopupIcon === true) && forcePopupIcon !== false;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", (0, _extends2.default)({\n    ref: ref,\n    className: (0, _clsx.default)(classes.root, className, focused && classes.focused, fullWidth && classes.fullWidth, hasClearIcon && classes.hasClearIcon, hasPopupIcon && classes.hasPopupIcon)\n  }, getRootProps(other)), renderInput({\n    id: id,\n    disabled: disabled,\n    fullWidth: true,\n    size: size === 'small' ? 'small' : undefined,\n    InputLabelProps: getInputLabelProps(),\n    InputProps: {\n      ref: setAnchorEl,\n      className: classes.inputRoot,\n      startAdornment: startAdornment,\n      endAdornment: /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.endAdornment\n      }, hasClearIcon ? /*#__PURE__*/React.createElement(_IconButton.default, (0, _extends2.default)({}, getClearProps(), {\n        \"aria-label\": clearText,\n        title: clearText,\n        className: (0, _clsx.default)(classes.clearIndicator, dirty && classes.clearIndicatorDirty)\n      }), closeIcon) : null, hasPopupIcon ? /*#__PURE__*/React.createElement(_IconButton.default, (0, _extends2.default)({}, getPopupIndicatorProps(), {\n        disabled: disabled,\n        \"aria-label\": popupOpen ? closeText : openText,\n        title: popupOpen ? closeText : openText,\n        className: (0, _clsx.default)(classes.popupIndicator, popupOpen && classes.popupIndicatorOpen)\n      }), popupIcon) : null)\n    },\n    inputProps: (0, _extends2.default)({\n      className: (0, _clsx.default)(classes.input, focusedTag === -1 && classes.inputFocused),\n      disabled: disabled\n    }, getInputProps())\n  })), popupOpen && anchorEl ? /*#__PURE__*/React.createElement(PopperComponent, {\n    className: (0, _clsx.default)(classes.popper, disablePortal && classes.popperDisablePortal),\n    style: {\n      width: anchorEl ? anchorEl.clientWidth : null\n    },\n    role: \"presentation\",\n    anchorEl: anchorEl,\n    open: true\n  }, /*#__PURE__*/React.createElement(PaperComponent, {\n    className: classes.paper\n  }, loading && groupedOptions.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.loading\n  }, loadingText) : null, groupedOptions.length === 0 && !freeSolo && !loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.noOptions\n  }, noOptionsText) : null, groupedOptions.length > 0 ? /*#__PURE__*/React.createElement(ListboxComponent, (0, _extends2.default)({\n    className: classes.listbox\n  }, getListboxProps(), ListboxProps), groupedOptions.map(function (option, index) {\n    if (groupBy) {\n      return renderGroup({\n        key: option.key,\n        group: option.group,\n        children: option.options.map(function (option2, index2) {\n          return renderListOption(option2, option.index + index2);\n        })\n      });\n    }\n\n    return renderListOption(option, index);\n  })) : null)) : null);\n});\nprocess.env.NODE_ENV !== \"production\" ? Autocomplete.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * If `true`, the portion of the selected suggestion that has not been typed by the user,\n   * known as the completion string, appears inline after the input cursor in the textbox.\n   * The inline completion string is visually highlighted and has a selected state.\n   */\n  autoComplete: _propTypes.default.bool,\n\n  /**\n   * If `true`, the first option is automatically highlighted.\n   */\n  autoHighlight: _propTypes.default.bool,\n\n  /**\n   * If `true`, the selected option becomes the value of the input\n   * when the Autocomplete loses focus unless the user chooses\n   * a different option or changes the character string in the input.\n   */\n  autoSelect: _propTypes.default.bool,\n\n  /**\n   * Control if the input should be blurred when an option is selected:\n   *\n   * - `false` the input is not blurred.\n   * - `true` the input is always blurred.\n   * - `touch` the input is blurred after a touch event.\n   * - `mouse` the input is blurred after a mouse event.\n   */\n  blurOnSelect: _propTypes.default.oneOfType([_propTypes.default.oneOf(['mouse', 'touch']), _propTypes.default.bool]),\n\n  /**\n   * Props applied to the [`Chip`](/api/chip/) element.\n   */\n  ChipProps: _propTypes.default.object,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: _propTypes.default.object,\n\n  /**\n   * @ignore\n   */\n  className: _propTypes.default.string,\n\n  /**\n   * If `true`, the input's text will be cleared on blur if no value is selected.\n   *\n   * Set to `true` if you want to help the user enter a new value.\n   * Set to `false` if you want to help the user resume his search.\n   */\n  clearOnBlur: _propTypes.default.bool,\n\n  /**\n   * If `true`, clear all values when the user presses escape and the popup is closed.\n   */\n  clearOnEscape: _propTypes.default.bool,\n\n  /**\n   * Override the default text for the *clear* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  clearText: _propTypes.default.string,\n\n  /**\n   * The icon to display in place of the default close icon.\n   */\n  closeIcon: _propTypes.default.node,\n\n  /**\n   * Override the default text for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: _propTypes.default.string,\n\n  /**\n   * If `true`, the popup will ignore the blur event if the input is filled.\n   * You can inspect the popup markup with your browser tools.\n   * Consider this option when you need to customize the component.\n   */\n  debug: _propTypes.default.bool,\n\n  /**\n   * The default input value. Use when the component is not controlled.\n   */\n  defaultValue: _propTypes.default.any,\n\n  /**\n   * If `true`, the input can't be cleared.\n   */\n  disableClearable: _propTypes.default\n  /* @typescript-to-proptypes-ignore */\n  .bool,\n\n  /**\n   * If `true`, the popup won't close when a value is selected.\n   */\n  disableCloseOnSelect: _propTypes.default.bool,\n\n  /**\n   * If `true`, the input will be disabled.\n   */\n  disabled: _propTypes.default.bool,\n\n  /**\n   * If `true`, will allow focus on disabled items.\n   */\n  disabledItemsFocusable: _propTypes.default.bool,\n\n  /**\n   * If `true`, the list box in the popup will not wrap focus.\n   */\n  disableListWrap: _propTypes.default.bool,\n\n  /**\n   * Disable the portal behavior.\n   * The children stay within it's parent DOM hierarchy.\n   */\n  disablePortal: _propTypes.default.bool,\n\n  /**\n   * A filter function that determines the options that are eligible.\n   *\n   * @param {T[]} options The options to render.\n   * @param {object} state The state of the component.\n   * @returns {T[]}\n   */\n  filterOptions: _propTypes.default.func,\n\n  /**\n   * If `true`, hide the selected options from the list box.\n   */\n  filterSelectedOptions: _propTypes.default.bool,\n\n  /**\n   * Force the visibility display of the popup icon.\n   */\n  forcePopupIcon: _propTypes.default.oneOfType([_propTypes.default.oneOf(['auto']), _propTypes.default.bool]),\n\n  /**\n   * If `true`, the Autocomplete is free solo, meaning that the user input is not bound to provided options.\n   */\n  freeSolo: _propTypes.default\n  /* @typescript-to-proptypes-ignore */\n  .bool,\n\n  /**\n   * If `true`, the input will take up the full width of its container.\n   */\n  fullWidth: _propTypes.default.bool,\n\n  /**\n   * The label to display when the tags are truncated (`limitTags`).\n   *\n   * @param {number} more The number of truncated tags.\n   * @returns {ReactNode}\n   */\n  getLimitTagsText: _propTypes.default.func,\n\n  /**\n   * Used to determine the disabled state for a given option.\n   *\n   * @param {T} option The option to test.\n   * @returns {boolean}\n   */\n  getOptionDisabled: _propTypes.default.func,\n\n  /**\n   * Used to determine the string value for a given option.\n   * It's used to fill the input (and the list box options if `renderOption` is not provided).\n   *\n   * @param {T} option\n   * @returns {string}\n   */\n  getOptionLabel: _propTypes.default.func,\n\n  /**\n   * Used to determine if an option is selected, considering the current value.\n   * Uses strict equality by default.\n   *\n   * @param {T} option The option to test.\n   * @param {T} value The value to test against.\n   * @returns {boolean}\n   */\n  getOptionSelected: _propTypes.default.func,\n\n  /**\n   * If provided, the options will be grouped under the returned string.\n   * The groupBy value is also used as the text for group headings when `renderGroup` is not provided.\n   *\n   * @param {T} options The options to group.\n   * @returns {string}\n   */\n  groupBy: _propTypes.default.func,\n\n  /**\n   * If `true`, the component handles the \"Home\" and \"End\" keys when the popup is open.\n   * It should move focus to the first option and last option, respectively.\n   */\n  handleHomeEndKeys: _propTypes.default.bool,\n\n  /**\n   * This prop is used to help implement the accessibility logic.\n   * If you don't provide this prop. It falls back to a randomly generated id.\n   */\n  id: _propTypes.default.string,\n\n  /**\n   * If `true`, the highlight can move to the input.\n   */\n  includeInputInList: _propTypes.default.bool,\n\n  /**\n   * The input value.\n   */\n  inputValue: _propTypes.default.string,\n\n  /**\n   * The maximum number of tags that will be visible when not focused.\n   * Set `-1` to disable the limit.\n   */\n  limitTags: _propTypes.default.number,\n\n  /**\n   * The component used to render the listbox.\n   */\n  ListboxComponent: _propTypes.default.elementType,\n\n  /**\n   * Props applied to the Listbox element.\n   */\n  ListboxProps: _propTypes.default.object,\n\n  /**\n   * If `true`, the component is in a loading state.\n   */\n  loading: _propTypes.default.bool,\n\n  /**\n   * Text to display when in a loading state.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  loadingText: _propTypes.default.node,\n\n  /**\n   * If `true`, `value` must be an array and the menu will support multiple selections.\n   */\n  multiple: _propTypes.default\n  /* @typescript-to-proptypes-ignore */\n  .bool,\n\n  /**\n   * Text to display when there are no options.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  noOptionsText: _propTypes.default.node,\n\n  /**\n   * Callback fired when the value changes.\n   *\n   * @param {object} event The event source of the callback.\n   * @param {T|T[]} value The new value of the component.\n   * @param {string} reason One of \"create-option\", \"select-option\", \"remove-option\", \"blur\" or \"clear\".\n   */\n  onChange: _propTypes.default.func,\n\n  /**\n   * Callback fired when the popup requests to be closed.\n   * Use in controlled mode (see open).\n   *\n   * @param {object} event The event source of the callback.\n   * @param {string} reason Can be: `\"toggleInput\"`, `\"escape\"`, `\"select-option\"`, `\"blur\"`.\n   */\n  onClose: _propTypes.default.func,\n\n  /**\n   * Callback fired when the highlight option changes.\n   *\n   * @param {object} event The event source of the callback.\n   * @param {T} option The highlighted option.\n   * @param {string} reason Can be: `\"keyboard\"`, `\"auto\"`, `\"mouse\"`.\n   */\n  onHighlightChange: _propTypes.default.func,\n\n  /**\n   * Callback fired when the input value changes.\n   *\n   * @param {object} event The event source of the callback.\n   * @param {string} value The new value of the text input.\n   * @param {string} reason Can be: `\"input\"` (user input), `\"reset\"` (programmatic change), `\"clear\"`.\n   */\n  onInputChange: _propTypes.default.func,\n\n  /**\n   * Callback fired when the popup requests to be opened.\n   * Use in controlled mode (see open).\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onOpen: _propTypes.default.func,\n\n  /**\n   * Control the popup` open state.\n   */\n  open: _propTypes.default.bool,\n\n  /**\n   * If `true`, the popup will open on input focus.\n   */\n  openOnFocus: _propTypes.default.bool,\n\n  /**\n   * Override the default text for the *open popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  openText: _propTypes.default.string,\n\n  /**\n   * Array of options.\n   */\n  options: _propTypes.default.array.isRequired,\n\n  /**\n   * The component used to render the body of the popup.\n   */\n  PaperComponent: _propTypes.default.elementType,\n\n  /**\n   * The component used to position the popup.\n   */\n  PopperComponent: _propTypes.default.elementType,\n\n  /**\n   * The icon to display in place of the default popup icon.\n   */\n  popupIcon: _propTypes.default.node,\n\n  /**\n   * Render the group.\n   *\n   * @param {any} option The group to render.\n   * @returns {ReactNode}\n   */\n  renderGroup: _propTypes.default.func,\n\n  /**\n   * Render the input.\n   *\n   * @param {object} params\n   * @returns {ReactNode}\n   */\n  renderInput: _propTypes.default.func.isRequired,\n\n  /**\n   * Render the option, use `getOptionLabel` by default.\n   *\n   * @param {T} option The option to render.\n   * @param {object} state The state of the component.\n   * @returns {ReactNode}\n   */\n  renderOption: _propTypes.default.func,\n\n  /**\n   * Render the selected value.\n   *\n   * @param {T[]} value The `value` provided to the component.\n   * @param {function} getTagProps A tag props getter.\n   * @returns {ReactNode}\n   */\n  renderTags: _propTypes.default.func,\n\n  /**\n   * If `true`, the input's text will be selected on focus.\n   * It helps the user clear the selected value.\n   */\n  selectOnFocus: _propTypes.default.bool,\n\n  /**\n   * The size of the autocomplete.\n   */\n  size: _propTypes.default.oneOf(['medium', 'small']),\n\n  /**\n   * The value of the autocomplete.\n   *\n   * The value must have reference equality with the option in order to be selected.\n   * You can customize the equality behavior with the `getOptionSelected` prop.\n   */\n  value: _propTypes.default.any\n} : void 0;\n\nvar _default = (0, _styles.withStyles)(styles, {\n  name: 'MuiAutocomplete'\n})(Autocomplete);\n\nexports.default = _default;","export { default, createFilterOptions } from './useAutocomplete';","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"@material-ui/core/utils\");\n\n/**\n * @ignore - internal component.\n */\nvar _default = (0, _utils.createSvgIcon)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"@material-ui/core/utils\");\n\n/**\n * @ignore - internal component.\n */\nvar _default = (0, _utils.createSvgIcon)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 10l5 5 5-5z\"\n}), 'ArrowDropDown');\n\nexports.default = _default;","/* eslint-disable no-restricted-properties */\nconst bytesToSize = (bytes, decimals = 2) => {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n\nexport default bytesToSize;\n","import React, {\n  useState,\n  useCallback\n} from 'react';\nimport clsx from 'clsx';\nimport { useDropzone } from 'react-dropzone';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport PropTypes from 'prop-types';\nimport {\n  Box,\n  Button,\n  IconButton,\n  Link,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport bytesToSize from 'src/utils/bytesToSize';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  dropZone: {\n    border: `1px dashed ${theme.palette.divider}`,\n    padding: theme.spacing(6),\n    outline: 'none',\n    display: 'flex',\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    '&:hover': {\n      backgroundColor: theme.palette.action.hover,\n      opacity: 0.5,\n      cursor: 'pointer'\n    }\n  },\n  dragActive: {\n    backgroundColor: theme.palette.action.active,\n    opacity: 0.5\n  },\n  image: {\n    width: 130\n  },\n  info: {\n    marginTop: theme.spacing(1)\n  },\n  list: {\n    maxHeight: 320\n  },\n  actions: {\n    marginTop: theme.spacing(2),\n    display: 'flex',\n    justifyContent: 'flex-end',\n    '& > * + *': {\n      marginLeft: theme.spacing(2)\n    }\n  }\n}));\n\nconst FilesDropzone = ({ className,handleDrop,files,handleRemoveAll, ...rest }) => {\n  const classes = useStyles();\n  // const [files, setFiles] = useState([]);\n\n  // const handleDrop = useCallback((acceptedFiles) => {\n  //   setFiles((prevFiles) => [...prevFiles].concat(acceptedFiles));\n  //   console.log(\"con\");\n  // }, []);\n\n  // const handleRemoveAll = () => {\n  //   setFiles([]);\n  // };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop: handleDrop\n  });\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <div\n        className={clsx({\n          [classes.dropZone]: true,\n          [classes.dragActive]: isDragActive\n        })}\n        {...getRootProps()}\n      >\n        <input {...getInputProps()} />\n        <div>\n          <img\n            alt=\"Select file\"\n            className={classes.image}\n            src=\"/static/images/undraw_add_file2_gvbb.svg\"\n          />\n        </div>\n        <div>\n          <Typography\n            gutterBottom\n            variant=\"h3\"\n          >\n           Tải file lên\n          </Typography>\n          <Box mt={2}>\n            <Typography\n              color=\"textPrimary\"\n              variant=\"body1\"\n            >\n              Bằng cách kéo thả hoặc click \n              {' '}\n              <Link underline=\"always\">vào đây</Link>\n              {' '}\n              để chọn file trên máy của bạn\n            </Typography>\n          </Box>\n        </div>\n      </div>\n      {files.length > 0 && (\n        <>\n          <PerfectScrollbar options={{ suppressScrollX: true }}>\n            <List className={classes.list}>\n              {files.map((file, i) => (\n                <ListItem\n                  divider={i < files.length - 1}\n                  key={i}\n                >\n                  <ListItemIcon>\n                    <FileCopyIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={file.name}\n                    primaryTypographyProps={{ variant: 'h5' }}\n                    secondary={bytesToSize(file.size)}\n                  />\n                  <Tooltip title=\"More options\">\n                    <IconButton edge=\"end\">\n                      <MoreIcon />\n                    </IconButton>\n                  </Tooltip>\n                </ListItem>\n              ))}\n            </List>\n          </PerfectScrollbar>\n          <div className={classes.actions}>\n            <Button\n              onClick={handleRemoveAll}\n              size=\"small\"\n            >\n              Remove all\n            </Button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nFilesDropzone.propTypes = {\n  className: PropTypes.string\n};\n\nexport default FilesDropzone;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z\"\n}), 'FileCopy');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n}), 'MoreVert');\n\nexports.default = _default;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export var COMMON_MIME_TYPES = new Map([\n    ['avi', 'video/avi'],\n    ['gif', 'image/gif'],\n    ['ico', 'image/x-icon'],\n    ['jpeg', 'image/jpeg'],\n    ['jpg', 'image/jpeg'],\n    ['mkv', 'video/x-matroska'],\n    ['mov', 'video/quicktime'],\n    ['mp4', 'video/mp4'],\n    ['pdf', 'application/pdf'],\n    ['png', 'image/png'],\n    ['zip', 'application/zip'],\n    ['doc', 'application/msword'],\n    ['docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']\n]);\nexport function toFileWithPath(file, path) {\n    var f = withMimeType(file);\n    if (typeof f.path !== 'string') { // on electron, path is already set to the absolute path\n        var webkitRelativePath = file.webkitRelativePath;\n        Object.defineProperty(f, 'path', {\n            value: typeof path === 'string'\n                ? path\n                // If <input webkitdirectory> is set,\n                // the File will have a {webkitRelativePath} property\n                // https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/webkitdirectory\n                : typeof webkitRelativePath === 'string' && webkitRelativePath.length > 0\n                    ? webkitRelativePath\n                    : file.name,\n            writable: false,\n            configurable: false,\n            enumerable: true\n        });\n    }\n    return f;\n}\nfunction withMimeType(file) {\n    var name = file.name;\n    var hasExtension = name && name.lastIndexOf('.') !== -1;\n    if (hasExtension && !file.type) {\n        var ext = name.split('.')\n            .pop().toLowerCase();\n        var type = COMMON_MIME_TYPES.get(ext);\n        if (type) {\n            Object.defineProperty(file, 'type', {\n                value: type,\n                writable: false,\n                configurable: false,\n                enumerable: true\n            });\n        }\n    }\n    return file;\n}\n//# sourceMappingURL=file.js.map","import * as tslib_1 from \"tslib\";\nimport { toFileWithPath } from './file';\nvar FILES_TO_IGNORE = [\n    // Thumbnail cache files for macOS and Windows\n    '.DS_Store',\n    'Thumbs.db' // Windows\n];\n/**\n * Convert a DragEvent's DataTrasfer object to a list of File objects\n * NOTE: If some of the items are folders,\n * everything will be flattened and placed in the same list but the paths will be kept as a {path} property.\n * @param evt\n */\nexport function fromEvent(evt) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            return [2 /*return*/, isDragEvt(evt) && evt.dataTransfer\n                    ? getDataTransferFiles(evt.dataTransfer, evt.type)\n                    : getInputFiles(evt)];\n        });\n    });\n}\nfunction isDragEvt(value) {\n    return !!value.dataTransfer;\n}\nfunction getInputFiles(evt) {\n    var files = isInput(evt.target)\n        ? evt.target.files\n            ? fromList(evt.target.files)\n            : []\n        : [];\n    return files.map(function (file) { return toFileWithPath(file); });\n}\nfunction isInput(value) {\n    return value !== null;\n}\nfunction getDataTransferFiles(dt, type) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var items, files;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!dt.items) return [3 /*break*/, 2];\n                    items = fromList(dt.items)\n                        .filter(function (item) { return item.kind === 'file'; });\n                    // According to https://html.spec.whatwg.org/multipage/dnd.html#dndevents,\n                    // only 'dragstart' and 'drop' has access to the data (source node)\n                    if (type !== 'drop') {\n                        return [2 /*return*/, items];\n                    }\n                    return [4 /*yield*/, Promise.all(items.map(toFilePromises))];\n                case 1:\n                    files = _a.sent();\n                    return [2 /*return*/, noIgnoredFiles(flatten(files))];\n                case 2: return [2 /*return*/, noIgnoredFiles(fromList(dt.files)\n                        .map(function (file) { return toFileWithPath(file); }))];\n            }\n        });\n    });\n}\nfunction noIgnoredFiles(files) {\n    return files.filter(function (file) { return FILES_TO_IGNORE.indexOf(file.name) === -1; });\n}\n// IE11 does not support Array.from()\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Browser_compatibility\n// https://developer.mozilla.org/en-US/docs/Web/API/FileList\n// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItemList\nfunction fromList(items) {\n    var files = [];\n    // tslint:disable: prefer-for-of\n    for (var i = 0; i < items.length; i++) {\n        var file = items[i];\n        files.push(file);\n    }\n    return files;\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem\nfunction toFilePromises(item) {\n    if (typeof item.webkitGetAsEntry !== 'function') {\n        return fromDataTransferItem(item);\n    }\n    var entry = item.webkitGetAsEntry();\n    // Safari supports dropping an image node from a different window and can be retrieved using\n    // the DataTransferItem.getAsFile() API\n    // NOTE: FileSystemEntry.file() throws if trying to get the file\n    if (entry && entry.isDirectory) {\n        return fromDirEntry(entry);\n    }\n    return fromDataTransferItem(item);\n}\nfunction flatten(items) {\n    return items.reduce(function (acc, files) { return tslib_1.__spread(acc, (Array.isArray(files) ? flatten(files) : [files])); }, []);\n}\nfunction fromDataTransferItem(item) {\n    var file = item.getAsFile();\n    if (!file) {\n        return Promise.reject(item + \" is not a File\");\n    }\n    var fwp = toFileWithPath(file);\n    return Promise.resolve(fwp);\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemEntry\nfunction fromEntry(entry) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            return [2 /*return*/, entry.isDirectory ? fromDirEntry(entry) : fromFileEntry(entry)];\n        });\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry\nfunction fromDirEntry(entry) {\n    var reader = entry.createReader();\n    return new Promise(function (resolve, reject) {\n        var entries = [];\n        function readEntries() {\n            var _this = this;\n            // https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry/createReader\n            // https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryReader/readEntries\n            reader.readEntries(function (batch) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var files, err_1, items;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!!batch.length) return [3 /*break*/, 5];\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, 3, , 4]);\n                            return [4 /*yield*/, Promise.all(entries)];\n                        case 2:\n                            files = _a.sent();\n                            resolve(files);\n                            return [3 /*break*/, 4];\n                        case 3:\n                            err_1 = _a.sent();\n                            reject(err_1);\n                            return [3 /*break*/, 4];\n                        case 4: return [3 /*break*/, 6];\n                        case 5:\n                            items = Promise.all(batch.map(fromEntry));\n                            entries.push(items);\n                            // Continue reading\n                            readEntries();\n                            _a.label = 6;\n                        case 6: return [2 /*return*/];\n                    }\n                });\n            }); }, function (err) {\n                reject(err);\n            });\n        }\n        readEntries();\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileEntry\nfunction fromFileEntry(entry) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    entry.file(function (file) {\n                        var fwp = toFileWithPath(file, entry.fullPath);\n                        resolve(fwp);\n                    }, function (err) {\n                        reject(err);\n                    });\n                })];\n        });\n    });\n}\n//# sourceMappingURL=file-selector.js.map","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport accepts from 'attr-accept'; // Firefox versions prior to 53 return a bogus MIME type for every file drag, so dragovers with\n// that MIME type will always be accepted\n\nexport function fileAccepted(file, accept) {\n  return file.type === 'application/x-moz-file' || accepts(file, accept);\n}\nexport function fileMatchSize(file, minSize, maxSize) {\n  if (isDefined(file.size)) {\n    if (isDefined(minSize) && isDefined(maxSize)) return file.size >= minSize && file.size <= maxSize;else if (isDefined(minSize)) return file.size >= minSize;else if (isDefined(maxSize)) return file.size <= maxSize;\n  }\n\n  return true;\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null;\n}\n\nexport function allFilesAccepted(_ref) {\n  var files = _ref.files,\n      accept = _ref.accept,\n      minSize = _ref.minSize,\n      maxSize = _ref.maxSize,\n      multiple = _ref.multiple;\n\n  if (!multiple && files.length > 1) {\n    return false;\n  }\n\n  return files.every(function (file) {\n    return fileAccepted(file, accept) && fileMatchSize(file, minSize, maxSize);\n  });\n} // React's synthetic events has event.isPropagationStopped,\n// but to remain compatibility with other libs (Preact) fall back\n// to check event.cancelBubble\n\nexport function isPropagationStopped(event) {\n  if (typeof event.isPropagationStopped === 'function') {\n    return event.isPropagationStopped();\n  } else if (typeof event.cancelBubble !== 'undefined') {\n    return event.cancelBubble;\n  }\n\n  return false;\n}\nexport function isEvtWithFiles(event) {\n  if (!event.dataTransfer) {\n    return !!event.target && !!event.target.files;\n  } // https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/types\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#file\n\n\n  return Array.prototype.some.call(event.dataTransfer.types, function (type) {\n    return type === 'Files' || type === 'application/x-moz-file';\n  });\n}\nexport function isKindFile(item) {\n  return _typeof(item) === 'object' && item !== null && item.kind === 'file';\n} // allow the entire document to be a drag target\n\nexport function onDocumentDragOver(event) {\n  event.preventDefault();\n}\n\nfunction isIe(userAgent) {\n  return userAgent.indexOf('MSIE') !== -1 || userAgent.indexOf('Trident/') !== -1;\n}\n\nfunction isEdge(userAgent) {\n  return userAgent.indexOf('Edge/') !== -1;\n}\n\nexport function isIeOrEdge() {\n  var userAgent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;\n  return isIe(userAgent) || isEdge(userAgent);\n}\n/**\n * This is intended to be used to compose event handlers\n * They are executed in order until one of them calls `event.isPropagationStopped()`.\n * Note that the check is done on the first invoke too,\n * meaning that if propagation was stopped before invoking the fns,\n * no handlers will be executed.\n *\n * @param {Function} fns the event hanlder functions\n * @return {Function} the event handler to add to an element\n */\n\nexport function composeEventHandlers() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (event) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    return fns.some(function (fn) {\n      if (!isPropagationStopped(event) && fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return isPropagationStopped(event);\n    });\n  };\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* eslint prefer-template: 0 */\nimport React, { forwardRef, Fragment, useCallback, useEffect, useImperativeHandle, useMemo, useReducer, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { fromEvent } from 'file-selector';\nimport { allFilesAccepted, composeEventHandlers, fileAccepted, fileMatchSize, isEvtWithFiles, isIeOrEdge, isPropagationStopped, onDocumentDragOver } from './utils/index';\n/**\n * Convenience wrapper component for the `useDropzone` hook\n *\n * ```jsx\n * <Dropzone>\n *   {({getRootProps, getInputProps}) => (\n *     <div {...getRootProps()}>\n *       <input {...getInputProps()} />\n *       <p>Drag 'n' drop some files here, or click to select files</p>\n *     </div>\n *   )}\n * </Dropzone>\n * ```\n */\n\nvar Dropzone = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      params = _objectWithoutProperties(_ref, [\"children\"]);\n\n  var _useDropzone = useDropzone(params),\n      open = _useDropzone.open,\n      props = _objectWithoutProperties(_useDropzone, [\"open\"]);\n\n  useImperativeHandle(ref, function () {\n    return {\n      open: open\n    };\n  }, [open]); // TODO: Figure out why react-styleguidist cannot create docs if we don't return a jsx element\n\n  return React.createElement(Fragment, null, children(_objectSpread({}, props, {\n    open: open\n  })));\n});\nDropzone.displayName = 'Dropzone';\nDropzone.propTypes = {\n  /**\n   * Render function that exposes the dropzone state and prop getter fns\n   *\n   * @param {object} params\n   * @param {Function} params.getRootProps Returns the props you should apply to the root drop container you render\n   * @param {Function} params.getInputProps Returns the props you should apply to hidden file input you render\n   * @param {Function} params.open Open the native file selection dialog\n   * @param {boolean} params.isFocused Dropzone area is in focus\n   * @param {boolean} params.isFileDialogActive File dialog is opened\n   * @param {boolean} params.isDragActive Active drag is in progress\n   * @param {boolean} params.isDragAccept Dragged files are accepted\n   * @param {boolean} params.isDragReject Some dragged files are rejected\n   * @param {File[]} params.draggedFiles Files in active drag\n   * @param {File[]} params.acceptedFiles Accepted files\n   * @param {File[]} params.rejectedFiles Rejected files\n   */\n  children: PropTypes.func,\n\n  /**\n   * Set accepted file types.\n   * See https://github.com/okonet/attr-accept for more information.\n   * Keep in mind that mime type determination is not reliable across platforms. CSV files,\n   * for example, are reported as text/plain under macOS but as application/vnd.ms-excel under\n   * Windows. In some cases there might not be a mime type set at all.\n   * See: https://github.com/react-dropzone/react-dropzone/issues/276\n   */\n  accept: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n\n  /**\n   * Allow drag 'n' drop (or selection from the file dialog) of multiple files\n   */\n  multiple: PropTypes.bool,\n\n  /**\n   * If false, allow dropped items to take over the current browser window\n   */\n  preventDropOnDocument: PropTypes.bool,\n\n  /**\n   * If true, disables click to open the native file selection dialog\n   */\n  noClick: PropTypes.bool,\n\n  /**\n   * If true, disables SPACE/ENTER to open the native file selection dialog.\n   * Note that it also stops tracking the focus state.\n   */\n  noKeyboard: PropTypes.bool,\n\n  /**\n   * If true, disables drag 'n' drop\n   */\n  noDrag: PropTypes.bool,\n\n  /**\n   * If true, stops drag event propagation to parents\n   */\n  noDragEventsBubbling: PropTypes.bool,\n\n  /**\n   * Minimum file size (in bytes)\n   */\n  minSize: PropTypes.number,\n\n  /**\n   * Maximum file size (in bytes)\n   */\n  maxSize: PropTypes.number,\n\n  /**\n   * Enable/disable the dropzone\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Use this to provide a custom file aggregator\n   *\n   * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n   */\n  getFilesFromEvent: PropTypes.func,\n\n  /**\n   * Cb for when closing the file dialog with no selection\n   */\n  onFileDialogCancel: PropTypes.func,\n\n  /**\n   * Cb for when the `dragenter` event occurs.\n   *\n   * @param {DragEvent} event\n   */\n  onDragEnter: PropTypes.func,\n\n  /**\n   * Cb for when the `dragleave` event occurs\n   *\n   * @param {DragEvent} event\n   */\n  onDragLeave: PropTypes.func,\n\n  /**\n   * Cb for when the `dragover` event occurs\n   *\n   * @param {DragEvent} event\n   */\n  onDragOver: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that this callback is invoked after the `getFilesFromEvent` callback is done.\n   *\n   * Files are accepted or rejected based on the `accept`, `multiple`, `minSize` and `maxSize` props.\n   * `accept` must be a valid [MIME type](http://www.iana.org/assignments/media-types/media-types.xhtml) according to [input element specification](https://www.w3.org/wiki/HTML/Elements/input/file) or a valid file extension.\n   * If `multiple` is set to false and additional files are droppped,\n   * all files besides the first will be rejected.\n   * Any file which does not have a size in the [`minSize`, `maxSize`] range, will be rejected as well.\n   *\n   * Note that the `onDrop` callback will always be invoked regardless if the dropped files were accepted or rejected.\n   * If you'd like to react to a specific scenario, use the `onDropAccepted`/`onDropRejected` props.\n   *\n   * `onDrop` will provide you with an array of [File](https://developer.mozilla.org/en-US/docs/Web/API/File) objects which you can then process and send to a server.\n   * For example, with [SuperAgent](https://github.com/visionmedia/superagent) as a http/ajax library:\n   *\n   * ```js\n   * function onDrop(acceptedFiles) {\n   *   const req = request.post('/upload')\n   *   acceptedFiles.forEach(file => {\n   *     req.attach(file.name, file)\n   *   })\n   *   req.end(callback)\n   * }\n   * ```\n   *\n   * @param {File[]} acceptedFiles\n   * @param {File[]} rejectedFiles\n   * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n   */\n  onDrop: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that if no files are accepted, this callback is not invoked.\n   *\n   * @param {File[]} files\n   * @param {(DragEvent|Event)} event\n   */\n  onDropAccepted: PropTypes.func,\n\n  /**\n   * Cb for when the `drop` event occurs.\n   * Note that if no files are rejected, this callback is not invoked.\n   *\n   * @param {object[]} files\n   * @param {(DragEvent|Event)} event\n   */\n  onDropRejected: PropTypes.func\n};\nexport default Dropzone;\n/**\n * A function that is invoked for the `dragenter`,\n * `dragover` and `dragleave` events.\n * It is not invoked if the items are not files (such as link, text, etc.).\n *\n * @callback dragCb\n * @param {DragEvent} event\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n * It is not invoked if the items are not files (such as link, text, etc.).\n *\n * @callback dropCb\n * @param {File[]} acceptedFiles List of accepted files\n * @param {File[]} rejectedFiles List of rejected files\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n * It is not invoked if the items are files (such as link, text, etc.).\n *\n * @callback dropAcceptedCb\n * @param {File[]} files List of accepted files that meet the given criteria\n * (`accept`, `multiple`, `minSize`, `maxSize`)\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is invoked for the `drop` or input change event.\n *\n * @callback dropRejectedCb\n * @param {File[]} files List of rejected files that do not meet the given criteria\n * (`accept`, `multiple`, `minSize`, `maxSize`)\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n */\n\n/**\n * A function that is used aggregate files,\n * in a asynchronous fashion, from drag or input change events.\n *\n * @callback getFilesFromEvent\n * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)\n * @returns {(File[]|Promise<File[]>)}\n */\n\n/**\n * An object with the current dropzone state and some helper functions.\n *\n * @typedef {object} DropzoneState\n * @property {Function} getRootProps Returns the props you should apply to the root drop container you render\n * @property {Function} getInputProps Returns the props you should apply to hidden file input you render\n * @property {Function} open Open the native file selection dialog\n * @property {boolean} isFocused Dropzone area is in focus\n * @property {boolean} isFileDialogActive File dialog is opened\n * @property {boolean} isDragActive Active drag is in progress\n * @property {boolean} isDragAccept Dragged files are accepted\n * @property {boolean} isDragReject Some dragged files are rejected\n * @property {File[]} draggedFiles Files in active drag\n * @property {File[]} acceptedFiles Accepted files\n * @property {File[]} rejectedFiles Rejected files\n */\n\nvar initialState = {\n  isFocused: false,\n  isFileDialogActive: false,\n  isDragActive: false,\n  isDragAccept: false,\n  isDragReject: false,\n  draggedFiles: [],\n  acceptedFiles: [],\n  rejectedFiles: []\n};\n/**\n * A React hook that creates a drag 'n' drop area.\n *\n * ```jsx\n * function MyDropzone(props) {\n *   const {getRootProps, getInputProps} = useDropzone({\n *     onDrop: acceptedFiles => {\n *       // do something with the File objects, e.g. upload to some server\n *     }\n *   });\n *   return (\n *     <div {...getRootProps()}>\n *       <input {...getInputProps()} />\n *       <p>Drag and drop some files here, or click to select files</p>\n *     </div>\n *   )\n * }\n * ```\n *\n * @function useDropzone\n *\n * @param {object} props\n * @param {string|string[]} [props.accept] Set accepted file types.\n * See https://github.com/okonet/attr-accept for more information.\n * Keep in mind that mime type determination is not reliable across platforms. CSV files,\n * for example, are reported as text/plain under macOS but as application/vnd.ms-excel under\n * Windows. In some cases there might not be a mime type set at all.\n * See: https://github.com/react-dropzone/react-dropzone/issues/276\n * @param {boolean} [props.multiple=true] Allow drag 'n' drop (or selection from the file dialog) of multiple files\n * @param {boolean} [props.preventDropOnDocument=true] If false, allow dropped items to take over the current browser window\n * @param {boolean} [props.noClick=false] If true, disables click to open the native file selection dialog\n * @param {boolean} [props.noKeyboard=false] If true, disables SPACE/ENTER to open the native file selection dialog.\n * Note that it also stops tracking the focus state.\n * @param {boolean} [props.noDrag=false] If true, disables drag 'n' drop\n * @param {boolean} [props.noDragEventsBubbling=false] If true, stops drag event propagation to parents\n * @param {number} [props.minSize=0] Minimum file size (in bytes)\n * @param {number} [props.maxSize=Infinity] Maximum file size (in bytes)\n * @param {boolean} [props.disabled=false] Enable/disable the dropzone\n * @param {getFilesFromEvent} [props.getFilesFromEvent] Use this to provide a custom file aggregator\n * @param {Function} [props.onFileDialogCancel] Cb for when closing the file dialog with no selection\n * @param {dragCb} [props.onDragEnter] Cb for when the `dragenter` event occurs.\n * @param {dragCb} [props.onDragLeave] Cb for when the `dragleave` event occurs\n * @param {dragCb} [props.onDragOver] Cb for when the `dragover` event occurs\n * @param {dropCb} [props.onDrop] Cb for when the `drop` event occurs.\n * Note that this callback is invoked after the `getFilesFromEvent` callback is done.\n *\n * Files are accepted or rejected based on the `accept`, `multiple`, `minSize` and `maxSize` props.\n * `accept` must be a valid [MIME type](http://www.iana.org/assignments/media-types/media-types.xhtml) according to [input element specification](https://www.w3.org/wiki/HTML/Elements/input/file) or a valid file extension.\n * If `multiple` is set to false and additional files are droppped,\n * all files besides the first will be rejected.\n * Any file which does not have a size in the [`minSize`, `maxSize`] range, will be rejected as well.\n *\n * Note that the `onDrop` callback will always be invoked regardless if the dropped files were accepted or rejected.\n * If you'd like to react to a specific scenario, use the `onDropAccepted`/`onDropRejected` props.\n *\n * `onDrop` will provide you with an array of [File](https://developer.mozilla.org/en-US/docs/Web/API/File) objects which you can then process and send to a server.\n * For example, with [SuperAgent](https://github.com/visionmedia/superagent) as a http/ajax library:\n *\n * ```js\n * function onDrop(acceptedFiles) {\n *   const req = request.post('/upload')\n *   acceptedFiles.forEach(file => {\n *     req.attach(file.name, file)\n *   })\n *   req.end(callback)\n * }\n * ```\n * @param {dropAcceptedCb} [props.onDropAccepted]\n * @param {dropRejectedCb} [props.onDropRejected]\n *\n * @returns {DropzoneState}\n */\n\nexport function useDropzone() {\n  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      accept = _ref2.accept,\n      _ref2$disabled = _ref2.disabled,\n      disabled = _ref2$disabled === void 0 ? false : _ref2$disabled,\n      _ref2$getFilesFromEve = _ref2.getFilesFromEvent,\n      getFilesFromEvent = _ref2$getFilesFromEve === void 0 ? fromEvent : _ref2$getFilesFromEve,\n      _ref2$maxSize = _ref2.maxSize,\n      maxSize = _ref2$maxSize === void 0 ? Infinity : _ref2$maxSize,\n      _ref2$minSize = _ref2.minSize,\n      minSize = _ref2$minSize === void 0 ? 0 : _ref2$minSize,\n      _ref2$multiple = _ref2.multiple,\n      multiple = _ref2$multiple === void 0 ? true : _ref2$multiple,\n      onDragEnter = _ref2.onDragEnter,\n      onDragLeave = _ref2.onDragLeave,\n      onDragOver = _ref2.onDragOver,\n      onDrop = _ref2.onDrop,\n      onDropAccepted = _ref2.onDropAccepted,\n      onDropRejected = _ref2.onDropRejected,\n      onFileDialogCancel = _ref2.onFileDialogCancel,\n      _ref2$preventDropOnDo = _ref2.preventDropOnDocument,\n      preventDropOnDocument = _ref2$preventDropOnDo === void 0 ? true : _ref2$preventDropOnDo,\n      _ref2$noClick = _ref2.noClick,\n      noClick = _ref2$noClick === void 0 ? false : _ref2$noClick,\n      _ref2$noKeyboard = _ref2.noKeyboard,\n      noKeyboard = _ref2$noKeyboard === void 0 ? false : _ref2$noKeyboard,\n      _ref2$noDrag = _ref2.noDrag,\n      noDrag = _ref2$noDrag === void 0 ? false : _ref2$noDrag,\n      _ref2$noDragEventsBub = _ref2.noDragEventsBubbling,\n      noDragEventsBubbling = _ref2$noDragEventsBub === void 0 ? false : _ref2$noDragEventsBub;\n\n  var rootRef = useRef(null);\n  var inputRef = useRef(null);\n\n  var _useReducer = useReducer(reducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var isFocused = state.isFocused,\n      isFileDialogActive = state.isFileDialogActive,\n      draggedFiles = state.draggedFiles; // Fn for opening the file dialog programmatically\n\n  var openFileDialog = useCallback(function () {\n    if (inputRef.current) {\n      dispatch({\n        type: 'openDialog'\n      });\n      inputRef.current.value = null;\n      inputRef.current.click();\n    }\n  }, [dispatch]); // Update file dialog active state when the window is focused on\n\n  var onWindowFocus = function onWindowFocus() {\n    // Execute the timeout only if the file dialog is opened in the browser\n    if (isFileDialogActive) {\n      setTimeout(function () {\n        if (inputRef.current) {\n          var files = inputRef.current.files;\n\n          if (!files.length) {\n            dispatch({\n              type: 'closeDialog'\n            });\n\n            if (typeof onFileDialogCancel === 'function') {\n              onFileDialogCancel();\n            }\n          }\n        }\n      }, 300);\n    }\n  };\n\n  useEffect(function () {\n    window.addEventListener('focus', onWindowFocus, false);\n    return function () {\n      window.removeEventListener('focus', onWindowFocus, false);\n    };\n  }, [inputRef, isFileDialogActive, onFileDialogCancel]); // Cb to open the file dialog when SPACE/ENTER occurs on the dropzone\n\n  var onKeyDownCb = useCallback(function (event) {\n    // Ignore keyboard events bubbling up the DOM tree\n    if (!rootRef.current || !rootRef.current.isEqualNode(event.target)) {\n      return;\n    }\n\n    if (event.keyCode === 32 || event.keyCode === 13) {\n      event.preventDefault();\n      openFileDialog();\n    }\n  }, [rootRef, inputRef]); // Update focus state for the dropzone\n\n  var onFocusCb = useCallback(function () {\n    dispatch({\n      type: 'focus'\n    });\n  }, []);\n  var onBlurCb = useCallback(function () {\n    dispatch({\n      type: 'blur'\n    });\n  }, []); // Cb to open the file dialog when click occurs on the dropzone\n\n  var onClickCb = useCallback(function () {\n    if (noClick) {\n      return;\n    } // In IE11/Edge the file-browser dialog is blocking, therefore, use setTimeout()\n    // to ensure React can handle state changes\n    // See: https://github.com/react-dropzone/react-dropzone/issues/450\n\n\n    if (isIeOrEdge()) {\n      setTimeout(openFileDialog, 0);\n    } else {\n      openFileDialog();\n    }\n  }, [inputRef, noClick]);\n  var dragTargetsRef = useRef([]);\n\n  var onDocumentDrop = function onDocumentDrop(event) {\n    if (rootRef.current && rootRef.current.contains(event.target)) {\n      // If we intercepted an event for our instance, let it propagate down to the instance's onDrop handler\n      return;\n    }\n\n    event.preventDefault();\n    dragTargetsRef.current = [];\n  };\n\n  useEffect(function () {\n    if (preventDropOnDocument) {\n      document.addEventListener('dragover', onDocumentDragOver, false);\n      document.addEventListener('drop', onDocumentDrop, false);\n    }\n\n    return function () {\n      if (preventDropOnDocument) {\n        document.removeEventListener('dragover', onDocumentDragOver);\n        document.removeEventListener('drop', onDocumentDrop);\n      }\n    };\n  }, [rootRef, preventDropOnDocument]);\n  var onDragEnterCb = useCallback(function (event) {\n    event.preventDefault(); // Persist here because we need the event later after getFilesFromEvent() is done\n\n    event.persist();\n    stopPropagation(event); // Count the dropzone and any children that are entered.\n\n    if (dragTargetsRef.current.indexOf(event.target) === -1) {\n      dragTargetsRef.current = [].concat(_toConsumableArray(dragTargetsRef.current), [event.target]);\n    }\n\n    if (isEvtWithFiles(event)) {\n      Promise.resolve(getFilesFromEvent(event)).then(function (draggedFiles) {\n        if (isPropagationStopped(event) && !noDragEventsBubbling) {\n          return;\n        }\n\n        dispatch({\n          draggedFiles: draggedFiles,\n          isDragActive: true,\n          type: 'setDraggedFiles'\n        });\n\n        if (onDragEnter) {\n          onDragEnter(event);\n        }\n      });\n    }\n  }, [getFilesFromEvent, onDragEnter, noDragEventsBubbling]);\n  var onDragOverCb = useCallback(function (event) {\n    event.preventDefault();\n    event.persist();\n    stopPropagation(event);\n\n    if (event.dataTransfer) {\n      try {\n        event.dataTransfer.dropEffect = 'copy';\n      } catch (_unused) {}\n      /* eslint-disable-line no-empty */\n\n    }\n\n    if (isEvtWithFiles(event) && onDragOver) {\n      onDragOver(event);\n    }\n\n    return false;\n  }, [onDragOver, noDragEventsBubbling]);\n  var onDragLeaveCb = useCallback(function (event) {\n    event.preventDefault();\n    event.persist();\n    stopPropagation(event); // Only deactivate once the dropzone and all children have been left\n\n    var targets = dragTargetsRef.current.filter(function (target) {\n      return target !== event.target && rootRef.current && rootRef.current.contains(target);\n    });\n    dragTargetsRef.current = targets;\n\n    if (targets.length > 0) {\n      return;\n    }\n\n    dispatch({\n      isDragActive: false,\n      type: 'setDraggedFiles',\n      draggedFiles: []\n    });\n\n    if (isEvtWithFiles(event) && onDragLeave) {\n      onDragLeave(event);\n    }\n  }, [rootRef, onDragLeave, noDragEventsBubbling]);\n  var onDropCb = useCallback(function (event) {\n    event.preventDefault(); // Persist here because we need the event later after getFilesFromEvent() is done\n\n    event.persist();\n    stopPropagation(event);\n    dragTargetsRef.current = [];\n\n    if (isEvtWithFiles(event)) {\n      Promise.resolve(getFilesFromEvent(event)).then(function (files) {\n        if (isPropagationStopped(event) && !noDragEventsBubbling) {\n          return;\n        }\n\n        var acceptedFiles = [];\n        var rejectedFiles = [];\n        files.forEach(function (file) {\n          if (fileAccepted(file, accept) && fileMatchSize(file, minSize, maxSize)) {\n            acceptedFiles.push(file);\n          } else {\n            rejectedFiles.push(file);\n          }\n        });\n\n        if (!multiple && acceptedFiles.length > 1) {\n          rejectedFiles.push.apply(rejectedFiles, _toConsumableArray(acceptedFiles.splice(0))); // Reject everything and empty accepted files\n        }\n\n        dispatch({\n          acceptedFiles: acceptedFiles,\n          rejectedFiles: rejectedFiles,\n          type: 'setFiles'\n        });\n\n        if (onDrop) {\n          onDrop(acceptedFiles, rejectedFiles, event);\n        }\n\n        if (rejectedFiles.length > 0 && onDropRejected) {\n          onDropRejected(rejectedFiles, event);\n        }\n\n        if (acceptedFiles.length > 0 && onDropAccepted) {\n          onDropAccepted(acceptedFiles, event);\n        }\n      });\n    }\n\n    dispatch({\n      type: 'reset'\n    });\n  }, [multiple, accept, minSize, maxSize, getFilesFromEvent, onDrop, onDropAccepted, onDropRejected, noDragEventsBubbling]);\n\n  var composeHandler = function composeHandler(fn) {\n    return disabled ? null : fn;\n  };\n\n  var composeKeyboardHandler = function composeKeyboardHandler(fn) {\n    return noKeyboard ? null : composeHandler(fn);\n  };\n\n  var composeDragHandler = function composeDragHandler(fn) {\n    return noDrag ? null : composeHandler(fn);\n  };\n\n  var stopPropagation = function stopPropagation(event) {\n    if (noDragEventsBubbling) {\n      event.stopPropagation();\n    }\n  };\n\n  var getRootProps = useMemo(function () {\n    return function () {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$refKey = _ref3.refKey,\n          refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n          onKeyDown = _ref3.onKeyDown,\n          onFocus = _ref3.onFocus,\n          onBlur = _ref3.onBlur,\n          onClick = _ref3.onClick,\n          onDragEnter = _ref3.onDragEnter,\n          onDragOver = _ref3.onDragOver,\n          onDragLeave = _ref3.onDragLeave,\n          onDrop = _ref3.onDrop,\n          rest = _objectWithoutProperties(_ref3, [\"refKey\", \"onKeyDown\", \"onFocus\", \"onBlur\", \"onClick\", \"onDragEnter\", \"onDragOver\", \"onDragLeave\", \"onDrop\"]);\n\n      return _objectSpread(_defineProperty({\n        onKeyDown: composeKeyboardHandler(composeEventHandlers(onKeyDown, onKeyDownCb)),\n        onFocus: composeKeyboardHandler(composeEventHandlers(onFocus, onFocusCb)),\n        onBlur: composeKeyboardHandler(composeEventHandlers(onBlur, onBlurCb)),\n        onClick: composeHandler(composeEventHandlers(onClick, onClickCb)),\n        onDragEnter: composeDragHandler(composeEventHandlers(onDragEnter, onDragEnterCb)),\n        onDragOver: composeDragHandler(composeEventHandlers(onDragOver, onDragOverCb)),\n        onDragLeave: composeDragHandler(composeEventHandlers(onDragLeave, onDragLeaveCb)),\n        onDrop: composeDragHandler(composeEventHandlers(onDrop, onDropCb))\n      }, refKey, rootRef), !disabled && !noKeyboard ? {\n        tabIndex: 0\n      } : {}, {}, rest);\n    };\n  }, [rootRef, onKeyDownCb, onFocusCb, onBlurCb, onClickCb, onDragEnterCb, onDragOverCb, onDragLeaveCb, onDropCb, noKeyboard, noDrag, disabled]);\n  var onInputElementClick = useCallback(function (event) {\n    event.stopPropagation();\n  }, []);\n  var getInputProps = useMemo(function () {\n    return function () {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$refKey = _ref4.refKey,\n          refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n          onChange = _ref4.onChange,\n          onClick = _ref4.onClick,\n          rest = _objectWithoutProperties(_ref4, [\"refKey\", \"onChange\", \"onClick\"]);\n\n      var inputProps = _defineProperty({\n        accept: accept,\n        multiple: multiple,\n        type: 'file',\n        style: {\n          display: 'none'\n        },\n        onChange: composeHandler(composeEventHandlers(onChange, onDropCb)),\n        onClick: composeHandler(composeEventHandlers(onClick, onInputElementClick)),\n        autoComplete: 'off',\n        tabIndex: -1\n      }, refKey, inputRef);\n\n      return _objectSpread({}, inputProps, {}, rest);\n    };\n  }, [inputRef, accept, multiple, onDropCb, disabled]);\n  var fileCount = draggedFiles.length;\n  var isDragAccept = fileCount > 0 && allFilesAccepted({\n    files: draggedFiles,\n    accept: accept,\n    minSize: minSize,\n    maxSize: maxSize,\n    multiple: multiple\n  });\n  var isDragReject = fileCount > 0 && !isDragAccept;\n  return _objectSpread({}, state, {\n    isDragAccept: isDragAccept,\n    isDragReject: isDragReject,\n    isFocused: isFocused && !disabled,\n    getRootProps: getRootProps,\n    getInputProps: getInputProps,\n    rootRef: rootRef,\n    inputRef: inputRef,\n    open: composeHandler(openFileDialog)\n  });\n}\n\nfunction reducer(state, action) {\n  /* istanbul ignore next */\n  switch (action.type) {\n    case 'focus':\n      return _objectSpread({}, state, {\n        isFocused: true\n      });\n\n    case 'blur':\n      return _objectSpread({}, state, {\n        isFocused: false\n      });\n\n    case 'openDialog':\n      return _objectSpread({}, state, {\n        isFileDialogActive: true\n      });\n\n    case 'closeDialog':\n      return _objectSpread({}, state, {\n        isFileDialogActive: false\n      });\n\n    case 'setDraggedFiles':\n      /* eslint no-case-declarations: 0 */\n      var isDragActive = action.isDragActive,\n          draggedFiles = action.draggedFiles;\n      return _objectSpread({}, state, {\n        draggedFiles: draggedFiles,\n        isDragActive: isDragActive\n      });\n\n    case 'setFiles':\n      return _objectSpread({}, state, {\n        acceptedFiles: action.acceptedFiles,\n        rejectedFiles: action.rejectedFiles\n      });\n\n    case 'reset':\n      return _objectSpread({}, state, {\n        isFileDialogActive: false,\n        isDragActive: false,\n        draggedFiles: [],\n        acceptedFiles: [],\n        rejectedFiles: []\n      });\n\n    default:\n      return state;\n  }\n}","module.exports=function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p=\"\",r(r.s=0)}([function(e,r,t){\"use strict\";r.__esModule=!0,r.default=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(\",\"),n=e.name||\"\",o=e.type||\"\",u=o.replace(/\\/.*$/,\"\");return t.some(function(e){var r=e.trim();return\".\"===r.charAt(0)?n.toLowerCase().endsWith(r.toLowerCase()):r.endsWith(\"/*\")?u===r.replace(/\\/.*$/,\"\"):o===r})}return!0}}]);","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.idb = {}));\n}(this, function (exports) { 'use strict';\n\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\n      if (!(funcName in Constructor.prototype)) return;\n\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  function openDb(name, version, upgradeCallback) {\n    var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n    var request = p.request;\n\n    if (request) {\n      request.onupgradeneeded = function(event) {\n        if (upgradeCallback) {\n          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n        }\n      };\n    }\n\n    return p.then(function(db) {\n      return new DB(db);\n    });\n  }\n\n  function deleteDb(name) {\n    return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n  }\n\n  exports.openDb = openDb;\n  exports.deleteDb = deleteDb;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","import app from './_firebase';\nimport 'firebase/compat/messaging';\nimport axios from 'axios';\nimport { API_URL } from '../config';\n\nimport {getFirestore} from 'firebase/firestore'\nconst db = app.firestore();\n\nexport const listCataloges = async (teacherid) => {\n  try {\n    let querySnapshot = await app.firestore().collection('repo/library/users').doc(teacherid).collection('catalogs').orderBy('created_at','desc').get();\n    if (querySnapshot.docs) {\n      const catalogs = querySnapshot.docs.map((doc) => {\n        return {\n          id: doc.id,\n          ...doc.data()\n        };\n      });\n      return catalogs;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const listTags = async () => {\n\n};\nexport const getCatalog = async (teacherid, catalogId)=>{\n\n  console.log(teacherid,catalogId);\n\n  let querySnapshot = await db.collection('repo/library/users').doc(teacherid).collection('catalogs').doc(catalogId).get();\n  try {\n  console.log(\"123\");\n  const catalogData = await querySnapshot.data();\n  let catalogDetail =  await db.collection('repo/library/users').doc(teacherid).collection('catalogs').doc(catalogId).collection('detail').doc('content').get();\n    if (!catalogDetail.exists) {\n      console.log('No such document!');\n      catalogData.detail = '';\n    } else {\n      console.log('Document data:', catalogDetail.data());\n      catalogData.detail = catalogDetail.data().data;\n      catalogData.catalogId =catalogId;\n    }\n\n  let sectionSnapshot = await db.collection('repo/library/users').doc(teacherid).collection('catalogs').doc(catalogId).collection('sections').orderBy(\"index\").get();\n  if (sectionSnapshot.docs) {\n    const sections = sectionSnapshot.docs.map((doc) => {\n      console.log(catalogData);\n      return {\n        id: doc.id,\n        ...doc.data()\n      }\n    });\n    catalogData.sections = sections\n\n  }\n    return catalogData\n  }catch (err) {\n      console.log(err);\n    }\n};\nexport const searchTags = async () => {\n  console.log('search');\n  let query = '';\n  axios.get('https://test.search.dschool.vn/scotch.io-tutorial/cities_list/_search', {\n      data: JSON.stringify(query)\n    }\n  ).then((res) => {\n      console.log(res);\n    }\n  );\n};\n\nexport const getSubjects = async()=>{\n  try {\n    let doc = await app.firestore().collection('setting').doc('course').get();\n    let data=doc.data();\n    delete data.type;\n    console.log(data)\n    return data;\n  }catch(error){\n    console.log(error);\n  }\n};\n\nexport const updateCatalog = async (data) => {\n  console.log(data.catalogId);\n  console.log(data);\n  try {\n    const detail = data.detail;\n    delete data.detail;\n    await app.firestore().collection('repo/library/users').doc(data.created_by).collection('catalogs').doc(data.catalogId).update(data);\n    await app.firestore().collection('repo/library/users').doc(data.created_by).collection('catalogs').doc(data.catalogId).collection('detail').doc('content').set({ data: detail });\n    doIndex(data.catalogId,data.created_by);\n    console.log(data);\n    return true;\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const createCatalog = async (data) => {\n  try {\n    const detail = data.detail;\n    delete data.detail;\n    console.log(data);\n    await app.firestore().collection('repo/library/users').doc(data.created_by).set({author:data.author})\n    let catalogRef  = await app.firestore().collection('repo/library/users').doc(data.created_by).collection('catalogs').add(data);\n    await catalogRef.collection('detail').doc('content').set({ data: detail });\n    \n    doIndex(catalogRef.id,data.created_by);\n    console.log(data);\n    return true;\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const getListAllTags = async()=>{\n  try {\n    let querySnapshot = await app.firestore().collection('resource').doc('tags').collection('tags').get();\n    if (querySnapshot.docs) {\n      const tags = querySnapshot.docs.map((doc) => {\n        return {\n          id: doc.id,\n          ...doc.data()\n        };\n      });\n      console.log(tags);\n      return tags;\n    }\n  }catch(error){\n    console.log(error);\n  }\n};\n\nexport const addCatalogSection = async (name,catalogId,teacherid)=>{\n  const lastSection = await db.collection('repo/library/users').doc(teacherid).collection('catalogs').doc(catalogId).collection(\"sections\").orderBy(\"index\",\"desc\").limit(1).get();\n  if(lastSection.empty){\n    await db.collection('repo/library/users').doc(teacherid).collection('catalogs').doc(catalogId).collection(\"sections\").add({index:1,name:name});\n  } else {\n    lastSection.forEach(async section=>{\n      let data = section.data();\n      let index = data.index+1;\n      await db.collection('repo/library/users').doc(teacherid).collection('catalogs').doc(catalogId).collection(\"sections\").add({index:index,name:name});\n\n    window.location.reload();\n    })\n  }\n  return \"done\";\n};\n\nexport const updateCatalogSection = async (name,sectionId,catalogId,userId)=>{\n  try{\n    await db.collection('repo/library/users').doc(userId).collection('catalogs').doc(catalogId).collection(\"sections\").doc(sectionId).update({name:name});\n  }catch(error){\n    console.log(error);\n  }\n};\n\nexport const deleteSection = async(userId, catalogId, sectionId)=>{\n    console.log(userId,\"=>\", sectionId);\n    try{\n      await db.collection('repo/library/users').doc(userId).collection('catalogs').doc(catalogId).collection(\"sections\").doc(sectionId).delete();\n    }catch(error){\n      console.log(error);\n    }\n};\nexport const deleteQuiz = async(userId, catalogId, quizId, sectionId,activityType)=>{\n    console.log(activityType);\n  try{\n    let quizref ='';\n    if(activityType==='quiz'){\n       quizref = \"teachers/\"+userId+\"/quizzes/\"+quizId;\n    }else if( activityType==='theory'){\n       quizref = \"teachers/\"+userId+\"/theories/\"+quizId;\n    }\n\n    console.log(quizref);\n    const sectionRef =  await db.collection('repo/library/users').doc(userId).collection('catalogs').doc(catalogId).collection(\"sections\").doc(sectionId);\n    const doc = await sectionRef.get();\n    if (!doc.exists) {\n      console.log('No such document!');\n    } else {\n      console.log('Document data:', doc.data());\n      const sectionData = doc.data().activities;\n      if(sectionData.length > 0){\n        for (const [index,element] of sectionData.entries()) {\n          console.log(element.ref.path);\n          if(element.ref.path.toString() === quizref){\n\n            console.log(index);\n            sectionData.splice(index,1);\n            doc.ref.update({\n              activities:sectionData\n            });\n            if(activityType==='quiz'){\n              await db.collection('repo/library/users').doc(userId).collection(\"quizzes\").doc(quizId).delete();\n            }else if(activityType==='theory'){\n              await db.collection('repo/library/users').doc(userId).collection(\"theories\").doc(quizId).delete();\n            }\n          }\n        }\n      }\n    }\n\n  }catch(error){\n    console.log(error);\n  }\n};\n\nexport const addUrlActivity = async(values,catalogId,sectionId,teacherid)=>{\n  console.log(values)\n  console.log(catalogId)\n  console.log(teacherid)\n  const activity={name:values.name,url:values.url,type:values.type}\n  await db.collection('repo/library/users').doc(teacherid).collection('catalogs').doc(catalogId).collection(\"sections\").doc(sectionId).update({activities:getFirestore().FieldValue.arrayUnion(activity)});\n  return \"done\";\n};\n\n// export const doPublic = async(catalogId,teacherid)=>{\n//   console.log(catalogId);\n//   console.log(teacherid);\n//   axios.get(\n//     'https://asia-east2-hbon-dev.cloudfunctions.net/publicCatalog?catalogId='+catalogId+'&teacherId='+teacherid).then((res) => {\n//   console.log(res);\n// });\n// };\nexport const deleteCatalogs = async(ids)=>{\n  try {\n    console.log(ids);\n    // ids.map((id) => {\n    //   app.firestore().collection('contents').doc(id).collection('detail').doc('content').delete();\n    //   app.firestore().collection('contents').doc(id).delete();\n    // });\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const doPublic = async ( catalogId,teacherId)=>{\n  var param = {\n    catalogId: catalogId,\n    teacherId:teacherId\n  };\n  //renew idToken\n  await axios.post(`${API_URL}/api/elastic`,param);\n  return \"success\";\n}\n\nexport const doIndex = async ( catalogId,teacherId)=>{\n  var param = {\n    catalogId: catalogId,\n    teacherId:teacherId\n  };\n  //renew idToken\n  await axios.post(`${API_URL}/api/elastic_index`,param);\n  return \"success\";\n}\n","type NumberLike = number | bigint\n\nexport default class Hashids {\n  private alphabet: string[]\n  private seps: string[]\n  private guards: string[]\n  private salt: string[]\n  private guardsRegExp: RegExp\n  private sepsRegExp: RegExp\n  private allowedCharsRegExp: RegExp\n\n  public constructor(\n    salt = '',\n    private minLength = 0,\n    alphabet = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890',\n    seps = 'cfhistuCFHISTU',\n  ) {\n    if (typeof minLength !== 'number') {\n      throw new TypeError(\n        `Hashids: Provided 'minLength' has to be a number (is ${typeof minLength})`,\n      )\n    }\n    if (typeof salt !== 'string') {\n      throw new TypeError(\n        `Hashids: Provided 'salt' has to be a string (is ${typeof salt})`,\n      )\n    }\n    if (typeof alphabet !== 'string') {\n      throw new TypeError(\n        `Hashids: Provided alphabet has to be a string (is ${typeof alphabet})`,\n      )\n    }\n\n    const saltChars = Array.from(salt)\n    const alphabetChars = Array.from(alphabet)\n    const sepsChars = Array.from(seps)\n\n    this.salt = saltChars\n\n    const uniqueAlphabet = keepUnique(alphabetChars)\n\n    if (uniqueAlphabet.length < minAlphabetLength) {\n      throw new Error(\n        `Hashids: alphabet must contain at least ${minAlphabetLength} unique characters, provided: ${uniqueAlphabet.join(\n          '',\n        )}`,\n      )\n    }\n\n    /** `alphabet` should not contains `seps` */\n    this.alphabet = withoutChars(uniqueAlphabet, sepsChars)\n    /** `seps` should contain only characters present in `alphabet` */\n    const filteredSeps = onlyChars(sepsChars, uniqueAlphabet)\n    this.seps = shuffle(filteredSeps, saltChars)\n\n    let sepsLength\n    let diff\n\n    if (\n      this.seps.length === 0 ||\n      this.alphabet.length / this.seps.length > sepDiv\n    ) {\n      sepsLength = Math.ceil(this.alphabet.length / sepDiv)\n\n      if (sepsLength > this.seps.length) {\n        diff = sepsLength - this.seps.length\n        this.seps.push(...this.alphabet.slice(0, diff))\n        this.alphabet = this.alphabet.slice(diff)\n      }\n    }\n\n    this.alphabet = shuffle(this.alphabet, saltChars)\n    const guardCount = Math.ceil(this.alphabet.length / guardDiv)\n\n    if (this.alphabet.length < 3) {\n      this.guards = this.seps.slice(0, guardCount)\n      this.seps = this.seps.slice(guardCount)\n    } else {\n      this.guards = this.alphabet.slice(0, guardCount)\n      this.alphabet = this.alphabet.slice(guardCount)\n    }\n\n    this.guardsRegExp = makeAnyOfCharsRegExp(this.guards)\n    this.sepsRegExp = makeAnyOfCharsRegExp(this.seps)\n    this.allowedCharsRegExp = makeAtLeastSomeCharRegExp([\n      ...this.alphabet,\n      ...this.guards,\n      ...this.seps,\n    ])\n  }\n\n  public encode(numbers: string): string\n  public encode(numbers: NumberLike[]): string\n  public encode(...numbers: NumberLike[]): string\n  public encode(numbers: string[]): string\n  public encode(...numbers: string[]): string\n  public encode<T extends string | NumberLike>(\n    first: T[] | T,\n    ...numbers: T[]\n  ): string {\n    const ret = ''\n\n    if (Array.isArray(first)) {\n      numbers = first\n    } else {\n      // eslint-disable-next-line eqeqeq\n      numbers = [...(first != null ? [first] : []), ...numbers]\n    }\n\n    if (!numbers.length) {\n      return ret\n    }\n\n    if (!numbers.every(isIntegerNumber)) {\n      numbers = numbers.map((n) =>\n        typeof n === 'bigint' || typeof n === 'number'\n          ? n\n          : safeParseInt10(String(n)),\n      ) as T[]\n    }\n\n    if (!(numbers as NumberLike[]).every(isPositiveAndFinite)) {\n      return ret\n    }\n\n    return this._encode(numbers as number[]).join('')\n  }\n\n  public decode(id: string): NumberLike[] {\n    if (!id || typeof id !== 'string' || id.length === 0) return []\n    return this._decode(id)\n  }\n\n  /**\n   * @description Splits a hex string into groups of 12-digit hexadecimal numbers,\n   * then prefixes each with '1' and encodes the resulting array of numbers\n   *\n   * Encoding '00000000000f00000000000f000f' would be the equivalent of:\n   * Hashids.encode([0x100000000000f, 0x100000000000f, 0x1000f])\n   *\n   * This means that if your environment supports BigInts,\n   * you will get different (shorter) results if you provide\n   * a BigInt representation of your hex and use `encode` directly, e.g.:\n   * Hashids.encode(BigInt(`0x${hex}`))\n   *\n   * To decode such a representation back to a hex string, use the following snippet:\n   * Hashids.decode(id)[0].toString(16)\n   */\n  public encodeHex(hex: string | bigint): string {\n    switch (typeof hex) {\n      case 'bigint':\n        hex = hex.toString(16)\n        break\n      case 'string':\n        if (!/^[0-9a-fA-F]+$/.test(hex)) return ''\n        break\n      default:\n        throw new Error(\n          `Hashids: The provided value is neither a string, nor a BigInt (got: ${typeof hex})`,\n        )\n    }\n\n    const numbers = splitAtIntervalAndMap(hex, 12, (part) =>\n      parseInt(`1${part}`, 16),\n    )\n    return this.encode(numbers)\n  }\n\n  public decodeHex(id: string): string {\n    return this.decode(id)\n      .map((number) => number.toString(16).slice(1))\n      .join('')\n  }\n\n  private _encode(numbers: NumberLike[]): string[] {\n    let alphabet = this.alphabet\n\n    const numbersIdInt = numbers.reduce<number>(\n      (last, number, i) =>\n        last +\n        (typeof number === 'bigint'\n          ? Number(number % BigInt(i + 100))\n          : number % (i + 100)),\n      0,\n    )\n\n    let ret: string[] = [alphabet[numbersIdInt % alphabet.length]]\n    const lottery = ret.slice()\n\n    const seps = this.seps\n    const guards = this.guards\n\n    numbers.forEach((number, i) => {\n      const buffer = lottery.concat(this.salt, alphabet)\n\n      alphabet = shuffle(alphabet, buffer)\n      const last = toAlphabet(number, alphabet)\n\n      ret.push(...last)\n\n      if (i + 1 < numbers.length) {\n        const charCode = last[0].codePointAt(0)! + i\n        const extraNumber =\n          typeof number === 'bigint'\n            ? Number(number % BigInt(charCode))\n            : number % charCode\n        ret.push(seps[extraNumber % seps.length])\n      }\n    })\n\n    if (ret.length < this.minLength) {\n      const prefixGuardIndex =\n        (numbersIdInt + ret[0].codePointAt(0)!) % guards.length\n      ret.unshift(guards[prefixGuardIndex])\n\n      if (ret.length < this.minLength) {\n        const suffixGuardIndex =\n          (numbersIdInt + ret[2].codePointAt(0)!) % guards.length\n        ret.push(guards[suffixGuardIndex])\n      }\n    }\n\n    const halfLength = Math.floor(alphabet.length / 2)\n    while (ret.length < this.minLength) {\n      alphabet = shuffle(alphabet, alphabet)\n      ret.unshift(...alphabet.slice(halfLength))\n      ret.push(...alphabet.slice(0, halfLength))\n\n      const excess = ret.length - this.minLength\n      if (excess > 0) {\n        const halfOfExcess = excess / 2\n        ret = ret.slice(halfOfExcess, halfOfExcess + this.minLength)\n      }\n    }\n\n    return ret\n  }\n\n  public isValidId(id: string): boolean {\n    return this.allowedCharsRegExp.test(id)\n  }\n\n  private _decode(id: string): NumberLike[] {\n    if (!this.isValidId(id)) {\n      throw new Error(\n        `The provided ID (${id}) is invalid, as it contains characters that do not exist in the alphabet (${this.guards.join(\n          '',\n        )}${this.seps.join('')}${this.alphabet.join('')})`,\n      )\n    }\n    const idGuardsArray = id.split(this.guardsRegExp)\n    const splitIndex =\n      idGuardsArray.length === 3 || idGuardsArray.length === 2 ? 1 : 0\n\n    const idBreakdown = idGuardsArray[splitIndex]\n    if (idBreakdown.length === 0) return []\n\n    const lotteryChar = idBreakdown[Symbol.iterator]().next().value as string\n    const idArray = idBreakdown.slice(lotteryChar.length).split(this.sepsRegExp)\n\n    let lastAlphabet: string[] = this.alphabet\n    const result: NumberLike[] = []\n\n    for (const subId of idArray) {\n      const buffer = [lotteryChar, ...this.salt, ...lastAlphabet]\n      const nextAlphabet = shuffle(\n        lastAlphabet,\n        buffer.slice(0, lastAlphabet.length),\n      )\n      result.push(fromAlphabet(Array.from(subId), nextAlphabet))\n      lastAlphabet = nextAlphabet\n    }\n\n    // if the result is different from what we'd expect, we return an empty result (malformed input):\n    if (this._encode(result).join('') !== id) return []\n    return result\n  }\n}\n\nconst minAlphabetLength = 16\nconst sepDiv = 3.5\nconst guardDiv = 12\n\nexport const keepUnique = <T>(content: Iterable<T>): T[] =>\n  Array.from(new Set(content))\n\nexport const withoutChars = (\n  chars: string[],\n  withoutChars: string[],\n): string[] => chars.filter((char) => !withoutChars.includes(char))\n\nexport const onlyChars = (chars: string[], keepChars: string[]): string[] =>\n  chars.filter((char) => keepChars.includes(char))\n\nconst isIntegerNumber = (n: NumberLike | string) =>\n  typeof n === 'bigint' ||\n  (!Number.isNaN(Number(n)) && Math.floor(Number(n)) === n)\n\nconst isPositiveAndFinite = (n: NumberLike) =>\n  typeof n === 'bigint' || (n >= 0 && Number.isSafeInteger(n))\n\nfunction shuffle(alphabetChars: string[], saltChars: string[]): string[] {\n  if (saltChars.length === 0) {\n    return alphabetChars\n  }\n\n  let integer: number\n  const transformed = alphabetChars.slice()\n\n  for (let i = transformed.length - 1, v = 0, p = 0; i > 0; i--, v++) {\n    v %= saltChars.length\n    p += integer = saltChars[v].codePointAt(0)!\n    const j = (integer + v + p) % i\n\n    // swap characters at positions i and j\n    const a = transformed[i]\n    const b = transformed[j]\n    transformed[j] = a\n    transformed[i] = b\n  }\n\n  return transformed\n}\n\nconst toAlphabet = (input: NumberLike, alphabetChars: string[]): string[] => {\n  const id: string[] = []\n\n  if (typeof input === 'bigint') {\n    const alphabetLength = BigInt(alphabetChars.length)\n    do {\n      id.unshift(alphabetChars[Number(input % alphabetLength)])\n      input = input / alphabetLength\n    } while (input > BigInt(0))\n  } else {\n    do {\n      id.unshift(alphabetChars[input % alphabetChars.length])\n      input = Math.floor(input / alphabetChars.length)\n    } while (input > 0)\n  }\n\n  return id\n}\n\nconst fromAlphabet = (\n  inputChars: string[],\n  alphabetChars: string[],\n): NumberLike =>\n  inputChars.reduce((carry, item) => {\n    const index = alphabetChars.indexOf(item)\n    if (index === -1) {\n      throw new Error(\n        `The provided ID (${inputChars.join(\n          '',\n        )}) is invalid, as it contains characters that do not exist in the alphabet (${alphabetChars.join(\n          '',\n        )})`,\n      )\n    }\n    if (typeof carry === 'bigint') {\n      return carry * BigInt(alphabetChars.length) + BigInt(index)\n    }\n    const value = carry * alphabetChars.length + index\n    const isSafeValue = Number.isSafeInteger(value)\n    if (isSafeValue) {\n      return value\n    } else {\n      if (typeof BigInt === 'function') {\n        return BigInt(carry) * BigInt(alphabetChars.length) + BigInt(index)\n      } else {\n        // we do not have support for BigInt:\n        throw new Error(\n          `Unable to decode the provided string, due to lack of support for BigInt numbers in the current environment`,\n        )\n      }\n    }\n  }, 0 as NumberLike)\n\nconst safeToParseNumberRegExp = /^\\+?[0-9]+$/\nconst safeParseInt10 = (str: string) =>\n  safeToParseNumberRegExp.test(str) ? parseInt(str, 10) : NaN\n\nconst splitAtIntervalAndMap = <T>(\n  str: string,\n  nth: number,\n  map: (n: string) => T,\n): T[] =>\n  Array.from<never, T>({length: Math.ceil(str.length / nth)}, (_, index) =>\n    map(str.slice(index * nth, (index + 1) * nth)),\n  )\n\nconst makeAnyOfCharsRegExp = (chars: string[]) =>\n  new RegExp(\n    chars\n      .map((char) => escapeRegExp(char))\n      // we need to sort these from longest to shortest,\n      // as they may contain multibyte unicode characters (these should come first)\n      .sort((a, b) => b.length - a.length)\n      .join('|'),\n  )\n\nconst makeAtLeastSomeCharRegExp = (chars: string[]) =>\n  new RegExp(\n    `^[${chars\n      .map((char) => escapeRegExp(char))\n      // we need to sort these from longest to shortest,\n      // as they may contain multibyte unicode characters (these should come first)\n      .sort((a, b) => b.length - a.length)\n      .join('')}]+$`,\n  )\n\nconst escapeRegExp = (text: string) =>\n  text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n","export { default } from './IconButton';","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_SW_PATH = '/firebase-messaging-sw.js';\nexport const DEFAULT_SW_SCOPE = '/firebase-cloud-messaging-push-scope';\n\nexport const DEFAULT_VAPID_KEY =\n  'BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4';\n\nexport const ENDPOINT = 'https://fcmregistrations.googleapis.com/v1';\n\n/** Key of FCM Payload in Notification's data field. */\nexport const FCM_MSG = 'FCM_MSG';\n\nexport const CONSOLE_CAMPAIGN_ID = 'google.c.a.c_id';\nexport const CONSOLE_CAMPAIGN_NAME = 'google.c.a.c_l';\nexport const CONSOLE_CAMPAIGN_TIME = 'google.c.a.ts';\n/** Set to '1' if Analytics is enabled for the campaign */\nexport const CONSOLE_CAMPAIGN_ANALYTICS_ENABLED = 'google.c.a.e';\nexport const TAG = 'FirebaseMessaging: ';\nexport const MAX_NUMBER_OF_EVENTS_PER_LOG_REQUEST = 1000;\nexport const MAX_RETRIES = 3;\nexport const LOG_INTERVAL_IN_MS = 86400000; //24 hour\nexport const DEFAULT_BACKOFF_TIME_MS = 5000;\n\n// FCM log source name registered at Firelog: 'FCM_CLIENT_EVENT_LOGGING'. It uniquely identifies\n// FCM's logging configuration.\nexport const FCM_LOG_SOURCE = 1249;\n\n// Defined as in proto/messaging_event.proto. Neglecting fields that are supported.\nexport const SDK_PLATFORM_WEB = 3;\nexport const EVENT_MESSAGE_DELIVERED = 1;\n\nexport enum MessageType {\n  DATA_MESSAGE = 1,\n  DISPLAY_NOTIFICATION = 3\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum ErrorCode {\n  MISSING_APP_CONFIG_VALUES = 'missing-app-config-values',\n  AVAILABLE_IN_WINDOW = 'only-available-in-window',\n  AVAILABLE_IN_SW = 'only-available-in-sw',\n  PERMISSION_DEFAULT = 'permission-default',\n  PERMISSION_BLOCKED = 'permission-blocked',\n  UNSUPPORTED_BROWSER = 'unsupported-browser',\n  INDEXED_DB_UNSUPPORTED = 'indexed-db-unsupported',\n  FAILED_DEFAULT_REGISTRATION = 'failed-service-worker-registration',\n  TOKEN_SUBSCRIBE_FAILED = 'token-subscribe-failed',\n  TOKEN_SUBSCRIBE_NO_TOKEN = 'token-subscribe-no-token',\n  TOKEN_UNSUBSCRIBE_FAILED = 'token-unsubscribe-failed',\n  TOKEN_UPDATE_FAILED = 'token-update-failed',\n  TOKEN_UPDATE_NO_TOKEN = 'token-update-no-token',\n  INVALID_BG_HANDLER = 'invalid-bg-handler',\n  USE_SW_AFTER_GET_TOKEN = 'use-sw-after-get-token',\n  INVALID_SW_REGISTRATION = 'invalid-sw-registration',\n  USE_VAPID_KEY_AFTER_GET_TOKEN = 'use-vapid-key-after-get-token',\n  INVALID_VAPID_KEY = 'invalid-vapid-key'\n}\n\nexport const ERROR_MAP: ErrorMap<ErrorCode> = {\n  [ErrorCode.MISSING_APP_CONFIG_VALUES]:\n    'Missing App configuration value: \"{$valueName}\"',\n  [ErrorCode.AVAILABLE_IN_WINDOW]:\n    'This method is available in a Window context.',\n  [ErrorCode.AVAILABLE_IN_SW]:\n    'This method is available in a service worker context.',\n  [ErrorCode.PERMISSION_DEFAULT]:\n    'The notification permission was not granted and dismissed instead.',\n  [ErrorCode.PERMISSION_BLOCKED]:\n    'The notification permission was not granted and blocked instead.',\n  [ErrorCode.UNSUPPORTED_BROWSER]:\n    \"This browser doesn't support the API's required to use the firebase SDK.\",\n  [ErrorCode.INDEXED_DB_UNSUPPORTED]:\n    \"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)\",\n  [ErrorCode.FAILED_DEFAULT_REGISTRATION]:\n    'We are unable to register the default service worker. {$browserErrorMessage}',\n  [ErrorCode.TOKEN_SUBSCRIBE_FAILED]:\n    'A problem occurred while subscribing the user to FCM: {$errorInfo}',\n  [ErrorCode.TOKEN_SUBSCRIBE_NO_TOKEN]:\n    'FCM returned no token when subscribing the user to push.',\n  [ErrorCode.TOKEN_UNSUBSCRIBE_FAILED]:\n    'A problem occurred while unsubscribing the ' +\n    'user from FCM: {$errorInfo}',\n  [ErrorCode.TOKEN_UPDATE_FAILED]:\n    'A problem occurred while updating the user from FCM: {$errorInfo}',\n  [ErrorCode.TOKEN_UPDATE_NO_TOKEN]:\n    'FCM returned no token when updating the user to push.',\n  [ErrorCode.USE_SW_AFTER_GET_TOKEN]:\n    'The useServiceWorker() method may only be called once and must be ' +\n    'called before calling getToken() to ensure your service worker is used.',\n  [ErrorCode.INVALID_SW_REGISTRATION]:\n    'The input to useServiceWorker() must be a ServiceWorkerRegistration.',\n  [ErrorCode.INVALID_BG_HANDLER]:\n    'The input to setBackgroundMessageHandler() must be a function.',\n  [ErrorCode.INVALID_VAPID_KEY]: 'The public VAPID key must be a string.',\n  [ErrorCode.USE_VAPID_KEY_AFTER_GET_TOKEN]:\n    'The usePublicVapidKey() method may only be called once and must be ' +\n    'called before calling getToken() to ensure your VAPID key is used.'\n};\n\ninterface ErrorParams {\n  [ErrorCode.MISSING_APP_CONFIG_VALUES]: {\n    valueName: string;\n  };\n  [ErrorCode.FAILED_DEFAULT_REGISTRATION]: { browserErrorMessage: string };\n  [ErrorCode.TOKEN_SUBSCRIBE_FAILED]: { errorInfo: string };\n  [ErrorCode.TOKEN_UNSUBSCRIBE_FAILED]: { errorInfo: string };\n  [ErrorCode.TOKEN_UPDATE_FAILED]: { errorInfo: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<ErrorCode, ErrorParams>(\n  'messaging',\n  'Messaging',\n  ERROR_MAP\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { GenerateAuthTokenResponse } from '../interfaces/api-response';\nimport {\n  CompletedAuthToken,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport {\n  INSTALLATIONS_API_URL,\n  INTERNAL_AUTH_VERSION\n} from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\nimport { AppConfig } from '../interfaces/installation-impl';\n\nexport function getInstallationsEndpoint({ projectId }: AppConfig): string {\n  return `${INSTALLATIONS_API_URL}/projects/${projectId}/installations`;\n}\n\nexport function extractAuthTokenInfoFromResponse(\n  response: GenerateAuthTokenResponse\n): CompletedAuthToken {\n  return {\n    token: response.token,\n    requestStatus: RequestStatus.COMPLETED,\n    expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\n    creationTime: Date.now()\n  };\n}\n\nexport async function getErrorFromResponse(\n  requestName: string,\n  response: Response\n): Promise<FirebaseError> {\n  const responseJson: ErrorResponse = await response.json();\n  const errorData = responseJson.error;\n  return ERROR_FACTORY.create(ErrorCode.REQUEST_FAILED, {\n    requestName,\n    serverCode: errorData.code,\n    serverMessage: errorData.message,\n    serverStatus: errorData.status\n  });\n}\n\nexport function getHeaders({ apiKey }: AppConfig): Headers {\n  return new Headers({\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n    'x-goog-api-key': apiKey\n  });\n}\n\nexport function getHeadersWithAuth(\n  appConfig: AppConfig,\n  { refreshToken }: RegisteredInstallationEntry\n): Headers {\n  const headers = getHeaders(appConfig);\n  headers.append('Authorization', getAuthorizationHeader(refreshToken));\n  return headers;\n}\n\nexport interface ErrorResponse {\n  error: {\n    code: number;\n    message: string;\n    status: string;\n  };\n}\n\n/**\n * Calls the passed in fetch wrapper and returns the response.\n * If the returned response has a status of 5xx, re-runs the function once and\n * returns the response.\n */\nexport async function retryIfServerError(\n  fn: () => Promise<Response>\n): Promise<Response> {\n  const result = await fn();\n\n  if (result.status >= 500 && result.status < 600) {\n    // Internal Server Error. Retry request.\n    return fn();\n  }\n\n  return result;\n}\n\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn: string): number {\n  // This works because the server will never respond with fractions of a second.\n  return Number(responseExpiresIn.replace('s', '000'));\n}\n\nfunction getAuthorizationHeader(refreshToken: string): string {\n  return `${INTERNAL_AUTH_VERSION} ${refreshToken}`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CreateInstallationResponse } from '../interfaces/api-response';\nimport {\n  InProgressInstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { INTERNAL_AUTH_VERSION, PACKAGE_VERSION } from '../util/constants';\nimport {\n  extractAuthTokenInfoFromResponse,\n  getErrorFromResponse,\n  getHeaders,\n  getInstallationsEndpoint,\n  retryIfServerError\n} from './common';\nimport { AppConfig } from '../interfaces/installation-impl';\n\nexport async function createInstallationRequest(\n  appConfig: AppConfig,\n  { fid }: InProgressInstallationEntry\n): Promise<RegisteredInstallationEntry> {\n  const endpoint = getInstallationsEndpoint(appConfig);\n\n  const headers = getHeaders(appConfig);\n  const body = {\n    fid,\n    authVersion: INTERNAL_AUTH_VERSION,\n    appId: appConfig.appId,\n    sdkVersion: PACKAGE_VERSION\n  };\n\n  const request: RequestInit = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(body)\n  };\n\n  const response = await retryIfServerError(() => fetch(endpoint, request));\n  if (response.ok) {\n    const responseValue: CreateInstallationResponse = await response.json();\n    const registeredInstallationEntry: RegisteredInstallationEntry = {\n      fid: responseValue.fid || fid,\n      registrationStatus: RequestStatus.COMPLETED,\n      refreshToken: responseValue.refreshToken,\n      authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\n    };\n    return registeredInstallationEntry;\n  } else {\n    throw await getErrorFromResponse('Create Installation', response);\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Returns a promise that resolves after given time passes. */\nexport function sleep(ms: number): Promise<void> {\n  return new Promise<void>(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { bufferToBase64UrlSafe } from './buffer-to-base64-url-safe';\n\nexport const VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\nexport const INVALID_FID = '';\n\n/**\n * Generates a new FID using random values from Web Crypto API.\n * Returns an empty string if FID generation fails for any reason.\n */\nexport function generateFid(): string {\n  try {\n    // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\n    // bytes. our implementation generates a 17 byte array instead.\n    const fidByteArray = new Uint8Array(17);\n    const crypto =\n      self.crypto || ((self as unknown) as { msCrypto: Crypto }).msCrypto;\n    crypto.getRandomValues(fidByteArray);\n\n    // Replace the first 4 random bits with the constant FID header of 0b0111.\n    fidByteArray[0] = 0b01110000 + (fidByteArray[0] % 0b00010000);\n\n    const fid = encode(fidByteArray);\n\n    return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\n  } catch {\n    // FID generation errored\n    return INVALID_FID;\n  }\n}\n\n/** Converts a FID Uint8Array to a base64 string representation. */\nfunction encode(fidByteArray: Uint8Array): string {\n  const b64String = bufferToBase64UrlSafe(fidByteArray);\n\n  // Remove the 23rd character that was added because of the extra 4 bits at the\n  // end of our 17 byte array, and the '=' padding.\n  return b64String.substr(0, 22);\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function bufferToBase64UrlSafe(array: Uint8Array): string {\n  const b64 = btoa(String.fromCharCode(...array));\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppConfig } from '../interfaces/installation-impl';\n\n/** Returns a string key that can be used to identify the app. */\nexport function getKey(appConfig: AppConfig): string {\n  return `${appConfig.appName}!${appConfig.appId}`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getKey } from '../util/get-key';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { IdChangeCallbackFn } from '../api';\n\nconst fidChangeCallbacks: Map<string, Set<IdChangeCallbackFn>> = new Map();\n\n/**\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\n * change to other tabs.\n */\nexport function fidChanged(appConfig: AppConfig, fid: string): void {\n  const key = getKey(appConfig);\n\n  callFidChangeCallbacks(key, fid);\n  broadcastFidChange(key, fid);\n}\n\nexport function addCallback(\n  appConfig: AppConfig,\n  callback: IdChangeCallbackFn\n): void {\n  // Open the broadcast channel if it's not already open,\n  // to be able to listen to change events from other tabs.\n  getBroadcastChannel();\n\n  const key = getKey(appConfig);\n\n  let callbackSet = fidChangeCallbacks.get(key);\n  if (!callbackSet) {\n    callbackSet = new Set();\n    fidChangeCallbacks.set(key, callbackSet);\n  }\n  callbackSet.add(callback);\n}\n\nexport function removeCallback(\n  appConfig: AppConfig,\n  callback: IdChangeCallbackFn\n): void {\n  const key = getKey(appConfig);\n\n  const callbackSet = fidChangeCallbacks.get(key);\n\n  if (!callbackSet) {\n    return;\n  }\n\n  callbackSet.delete(callback);\n  if (callbackSet.size === 0) {\n    fidChangeCallbacks.delete(key);\n  }\n\n  // Close broadcast channel if there are no more callbacks.\n  closeBroadcastChannel();\n}\n\nfunction callFidChangeCallbacks(key: string, fid: string): void {\n  const callbacks = fidChangeCallbacks.get(key);\n  if (!callbacks) {\n    return;\n  }\n\n  for (const callback of callbacks) {\n    callback(fid);\n  }\n}\n\nfunction broadcastFidChange(key: string, fid: string): void {\n  const channel = getBroadcastChannel();\n  if (channel) {\n    channel.postMessage({ key, fid });\n  }\n  closeBroadcastChannel();\n}\n\nlet broadcastChannel: BroadcastChannel | null = null;\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\nfunction getBroadcastChannel(): BroadcastChannel | null {\n  if (!broadcastChannel && 'BroadcastChannel' in self) {\n    broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\n    broadcastChannel.onmessage = e => {\n      callFidChangeCallbacks(e.data.key, e.data.fid);\n    };\n  }\n  return broadcastChannel;\n}\n\nfunction closeBroadcastChannel(): void {\n  if (fidChangeCallbacks.size === 0 && broadcastChannel) {\n    broadcastChannel.close();\n    broadcastChannel = null;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DB, openDb } from 'idb';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { InstallationEntry } from '../interfaces/installation-entry';\nimport { getKey } from '../util/get-key';\nimport { fidChanged } from './fid-changed';\n\nconst DATABASE_NAME = 'firebase-installations-database';\nconst DATABASE_VERSION = 1;\nconst OBJECT_STORE_NAME = 'firebase-installations-store';\n\nlet dbPromise: Promise<DB> | null = null;\nfunction getDbPromise(): Promise<DB> {\n  if (!dbPromise) {\n    dbPromise = openDb(DATABASE_NAME, DATABASE_VERSION, upgradeDB => {\n      // We don't use 'break' in this switch statement, the fall-through\n      // behavior is what we want, because if there are multiple versions between\n      // the old version and the current version, we want ALL the migrations\n      // that correspond to those versions to run, not only the last one.\n      // eslint-disable-next-line default-case\n      switch (upgradeDB.oldVersion) {\n        case 0:\n          upgradeDB.createObjectStore(OBJECT_STORE_NAME);\n      }\n    });\n  }\n  return dbPromise;\n}\n\n/** Gets record(s) from the objectStore that match the given key. */\nexport async function get(\n  appConfig: AppConfig\n): Promise<InstallationEntry | undefined> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  return db\n    .transaction(OBJECT_STORE_NAME)\n    .objectStore(OBJECT_STORE_NAME)\n    .get(key);\n}\n\n/** Assigns or overwrites the record for the given key with the given value. */\nexport async function set<ValueType extends InstallationEntry>(\n  appConfig: AppConfig,\n  value: ValueType\n): Promise<ValueType> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  const objectStore = tx.objectStore(OBJECT_STORE_NAME);\n  const oldValue = await objectStore.get(key);\n  await objectStore.put(value, key);\n  await tx.complete;\n\n  if (!oldValue || oldValue.fid !== value.fid) {\n    fidChanged(appConfig, value.fid);\n  }\n\n  return value;\n}\n\n/** Removes record(s) from the objectStore that match the given key. */\nexport async function remove(appConfig: AppConfig): Promise<void> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  await tx.objectStore(OBJECT_STORE_NAME).delete(key);\n  await tx.complete;\n}\n\n/**\n * Atomically updates a record with the result of updateFn, which gets\n * called with the current value. If newValue is undefined, the record is\n * deleted instead.\n * @return Updated value\n */\nexport async function update<ValueType extends InstallationEntry | undefined>(\n  appConfig: AppConfig,\n  updateFn: (previousValue: InstallationEntry | undefined) => ValueType\n): Promise<ValueType> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  const store = tx.objectStore(OBJECT_STORE_NAME);\n  const oldValue: InstallationEntry | undefined = await store.get(key);\n  const newValue = updateFn(oldValue);\n\n  if (newValue === undefined) {\n    await store.delete(key);\n  } else {\n    await store.put(newValue, key);\n  }\n  await tx.complete;\n\n  if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\n    fidChanged(appConfig, newValue.fid);\n  }\n\n  return newValue;\n}\n\nexport async function clear(): Promise<void> {\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  await tx.objectStore(OBJECT_STORE_NAME).clear();\n  await tx.complete;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createInstallationRequest } from '../functions/create-installation-request';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport {\n  InProgressInstallationEntry,\n  InstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { PENDING_TIMEOUT_MS } from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode, isServerError } from '../util/errors';\nimport { sleep } from '../util/sleep';\nimport { generateFid, INVALID_FID } from './generate-fid';\nimport { remove, set, update } from './idb-manager';\n\nexport interface InstallationEntryWithRegistrationPromise {\n  installationEntry: InstallationEntry;\n  /** Exist iff the installationEntry is not registered. */\n  registrationPromise?: Promise<RegisteredInstallationEntry>;\n}\n\n/**\n * Updates and returns the InstallationEntry from the database.\n * Also triggers a registration request if it is necessary and possible.\n */\nexport async function getInstallationEntry(\n  appConfig: AppConfig\n): Promise<InstallationEntryWithRegistrationPromise> {\n  let registrationPromise: Promise<RegisteredInstallationEntry> | undefined;\n\n  const installationEntry = await update(appConfig, oldEntry => {\n    const installationEntry = updateOrCreateInstallationEntry(oldEntry);\n    const entryWithPromise = triggerRegistrationIfNecessary(\n      appConfig,\n      installationEntry\n    );\n    registrationPromise = entryWithPromise.registrationPromise;\n    return entryWithPromise.installationEntry;\n  });\n\n  if (installationEntry.fid === INVALID_FID) {\n    // FID generation failed. Waiting for the FID from the server.\n    return { installationEntry: await registrationPromise! };\n  }\n\n  return {\n    installationEntry,\n    registrationPromise\n  };\n}\n\n/**\n * Creates a new Installation Entry if one does not exist.\n * Also clears timed out pending requests.\n */\nfunction updateOrCreateInstallationEntry(\n  oldEntry: InstallationEntry | undefined\n): InstallationEntry {\n  const entry: InstallationEntry = oldEntry || {\n    fid: generateFid(),\n    registrationStatus: RequestStatus.NOT_STARTED\n  };\n\n  return clearTimedOutRequest(entry);\n}\n\n/**\n * If the Firebase Installation is not registered yet, this will trigger the\n * registration and return an InProgressInstallationEntry.\n *\n * If registrationPromise does not exist, the installationEntry is guaranteed\n * to be registered.\n */\nfunction triggerRegistrationIfNecessary(\n  appConfig: AppConfig,\n  installationEntry: InstallationEntry\n): InstallationEntryWithRegistrationPromise {\n  if (installationEntry.registrationStatus === RequestStatus.NOT_STARTED) {\n    if (!navigator.onLine) {\n      // Registration required but app is offline.\n      const registrationPromiseWithError = Promise.reject(\n        ERROR_FACTORY.create(ErrorCode.APP_OFFLINE)\n      );\n      return {\n        installationEntry,\n        registrationPromise: registrationPromiseWithError\n      };\n    }\n\n    // Try registering. Change status to IN_PROGRESS.\n    const inProgressEntry: InProgressInstallationEntry = {\n      fid: installationEntry.fid,\n      registrationStatus: RequestStatus.IN_PROGRESS,\n      registrationTime: Date.now()\n    };\n    const registrationPromise = registerInstallation(\n      appConfig,\n      inProgressEntry\n    );\n    return { installationEntry: inProgressEntry, registrationPromise };\n  } else if (\n    installationEntry.registrationStatus === RequestStatus.IN_PROGRESS\n  ) {\n    return {\n      installationEntry,\n      registrationPromise: waitUntilFidRegistration(appConfig)\n    };\n  } else {\n    return { installationEntry };\n  }\n}\n\n/** This will be executed only once for each new Firebase Installation. */\nasync function registerInstallation(\n  appConfig: AppConfig,\n  installationEntry: InProgressInstallationEntry\n): Promise<RegisteredInstallationEntry> {\n  try {\n    const registeredInstallationEntry = await createInstallationRequest(\n      appConfig,\n      installationEntry\n    );\n    return set(appConfig, registeredInstallationEntry);\n  } catch (e) {\n    if (isServerError(e) && e.customData.serverCode === 409) {\n      // Server returned a \"FID can not be used\" error.\n      // Generate a new ID next time.\n      await remove(appConfig);\n    } else {\n      // Registration failed. Set FID as not registered.\n      await set(appConfig, {\n        fid: installationEntry.fid,\n        registrationStatus: RequestStatus.NOT_STARTED\n      });\n    }\n    throw e;\n  }\n}\n\n/** Call if FID registration is pending in another request. */\nasync function waitUntilFidRegistration(\n  appConfig: AppConfig\n): Promise<RegisteredInstallationEntry> {\n  // Unfortunately, there is no way of reliably observing when a value in\n  // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\n  // so we need to poll.\n\n  let entry: InstallationEntry = await updateInstallationRequest(appConfig);\n  while (entry.registrationStatus === RequestStatus.IN_PROGRESS) {\n    // createInstallation request still in progress.\n    await sleep(100);\n\n    entry = await updateInstallationRequest(appConfig);\n  }\n\n  if (entry.registrationStatus === RequestStatus.NOT_STARTED) {\n    // The request timed out or failed in a different call. Try again.\n    const {\n      installationEntry,\n      registrationPromise\n    } = await getInstallationEntry(appConfig);\n\n    if (registrationPromise) {\n      return registrationPromise;\n    } else {\n      // if there is no registrationPromise, entry is registered.\n      return installationEntry as RegisteredInstallationEntry;\n    }\n  }\n\n  return entry;\n}\n\n/**\n * Called only if there is a CreateInstallation request in progress.\n *\n * Updates the InstallationEntry in the DB based on the status of the\n * CreateInstallation request.\n *\n * Returns the updated InstallationEntry.\n */\nfunction updateInstallationRequest(\n  appConfig: AppConfig\n): Promise<InstallationEntry> {\n  return update(appConfig, oldEntry => {\n    if (!oldEntry) {\n      throw ERROR_FACTORY.create(ErrorCode.INSTALLATION_NOT_FOUND);\n    }\n    return clearTimedOutRequest(oldEntry);\n  });\n}\n\nfunction clearTimedOutRequest(entry: InstallationEntry): InstallationEntry {\n  if (hasInstallationRequestTimedOut(entry)) {\n    return {\n      fid: entry.fid,\n      registrationStatus: RequestStatus.NOT_STARTED\n    };\n  }\n\n  return entry;\n}\n\nfunction hasInstallationRequestTimedOut(\n  installationEntry: InstallationEntry\n): boolean {\n  return (\n    installationEntry.registrationStatus === RequestStatus.IN_PROGRESS &&\n    installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now()\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GenerateAuthTokenResponse } from '../interfaces/api-response';\nimport {\n  CompletedAuthToken,\n  RegisteredInstallationEntry\n} from '../interfaces/installation-entry';\nimport { PACKAGE_VERSION } from '../util/constants';\nimport {\n  extractAuthTokenInfoFromResponse,\n  getErrorFromResponse,\n  getHeadersWithAuth,\n  getInstallationsEndpoint,\n  retryIfServerError\n} from './common';\nimport {\n  FirebaseInstallationsImpl,\n  AppConfig\n} from '../interfaces/installation-impl';\n\nexport async function generateAuthTokenRequest(\n  { appConfig, platformLoggerProvider }: FirebaseInstallationsImpl,\n  installationEntry: RegisteredInstallationEntry\n): Promise<CompletedAuthToken> {\n  const endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\n\n  const headers = getHeadersWithAuth(appConfig, installationEntry);\n\n  // If platform logger exists, add the platform info string to the header.\n  const platformLogger = platformLoggerProvider.getImmediate({\n    optional: true\n  });\n  if (platformLogger) {\n    headers.append('x-firebase-client', platformLogger.getPlatformInfoString());\n  }\n\n  const body = {\n    installation: {\n      sdkVersion: PACKAGE_VERSION\n    }\n  };\n\n  const request: RequestInit = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(body)\n  };\n\n  const response = await retryIfServerError(() => fetch(endpoint, request));\n  if (response.ok) {\n    const responseValue: GenerateAuthTokenResponse = await response.json();\n    const completedAuthToken: CompletedAuthToken = extractAuthTokenInfoFromResponse(\n      responseValue\n    );\n    return completedAuthToken;\n  } else {\n    throw await getErrorFromResponse('Generate Auth Token', response);\n  }\n}\n\nfunction getGenerateAuthTokenEndpoint(\n  appConfig: AppConfig,\n  { fid }: RegisteredInstallationEntry\n): string {\n  return `${getInstallationsEndpoint(appConfig)}/${fid}/authTokens:generate`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { generateAuthTokenRequest } from '../functions/generate-auth-token-request';\nimport {\n  AppConfig,\n  FirebaseInstallationsImpl\n} from '../interfaces/installation-impl';\nimport {\n  AuthToken,\n  CompletedAuthToken,\n  InProgressAuthToken,\n  InstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { PENDING_TIMEOUT_MS, TOKEN_EXPIRATION_BUFFER } from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode, isServerError } from '../util/errors';\nimport { sleep } from '../util/sleep';\nimport { remove, set, update } from './idb-manager';\n\n/**\n * Returns a valid authentication token for the installation. Generates a new\n * token if one doesn't exist, is expired or about to expire.\n *\n * Should only be called if the Firebase Installation is registered.\n */\nexport async function refreshAuthToken(\n  installations: FirebaseInstallationsImpl,\n  forceRefresh = false\n): Promise<CompletedAuthToken> {\n  let tokenPromise: Promise<CompletedAuthToken> | undefined;\n  const entry = await update(installations.appConfig, oldEntry => {\n    if (!isEntryRegistered(oldEntry)) {\n      throw ERROR_FACTORY.create(ErrorCode.NOT_REGISTERED);\n    }\n\n    const oldAuthToken = oldEntry.authToken;\n    if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\n      // There is a valid token in the DB.\n      return oldEntry;\n    } else if (oldAuthToken.requestStatus === RequestStatus.IN_PROGRESS) {\n      // There already is a token request in progress.\n      tokenPromise = waitUntilAuthTokenRequest(installations, forceRefresh);\n      return oldEntry;\n    } else {\n      // No token or token expired.\n      if (!navigator.onLine) {\n        throw ERROR_FACTORY.create(ErrorCode.APP_OFFLINE);\n      }\n\n      const inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\n      tokenPromise = fetchAuthTokenFromServer(installations, inProgressEntry);\n      return inProgressEntry;\n    }\n  });\n\n  const authToken = tokenPromise\n    ? await tokenPromise\n    : (entry.authToken as CompletedAuthToken);\n  return authToken;\n}\n\n/**\n * Call only if FID is registered and Auth Token request is in progress.\n *\n * Waits until the current pending request finishes. If the request times out,\n * tries once in this thread as well.\n */\nasync function waitUntilAuthTokenRequest(\n  installations: FirebaseInstallationsImpl,\n  forceRefresh: boolean\n): Promise<CompletedAuthToken> {\n  // Unfortunately, there is no way of reliably observing when a value in\n  // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\n  // so we need to poll.\n\n  let entry = await updateAuthTokenRequest(installations.appConfig);\n  while (entry.authToken.requestStatus === RequestStatus.IN_PROGRESS) {\n    // generateAuthToken still in progress.\n    await sleep(100);\n\n    entry = await updateAuthTokenRequest(installations.appConfig);\n  }\n\n  const authToken = entry.authToken;\n  if (authToken.requestStatus === RequestStatus.NOT_STARTED) {\n    // The request timed out or failed in a different call. Try again.\n    return refreshAuthToken(installations, forceRefresh);\n  } else {\n    return authToken;\n  }\n}\n\n/**\n * Called only if there is a GenerateAuthToken request in progress.\n *\n * Updates the InstallationEntry in the DB based on the status of the\n * GenerateAuthToken request.\n *\n * Returns the updated InstallationEntry.\n */\nfunction updateAuthTokenRequest(\n  appConfig: AppConfig\n): Promise<RegisteredInstallationEntry> {\n  return update(appConfig, oldEntry => {\n    if (!isEntryRegistered(oldEntry)) {\n      throw ERROR_FACTORY.create(ErrorCode.NOT_REGISTERED);\n    }\n\n    const oldAuthToken = oldEntry.authToken;\n    if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\n      return {\n        ...oldEntry,\n        authToken: { requestStatus: RequestStatus.NOT_STARTED }\n      };\n    }\n\n    return oldEntry;\n  });\n}\n\nasync function fetchAuthTokenFromServer(\n  installations: FirebaseInstallationsImpl,\n  installationEntry: RegisteredInstallationEntry\n): Promise<CompletedAuthToken> {\n  try {\n    const authToken = await generateAuthTokenRequest(\n      installations,\n      installationEntry\n    );\n    const updatedInstallationEntry: RegisteredInstallationEntry = {\n      ...installationEntry,\n      authToken\n    };\n    await set(installations.appConfig, updatedInstallationEntry);\n    return authToken;\n  } catch (e) {\n    if (\n      isServerError(e) &&\n      (e.customData.serverCode === 401 || e.customData.serverCode === 404)\n    ) {\n      // Server returned a \"FID not found\" or a \"Invalid authentication\" error.\n      // Generate a new ID next time.\n      await remove(installations.appConfig);\n    } else {\n      const updatedInstallationEntry: RegisteredInstallationEntry = {\n        ...installationEntry,\n        authToken: { requestStatus: RequestStatus.NOT_STARTED }\n      };\n      await set(installations.appConfig, updatedInstallationEntry);\n    }\n    throw e;\n  }\n}\n\nfunction isEntryRegistered(\n  installationEntry: InstallationEntry | undefined\n): installationEntry is RegisteredInstallationEntry {\n  return (\n    installationEntry !== undefined &&\n    installationEntry.registrationStatus === RequestStatus.COMPLETED\n  );\n}\n\nfunction isAuthTokenValid(authToken: AuthToken): boolean {\n  return (\n    authToken.requestStatus === RequestStatus.COMPLETED &&\n    !isAuthTokenExpired(authToken)\n  );\n}\n\nfunction isAuthTokenExpired(authToken: CompletedAuthToken): boolean {\n  const now = Date.now();\n  return (\n    now < authToken.creationTime ||\n    authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER\n  );\n}\n\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\nfunction makeAuthTokenRequestInProgressEntry(\n  oldEntry: RegisteredInstallationEntry\n): RegisteredInstallationEntry {\n  const inProgressAuthToken: InProgressAuthToken = {\n    requestStatus: RequestStatus.IN_PROGRESS,\n    requestTime: Date.now()\n  };\n  return {\n    ...oldEntry,\n    authToken: inProgressAuthToken\n  };\n}\n\nfunction hasAuthTokenRequestTimedOut(authToken: AuthToken): boolean {\n  return (\n    authToken.requestStatus === RequestStatus.IN_PROGRESS &&\n    authToken.requestTime + PENDING_TIMEOUT_MS < Date.now()\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getInstallationEntry } from '../helpers/get-installation-entry';\nimport { refreshAuthToken } from '../helpers/refresh-auth-token';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * Creates a Firebase Installation if there isn't one for the app and\n * returns the Installation ID.\n * @param installations - The `Installations` instance.\n *\n * @public\n */\nexport async function getId(installations: Installations): Promise<string> {\n  const installationsImpl = installations as FirebaseInstallationsImpl;\n  const { installationEntry, registrationPromise } = await getInstallationEntry(\n    installationsImpl.appConfig\n  );\n\n  if (registrationPromise) {\n    registrationPromise.catch(console.error);\n  } else {\n    // If the installation is already registered, update the authentication\n    // token if needed.\n    refreshAuthToken(installationsImpl).catch(console.error);\n  }\n\n  return installationEntry.fid;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getInstallationEntry } from '../helpers/get-installation-entry';\nimport { refreshAuthToken } from '../helpers/refresh-auth-token';\nimport {\n  FirebaseInstallationsImpl,\n  AppConfig\n} from '../interfaces/installation-impl';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * Returns a Firebase Installations auth token, identifying the current\n * Firebase Installation.\n * @param installations - The `Installations` instance.\n * @param forceRefresh - Force refresh regardless of token expiration.\n *\n * @public\n */\nexport async function getToken(\n  installations: Installations,\n  forceRefresh = false\n): Promise<string> {\n  const installationsImpl = installations as FirebaseInstallationsImpl;\n  await completeInstallationRegistration(installationsImpl.appConfig);\n\n  // At this point we either have a Registered Installation in the DB, or we've\n  // already thrown an error.\n  const authToken = await refreshAuthToken(installationsImpl, forceRefresh);\n  return authToken.token;\n}\n\nasync function completeInstallationRegistration(\n  appConfig: AppConfig\n): Promise<void> {\n  const { registrationPromise } = await getInstallationEntry(appConfig);\n\n  if (registrationPromise) {\n    // A createInstallation request is in progress. Wait until it finishes.\n    await registrationPromise;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\nimport { FirebaseApp, FirebaseOptions } from '@firebase/app';\n\nimport { AppConfig } from '../interfaces/app-config';\nimport { FirebaseError } from '@firebase/util';\n\nexport function extractAppConfig(app: FirebaseApp): AppConfig {\n  if (!app || !app.options) {\n    throw getMissingValueError('App Configuration Object');\n  }\n\n  if (!app.name) {\n    throw getMissingValueError('App Name');\n  }\n\n  // Required app config keys\n  const configKeys: ReadonlyArray<keyof FirebaseOptions> = [\n    'projectId',\n    'apiKey',\n    'appId',\n    'messagingSenderId'\n  ];\n\n  const { options } = app;\n  for (const keyName of configKeys) {\n    if (!options[keyName]) {\n      throw getMissingValueError(keyName);\n    }\n  }\n\n  return {\n    appName: app.name,\n    projectId: options.projectId!,\n    apiKey: options.apiKey!,\n    appId: options.appId!,\n    senderId: options.messagingSenderId!\n  };\n}\n\nfunction getMissingValueError(valueName: string): FirebaseError {\n  return ERROR_FACTORY.create(ErrorCode.MISSING_APP_CONFIG_VALUES, {\n    valueName\n  });\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _registerComponent, _getProvider } from '@firebase/app';\nimport {\n  Component,\n  ComponentType,\n  InstanceFactory,\n  ComponentContainer\n} from '@firebase/component';\nimport { getId, getToken } from '../api/index';\nimport { _FirebaseInstallationsInternal } from '../interfaces/public-types';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { extractAppConfig } from '../helpers/extract-app-config';\n\nconst INSTALLATIONS_NAME = 'installations';\nconst INSTALLATIONS_NAME_INTERNAL = 'installations-internal';\n\nconst publicFactory: InstanceFactory<'installations'> = (\n  container: ComponentContainer\n) => {\n  const app = container.getProvider('app').getImmediate();\n  // Throws if app isn't configured properly.\n  const appConfig = extractAppConfig(app);\n  const platformLoggerProvider = _getProvider(app, 'platform-logger');\n\n  const installationsImpl: FirebaseInstallationsImpl = {\n    app,\n    appConfig,\n    platformLoggerProvider,\n    _delete: () => Promise.resolve()\n  };\n  return installationsImpl;\n};\n\nconst internalFactory: InstanceFactory<'installations-internal'> = (\n  container: ComponentContainer\n) => {\n  const app = container.getProvider('app').getImmediate();\n  // Internal FIS instance relies on public FIS instance.\n  const installations = _getProvider(app, INSTALLATIONS_NAME).getImmediate();\n\n  const installationsInternal: _FirebaseInstallationsInternal = {\n    getId: () => getId(installations),\n    getToken: (forceRefresh?: boolean) => getToken(installations, forceRefresh)\n  };\n  return installationsInternal;\n};\n\nexport function registerInstallations(): void {\n  _registerComponent(\n    new Component(INSTALLATIONS_NAME, publicFactory, ComponentType.PUBLIC)\n  );\n  _registerComponent(\n    new Component(\n      INSTALLATIONS_NAME_INTERNAL,\n      internalFactory,\n      ComponentType.PRIVATE\n    )\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { name, version } from '../package.json';\n\nimport firebase from '@firebase/app-compat';\nimport { registerMessagingCompat } from './registerMessagingCompat';\nimport { MessagingCompat } from './messaging-compat';\n\nregisterMessagingCompat();\nfirebase.registerVersion(name, version);\n\n/**\n * Define extension behavior of `registerMessaging`\n */\ndeclare module '@firebase/app-compat' {\n  interface FirebaseNamespace {\n    messaging: {\n      (app?: FirebaseApp): MessagingCompat;\n      isSupported(): boolean;\n    };\n  }\n  interface FirebaseApp {\n    messaging(): MessagingCompat;\n  }\n}\n","/**\n * @license\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License. You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under the License\n * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n * or implied. See the License for the specific language governing permissions and limitations under\n * the License.\n */\n\nimport {\n  CONSOLE_CAMPAIGN_ANALYTICS_ENABLED,\n  CONSOLE_CAMPAIGN_ID,\n  CONSOLE_CAMPAIGN_NAME,\n  CONSOLE_CAMPAIGN_TIME\n} from '../util/constants';\n\nexport interface MessagePayloadInternal {\n  notification?: NotificationPayloadInternal;\n  data?: unknown;\n  fcmOptions?: FcmOptionsInternal;\n  messageType?: MessageType;\n  isFirebaseMessaging?: boolean;\n  from: string;\n  // eslint-disable-next-line camelcase\n  collapse_key: string;\n  // eslint-disable-next-line camelcase\n  fcm_message_id: string;\n}\n\nexport interface NotificationPayloadInternal extends NotificationOptions {\n  title: string;\n  // Supported in the Legacy Send API.\n  // See:https://firebase.google.com/docs/cloud-messaging/xmpp-server-ref.\n  // eslint-disable-next-line camelcase\n  click_action?: string;\n}\n\n// Defined in\n// https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages#webpushfcmoptions. Note\n// that the keys are sent to the clients in snake cases which we need to convert to camel so it can\n// be exposed as a type to match the Firebase API convention.\nexport interface FcmOptionsInternal {\n  link?: string;\n\n  // eslint-disable-next-line camelcase\n  analytics_label?: string;\n}\n\nexport enum MessageType {\n  PUSH_RECEIVED = 'push-received',\n  NOTIFICATION_CLICKED = 'notification-clicked'\n}\n\n/** Additional data of a message sent from the FN Console. */\nexport interface ConsoleMessageData {\n  [CONSOLE_CAMPAIGN_ID]: string;\n  [CONSOLE_CAMPAIGN_TIME]: string;\n  [CONSOLE_CAMPAIGN_NAME]?: string;\n  [CONSOLE_CAMPAIGN_ANALYTICS_ENABLED]?: '1';\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function arrayToBase64(array: Uint8Array | ArrayBuffer): string {\n  const uint8Array = new Uint8Array(array);\n  const base64String = btoa(String.fromCharCode(...uint8Array));\n  return base64String.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n\nexport function base64ToArray(base64String: string): Uint8Array {\n  const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding)\n    .replace(/\\-/g, '+')\n    .replace(/_/g, '/');\n\n  const rawData = atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { deleteDb, openDb } from 'idb';\n\nimport { TokenDetails } from '../interfaces/token-details';\nimport { arrayToBase64 } from './array-base64-translator';\n\n// https://github.com/firebase/firebase-js-sdk/blob/7857c212f944a2a9eb421fd4cb7370181bc034b5/packages/messaging/src/interfaces/token-details.ts\nexport interface V2TokenDetails {\n  fcmToken: string;\n  swScope: string;\n  vapidKey: string | Uint8Array;\n  subscription: PushSubscription;\n  fcmSenderId: string;\n  fcmPushSet: string;\n  createTime?: number;\n  endpoint?: string;\n  auth?: string;\n  p256dh?: string;\n}\n\n// https://github.com/firebase/firebase-js-sdk/blob/6b5b15ce4ea3df5df5df8a8b33a4e41e249c7715/packages/messaging/src/interfaces/token-details.ts\nexport interface V3TokenDetails {\n  fcmToken: string;\n  swScope: string;\n  vapidKey: Uint8Array;\n  fcmSenderId: string;\n  fcmPushSet: string;\n  endpoint: string;\n  auth: ArrayBuffer;\n  p256dh: ArrayBuffer;\n  createTime: number;\n}\n\n// https://github.com/firebase/firebase-js-sdk/blob/9567dba664732f681fa7fe60f5b7032bb1daf4c9/packages/messaging/src/interfaces/token-details.ts\nexport interface V4TokenDetails {\n  fcmToken: string;\n  swScope: string;\n  vapidKey: Uint8Array;\n  fcmSenderId: string;\n  endpoint: string;\n  auth: ArrayBufferLike;\n  p256dh: ArrayBufferLike;\n  createTime: number;\n}\n\nconst OLD_DB_NAME = 'fcm_token_details_db';\n/**\n * The last DB version of 'fcm_token_details_db' was 4. This is one higher, so that the upgrade\n * callback is called for all versions of the old DB.\n */\nconst OLD_DB_VERSION = 5;\nconst OLD_OBJECT_STORE_NAME = 'fcm_token_object_Store';\n\nexport async function migrateOldDatabase(\n  senderId: string\n): Promise<TokenDetails | null> {\n  if ('databases' in indexedDB) {\n    // indexedDb.databases() is an IndexedDB v3 API and does not exist in all browsers. TODO: Remove\n    // typecast when it lands in TS types.\n    const databases = await (indexedDB as {\n      databases(): Promise<Array<{ name: string; version: number }>>;\n    }).databases();\n    const dbNames = databases.map(db => db.name);\n\n    if (!dbNames.includes(OLD_DB_NAME)) {\n      // old DB didn't exist, no need to open.\n      return null;\n    }\n  }\n\n  let tokenDetails: TokenDetails | null = null;\n\n  const db = await openDb(OLD_DB_NAME, OLD_DB_VERSION, async db => {\n    if (db.oldVersion < 2) {\n      // Database too old, skip migration.\n      return;\n    }\n\n    if (!db.objectStoreNames.contains(OLD_OBJECT_STORE_NAME)) {\n      // Database did not exist. Nothing to do.\n      return;\n    }\n\n    const objectStore = db.transaction.objectStore(OLD_OBJECT_STORE_NAME);\n    const value = await objectStore.index('fcmSenderId').get(senderId);\n    await objectStore.clear();\n\n    if (!value) {\n      // No entry in the database, nothing to migrate.\n      return;\n    }\n\n    if (db.oldVersion === 2) {\n      const oldDetails = value as V2TokenDetails;\n\n      if (!oldDetails.auth || !oldDetails.p256dh || !oldDetails.endpoint) {\n        return;\n      }\n\n      tokenDetails = {\n        token: oldDetails.fcmToken,\n        createTime: oldDetails.createTime ?? Date.now(),\n        subscriptionOptions: {\n          auth: oldDetails.auth,\n          p256dh: oldDetails.p256dh,\n          endpoint: oldDetails.endpoint,\n          swScope: oldDetails.swScope,\n          vapidKey:\n            typeof oldDetails.vapidKey === 'string'\n              ? oldDetails.vapidKey\n              : arrayToBase64(oldDetails.vapidKey)\n        }\n      };\n    } else if (db.oldVersion === 3) {\n      const oldDetails = value as V3TokenDetails;\n\n      tokenDetails = {\n        token: oldDetails.fcmToken,\n        createTime: oldDetails.createTime,\n        subscriptionOptions: {\n          auth: arrayToBase64(oldDetails.auth),\n          p256dh: arrayToBase64(oldDetails.p256dh),\n          endpoint: oldDetails.endpoint,\n          swScope: oldDetails.swScope,\n          vapidKey: arrayToBase64(oldDetails.vapidKey)\n        }\n      };\n    } else if (db.oldVersion === 4) {\n      const oldDetails = value as V4TokenDetails;\n\n      tokenDetails = {\n        token: oldDetails.fcmToken,\n        createTime: oldDetails.createTime,\n        subscriptionOptions: {\n          auth: arrayToBase64(oldDetails.auth),\n          p256dh: arrayToBase64(oldDetails.p256dh),\n          endpoint: oldDetails.endpoint,\n          swScope: oldDetails.swScope,\n          vapidKey: arrayToBase64(oldDetails.vapidKey)\n        }\n      };\n    }\n  });\n  db.close();\n\n  // Delete all old databases.\n  await deleteDb(OLD_DB_NAME);\n  await deleteDb('fcm_vapid_details_db');\n  await deleteDb('undefined');\n\n  return checkTokenDetails(tokenDetails) ? tokenDetails : null;\n}\n\nfunction checkTokenDetails(\n  tokenDetails: TokenDetails | null\n): tokenDetails is TokenDetails {\n  if (!tokenDetails || !tokenDetails.subscriptionOptions) {\n    return false;\n  }\n  const { subscriptionOptions } = tokenDetails;\n  return (\n    typeof tokenDetails.createTime === 'number' &&\n    tokenDetails.createTime > 0 &&\n    typeof tokenDetails.token === 'string' &&\n    tokenDetails.token.length > 0 &&\n    typeof subscriptionOptions.auth === 'string' &&\n    subscriptionOptions.auth.length > 0 &&\n    typeof subscriptionOptions.p256dh === 'string' &&\n    subscriptionOptions.p256dh.length > 0 &&\n    typeof subscriptionOptions.endpoint === 'string' &&\n    subscriptionOptions.endpoint.length > 0 &&\n    typeof subscriptionOptions.swScope === 'string' &&\n    subscriptionOptions.swScope.length > 0 &&\n    typeof subscriptionOptions.vapidKey === 'string' &&\n    subscriptionOptions.vapidKey.length > 0\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DB, deleteDb, openDb } from 'idb';\n\nimport { FirebaseInternalDependencies } from '../interfaces/internal-dependencies';\nimport { TokenDetails } from '../interfaces/token-details';\nimport { migrateOldDatabase } from '../helpers/migrate-old-database';\n\n// Exported for tests.\nexport const DATABASE_NAME = 'firebase-messaging-database';\nconst DATABASE_VERSION = 1;\nconst OBJECT_STORE_NAME = 'firebase-messaging-store';\n\nlet dbPromise: Promise<DB> | null = null;\nfunction getDbPromise(): Promise<DB> {\n  if (!dbPromise) {\n    dbPromise = openDb(DATABASE_NAME, DATABASE_VERSION, upgradeDb => {\n      // We don't use 'break' in this switch statement, the fall-through behavior is what we want,\n      // because if there are multiple versions between the old version and the current version, we\n      // want ALL the migrations that correspond to those versions to run, not only the last one.\n      // eslint-disable-next-line default-case\n      switch (upgradeDb.oldVersion) {\n        case 0:\n          upgradeDb.createObjectStore(OBJECT_STORE_NAME);\n      }\n    });\n  }\n  return dbPromise;\n}\n\n/** Gets record(s) from the objectStore that match the given key. */\nexport async function dbGet(\n  firebaseDependencies: FirebaseInternalDependencies\n): Promise<TokenDetails | undefined> {\n  const key = getKey(firebaseDependencies);\n  const db = await getDbPromise();\n  const tokenDetails = await db\n    .transaction(OBJECT_STORE_NAME)\n    .objectStore(OBJECT_STORE_NAME)\n    .get(key);\n\n  if (tokenDetails) {\n    return tokenDetails;\n  } else {\n    // Check if there is a tokenDetails object in the old DB.\n    const oldTokenDetails = await migrateOldDatabase(\n      firebaseDependencies.appConfig.senderId\n    );\n    if (oldTokenDetails) {\n      await dbSet(firebaseDependencies, oldTokenDetails);\n      return oldTokenDetails;\n    }\n  }\n}\n\n/** Assigns or overwrites the record for the given key with the given value. */\nexport async function dbSet(\n  firebaseDependencies: FirebaseInternalDependencies,\n  tokenDetails: TokenDetails\n): Promise<TokenDetails> {\n  const key = getKey(firebaseDependencies);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  await tx.objectStore(OBJECT_STORE_NAME).put(tokenDetails, key);\n  await tx.complete;\n  return tokenDetails;\n}\n\n/** Removes record(s) from the objectStore that match the given key. */\nexport async function dbRemove(\n  firebaseDependencies: FirebaseInternalDependencies\n): Promise<void> {\n  const key = getKey(firebaseDependencies);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  await tx.objectStore(OBJECT_STORE_NAME).delete(key);\n  await tx.complete;\n}\n\n/** Deletes the DB. Useful for tests. */\nexport async function dbDelete(): Promise<void> {\n  if (dbPromise) {\n    (await dbPromise).close();\n    await deleteDb(DATABASE_NAME);\n    dbPromise = null;\n  }\n}\n\nfunction getKey({ appConfig }: FirebaseInternalDependencies): string {\n  return appConfig.appId;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DEFAULT_VAPID_KEY, ENDPOINT } from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\nimport { SubscriptionOptions, TokenDetails } from '../interfaces/token-details';\n\nimport { AppConfig } from '../interfaces/app-config';\nimport { FirebaseInternalDependencies } from '../interfaces/internal-dependencies';\n\nexport interface ApiResponse {\n  token?: string;\n  error?: { message: string };\n}\n\nexport interface ApiRequestBody {\n  web: {\n    endpoint: string;\n    p256dh: string;\n    auth: string;\n    applicationPubKey?: string;\n  };\n}\n\nexport async function requestGetToken(\n  firebaseDependencies: FirebaseInternalDependencies,\n  subscriptionOptions: SubscriptionOptions\n): Promise<string> {\n  const headers = await getHeaders(firebaseDependencies);\n  const body = getBody(subscriptionOptions);\n\n  const subscribeOptions = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(body)\n  };\n\n  let responseData: ApiResponse;\n  try {\n    const response = await fetch(\n      getEndpoint(firebaseDependencies.appConfig),\n      subscribeOptions\n    );\n    responseData = await response.json();\n  } catch (err) {\n    throw ERROR_FACTORY.create(ErrorCode.TOKEN_SUBSCRIBE_FAILED, {\n      errorInfo: err\n    });\n  }\n\n  if (responseData.error) {\n    const message = responseData.error.message;\n    throw ERROR_FACTORY.create(ErrorCode.TOKEN_SUBSCRIBE_FAILED, {\n      errorInfo: message\n    });\n  }\n\n  if (!responseData.token) {\n    throw ERROR_FACTORY.create(ErrorCode.TOKEN_SUBSCRIBE_NO_TOKEN);\n  }\n\n  return responseData.token;\n}\n\nexport async function requestUpdateToken(\n  firebaseDependencies: FirebaseInternalDependencies,\n  tokenDetails: TokenDetails\n): Promise<string> {\n  const headers = await getHeaders(firebaseDependencies);\n  const body = getBody(tokenDetails.subscriptionOptions!);\n\n  const updateOptions = {\n    method: 'PATCH',\n    headers,\n    body: JSON.stringify(body)\n  };\n\n  let responseData: ApiResponse;\n  try {\n    const response = await fetch(\n      `${getEndpoint(firebaseDependencies.appConfig)}/${tokenDetails.token}`,\n      updateOptions\n    );\n    responseData = await response.json();\n  } catch (err) {\n    throw ERROR_FACTORY.create(ErrorCode.TOKEN_UPDATE_FAILED, {\n      errorInfo: err\n    });\n  }\n\n  if (responseData.error) {\n    const message = responseData.error.message;\n    throw ERROR_FACTORY.create(ErrorCode.TOKEN_UPDATE_FAILED, {\n      errorInfo: message\n    });\n  }\n\n  if (!responseData.token) {\n    throw ERROR_FACTORY.create(ErrorCode.TOKEN_UPDATE_NO_TOKEN);\n  }\n\n  return responseData.token;\n}\n\nexport async function requestDeleteToken(\n  firebaseDependencies: FirebaseInternalDependencies,\n  token: string\n): Promise<void> {\n  const headers = await getHeaders(firebaseDependencies);\n\n  const unsubscribeOptions = {\n    method: 'DELETE',\n    headers\n  };\n\n  try {\n    const response = await fetch(\n      `${getEndpoint(firebaseDependencies.appConfig)}/${token}`,\n      unsubscribeOptions\n    );\n    const responseData: ApiResponse = await response.json();\n    if (responseData.error) {\n      const message = responseData.error.message;\n      throw ERROR_FACTORY.create(ErrorCode.TOKEN_UNSUBSCRIBE_FAILED, {\n        errorInfo: message\n      });\n    }\n  } catch (err) {\n    throw ERROR_FACTORY.create(ErrorCode.TOKEN_UNSUBSCRIBE_FAILED, {\n      errorInfo: err\n    });\n  }\n}\n\nfunction getEndpoint({ projectId }: AppConfig): string {\n  return `${ENDPOINT}/projects/${projectId!}/registrations`;\n}\n\nasync function getHeaders({\n  appConfig,\n  installations\n}: FirebaseInternalDependencies): Promise<Headers> {\n  const authToken = await installations.getToken();\n\n  return new Headers({\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n    'x-goog-api-key': appConfig.apiKey!,\n    'x-goog-firebase-installations-auth': `FIS ${authToken}`\n  });\n}\n\nfunction getBody({\n  p256dh,\n  auth,\n  endpoint,\n  vapidKey\n}: SubscriptionOptions): ApiRequestBody {\n  const body: ApiRequestBody = {\n    web: {\n      endpoint,\n      auth,\n      p256dh\n    }\n  };\n\n  if (vapidKey !== DEFAULT_VAPID_KEY) {\n    body.web.applicationPubKey = vapidKey;\n  }\n\n  return body;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SubscriptionOptions, TokenDetails } from '../interfaces/token-details';\nimport {\n  arrayToBase64,\n  base64ToArray\n} from '../helpers/array-base64-translator';\nimport { dbGet, dbRemove, dbSet } from './idb-manager';\nimport {\n  requestDeleteToken,\n  requestGetToken,\n  requestUpdateToken\n} from './requests';\n\nimport { FirebaseInternalDependencies } from '../interfaces/internal-dependencies';\nimport { MessagingService } from '../messaging-service';\n\n// UpdateRegistration will be called once every week.\nconst TOKEN_EXPIRATION_MS = 7 * 24 * 60 * 60 * 1000; // 7 days\n\nexport async function getTokenInternal(\n  messaging: MessagingService\n): Promise<string> {\n  const pushSubscription = await getPushSubscription(\n    messaging.swRegistration!,\n    messaging.vapidKey!\n  );\n\n  const subscriptionOptions: SubscriptionOptions = {\n    vapidKey: messaging.vapidKey!,\n    swScope: messaging.swRegistration!.scope,\n    endpoint: pushSubscription.endpoint,\n    auth: arrayToBase64(pushSubscription.getKey('auth')!),\n    p256dh: arrayToBase64(pushSubscription.getKey('p256dh')!)\n  };\n\n  const tokenDetails = await dbGet(messaging.firebaseDependencies);\n  if (!tokenDetails) {\n    // No token, get a new one.\n    return getNewToken(messaging.firebaseDependencies, subscriptionOptions);\n  } else if (\n    !isTokenValid(tokenDetails.subscriptionOptions!, subscriptionOptions)\n  ) {\n    // Invalid token, get a new one.\n    try {\n      await requestDeleteToken(\n        messaging.firebaseDependencies!,\n        tokenDetails.token\n      );\n    } catch (e) {\n      // Suppress errors because of #2364\n      console.warn(e);\n    }\n\n    return getNewToken(messaging.firebaseDependencies!, subscriptionOptions);\n  } else if (Date.now() >= tokenDetails.createTime + TOKEN_EXPIRATION_MS) {\n    // Weekly token refresh\n    return updateToken(messaging, {\n      token: tokenDetails.token,\n      createTime: Date.now(),\n      subscriptionOptions\n    });\n  } else {\n    // Valid token, nothing to do.\n    return tokenDetails.token;\n  }\n}\n\n/**\n * This method deletes the token from the database, unsubscribes the token from FCM, and unregisters\n * the push subscription if it exists.\n */\nexport async function deleteTokenInternal(\n  messaging: MessagingService\n): Promise<boolean> {\n  const tokenDetails = await dbGet(messaging.firebaseDependencies);\n  if (tokenDetails) {\n    await requestDeleteToken(\n      messaging.firebaseDependencies,\n      tokenDetails.token\n    );\n    await dbRemove(messaging.firebaseDependencies);\n  }\n\n  // Unsubscribe from the push subscription.\n  const pushSubscription = await messaging.swRegistration!.pushManager.getSubscription();\n  if (pushSubscription) {\n    return pushSubscription.unsubscribe();\n  }\n\n  // If there's no SW, consider it a success.\n  return true;\n}\n\nasync function updateToken(\n  messaging: MessagingService,\n  tokenDetails: TokenDetails\n): Promise<string> {\n  try {\n    const updatedToken = await requestUpdateToken(\n      messaging.firebaseDependencies,\n      tokenDetails\n    );\n\n    const updatedTokenDetails: TokenDetails = {\n      ...tokenDetails,\n      token: updatedToken,\n      createTime: Date.now()\n    };\n\n    await dbSet(messaging.firebaseDependencies, updatedTokenDetails);\n    return updatedToken;\n  } catch (e) {\n    await deleteTokenInternal(messaging);\n    throw e;\n  }\n}\n\nasync function getNewToken(\n  firebaseDependencies: FirebaseInternalDependencies,\n  subscriptionOptions: SubscriptionOptions\n): Promise<string> {\n  const token = await requestGetToken(\n    firebaseDependencies,\n    subscriptionOptions\n  );\n  const tokenDetails: TokenDetails = {\n    token,\n    createTime: Date.now(),\n    subscriptionOptions\n  };\n  await dbSet(firebaseDependencies, tokenDetails);\n  return tokenDetails.token;\n}\n\n/**\n * Gets a PushSubscription for the current user.\n */\nasync function getPushSubscription(\n  swRegistration: ServiceWorkerRegistration,\n  vapidKey: string\n): Promise<PushSubscription> {\n  const subscription = await swRegistration.pushManager.getSubscription();\n  if (subscription) {\n    return subscription;\n  }\n\n  return swRegistration.pushManager.subscribe({\n    userVisibleOnly: true,\n    // Chrome <= 75 doesn't support base64-encoded VAPID key. For backward compatibility, VAPID key\n    // submitted to pushManager#subscribe must be of type Uint8Array.\n    applicationServerKey: base64ToArray(vapidKey)\n  });\n}\n\n/**\n * Checks if the saved tokenDetails object matches the configuration provided.\n */\nfunction isTokenValid(\n  dbOptions: SubscriptionOptions,\n  currentOptions: SubscriptionOptions\n): boolean {\n  const isVapidKeyEqual = currentOptions.vapidKey === dbOptions.vapidKey;\n  const isEndpointEqual = currentOptions.endpoint === dbOptions.endpoint;\n  const isAuthEqual = currentOptions.auth === dbOptions.auth;\n  const isP256dhEqual = currentOptions.p256dh === dbOptions.p256dh;\n\n  return isVapidKeyEqual && isEndpointEqual && isAuthEqual && isP256dhEqual;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MessagePayload } from '../interfaces/public-types';\nimport { MessagePayloadInternal } from '../interfaces/internal-message-payload';\n\nexport function externalizePayload(\n  internalPayload: MessagePayloadInternal\n): MessagePayload {\n  const payload: MessagePayload = {\n    from: internalPayload.from,\n    // eslint-disable-next-line camelcase\n    collapseKey: internalPayload.collapse_key,\n    // eslint-disable-next-line camelcase\n    messageId: internalPayload.fcm_message_id\n  } as MessagePayload;\n\n  propagateNotificationPayload(payload, internalPayload);\n  propagateDataPayload(payload, internalPayload);\n  propagateFcmOptions(payload, internalPayload);\n\n  return payload;\n}\n\nfunction propagateNotificationPayload(\n  payload: MessagePayload,\n  messagePayloadInternal: MessagePayloadInternal\n): void {\n  if (!messagePayloadInternal.notification) {\n    return;\n  }\n\n  payload.notification = {};\n\n  const title = messagePayloadInternal.notification!.title;\n  if (!!title) {\n    payload.notification!.title = title;\n  }\n\n  const body = messagePayloadInternal.notification!.body;\n  if (!!body) {\n    payload.notification!.body = body;\n  }\n\n  const image = messagePayloadInternal.notification!.image;\n  if (!!image) {\n    payload.notification!.image = image;\n  }\n}\n\nfunction propagateDataPayload(\n  payload: MessagePayload,\n  messagePayloadInternal: MessagePayloadInternal\n): void {\n  if (!messagePayloadInternal.data) {\n    return;\n  }\n\n  payload.data = messagePayloadInternal.data as { [key: string]: string };\n}\n\nfunction propagateFcmOptions(\n  payload: MessagePayload,\n  messagePayloadInternal: MessagePayloadInternal\n): void {\n  if (!messagePayloadInternal.fcmOptions) {\n    return;\n  }\n\n  payload.fcmOptions = {};\n\n  const link = messagePayloadInternal.fcmOptions!.link;\n  if (!!link) {\n    payload.fcmOptions!.link = link;\n  }\n\n  // eslint-disable-next-line camelcase\n  const analyticsLabel = messagePayloadInternal.fcmOptions!.analytics_label;\n  if (!!analyticsLabel) {\n    payload.fcmOptions!.analyticsLabel = analyticsLabel;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSOLE_CAMPAIGN_ID } from '../util/constants';\nimport { ConsoleMessageData } from '../interfaces/internal-message-payload';\n\nexport function isConsoleMessage(data: unknown): data is ConsoleMessageData {\n  // This message has a campaign ID, meaning it was sent using the Firebase Console.\n  return typeof data === 'object' && !!data && CONSOLE_CAMPAIGN_ID in data;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  DEFAULT_BACKOFF_TIME_MS,\n  EVENT_MESSAGE_DELIVERED,\n  FCM_LOG_SOURCE,\n  LOG_INTERVAL_IN_MS,\n  MAX_NUMBER_OF_EVENTS_PER_LOG_REQUEST,\n  MAX_RETRIES,\n  MessageType,\n  SDK_PLATFORM_WEB\n} from '../util/constants';\nimport {\n  FcmEvent,\n  LogEvent,\n  LogRequest,\n  LogResponse\n} from '../interfaces/logging-types';\n\nimport { MessagePayloadInternal } from '../interfaces/internal-message-payload';\nimport { MessagingService } from '../messaging-service';\n\nconst FIRELOG_ENDPOINT = _mergeStrings(\n  'hts/frbslgigp.ogepscmv/ieo/eaylg',\n  'tp:/ieaeogn-agolai.o/1frlglgc/o'\n);\n\nconst FCM_TRANSPORT_KEY = _mergeStrings(\n  'AzSCbw63g1R0nCw85jG8',\n  'Iaya3yLKwmgvh7cF0q4'\n);\n\nexport function startLoggingService(messaging: MessagingService): void {\n  if (!messaging.isLogServiceStarted) {\n    _processQueue(messaging, LOG_INTERVAL_IN_MS);\n    messaging.isLogServiceStarted = true;\n  }\n}\n\n/**\n *\n * @param messaging the messaging instance.\n * @param offsetInMs this method execute after `offsetInMs` elapsed .\n */\nexport function _processQueue(\n  messaging: MessagingService,\n  offsetInMs: number\n): void {\n  setTimeout(async () => {\n    if (!messaging.deliveryMetricsExportedToBigQueryEnabled) {\n      // flush events and terminate logging service\n      messaging.logEvents = [];\n      messaging.isLogServiceStarted = false;\n\n      return;\n    }\n\n    if (!messaging.logEvents.length) {\n      return _processQueue(messaging, LOG_INTERVAL_IN_MS);\n    }\n\n    await _dispatchLogEvents(messaging);\n  }, offsetInMs);\n}\n\nexport async function _dispatchLogEvents(\n  messaging: MessagingService\n): Promise<void> {\n  for (\n    let i = 0, n = messaging.logEvents.length;\n    i < n;\n    i += MAX_NUMBER_OF_EVENTS_PER_LOG_REQUEST\n  ) {\n    const logRequest = _createLogRequest(\n      messaging.logEvents.slice(i, i + MAX_NUMBER_OF_EVENTS_PER_LOG_REQUEST)\n    );\n\n    let retryCount = 0,\n      response = {} as Response;\n\n    do {\n      try {\n        response = await fetch(\n          FIRELOG_ENDPOINT.concat('?key=', FCM_TRANSPORT_KEY),\n          {\n            method: 'POST',\n            body: JSON.stringify(logRequest)\n          }\n        );\n\n        // don't retry on 200s or non retriable errors\n        if (response.ok || (!response.ok && !isRetriableError(response))) {\n          break;\n        }\n\n        if (!response.ok && isRetriableError(response)) {\n          // rethrow to retry with quota\n          throw new Error(\n            'a retriable Non-200 code is returned in fetch to Firelog endpoint. Retry'\n          );\n        }\n      } catch (error) {\n        const isLastAttempt = retryCount === MAX_RETRIES;\n        if (isLastAttempt) {\n          // existing the do-while interactive retry logic because retry quota has reached.\n          break;\n        }\n      }\n\n      let delayInMs: number;\n      try {\n        delayInMs = Number(\n          ((await response.json()) as LogResponse).nextRequestWaitMillis\n        );\n      } catch (e) {\n        delayInMs = DEFAULT_BACKOFF_TIME_MS;\n      }\n\n      await new Promise(resolve => setTimeout(resolve, delayInMs));\n\n      retryCount++;\n    } while (retryCount < MAX_RETRIES);\n  }\n\n  messaging.logEvents = [];\n  // schedule for next logging\n  _processQueue(messaging, LOG_INTERVAL_IN_MS);\n}\n\nfunction isRetriableError(response: Response): boolean {\n  const httpStatus = response.status;\n\n  return (\n    httpStatus === 429 ||\n    httpStatus === 500 ||\n    httpStatus === 503 ||\n    httpStatus === 504\n  );\n}\n\nexport async function stageLog(\n  messaging: MessagingService,\n  internalPayload: MessagePayloadInternal\n): Promise<void> {\n  const fcmEvent = createFcmEvent(\n    internalPayload,\n    await messaging.firebaseDependencies.installations.getId()\n  );\n\n  createAndEnqueueLogEvent(messaging, fcmEvent);\n}\n\nfunction createFcmEvent(\n  internalPayload: MessagePayloadInternal,\n  fid: string\n): FcmEvent {\n  const fcmEvent = {} as FcmEvent;\n\n  /* eslint-disable camelcase */\n  // some fields should always be non-null. Still check to ensure.\n  if (!!internalPayload.from) {\n    fcmEvent.project_number = internalPayload.from;\n  }\n\n  if (!!internalPayload.fcm_message_id) {\n    fcmEvent.message_id = internalPayload.fcm_message_id;\n  }\n\n  fcmEvent.instance_id = fid;\n\n  if (!!internalPayload.notification) {\n    fcmEvent.message_type = MessageType.DISPLAY_NOTIFICATION.toString();\n  } else {\n    fcmEvent.message_type = MessageType.DATA_MESSAGE.toString();\n  }\n\n  fcmEvent.sdk_platform = SDK_PLATFORM_WEB.toString();\n  fcmEvent.package_name = self.origin.replace(/(^\\w+:|^)\\/\\//, '');\n\n  if (!!internalPayload.collapse_key) {\n    fcmEvent.collapse_key = internalPayload.collapse_key;\n  }\n\n  fcmEvent.event = EVENT_MESSAGE_DELIVERED.toString();\n\n  if (!!internalPayload.fcmOptions?.analytics_label) {\n    fcmEvent.analytics_label = internalPayload.fcmOptions?.analytics_label;\n  }\n\n  /* eslint-enable camelcase */\n  return fcmEvent;\n}\n\nfunction createAndEnqueueLogEvent(\n  messaging: MessagingService,\n  fcmEvent: FcmEvent\n): void {\n  const logEvent = {} as LogEvent;\n\n  /* eslint-disable camelcase */\n  logEvent.event_time_ms = Math.floor(Date.now()).toString();\n  logEvent.source_extension_json_proto3 = JSON.stringify(fcmEvent);\n  // eslint-disable-next-line camelcase\n\n  messaging.logEvents.push(logEvent);\n}\n\nexport function _createLogRequest(logEventQueue: LogEvent[]): LogRequest {\n  const logRequest = {} as LogRequest;\n\n  /* eslint-disable camelcase */\n  logRequest.log_source = FCM_LOG_SOURCE.toString();\n  logRequest.log_event = logEventQueue;\n  /* eslint-enable camelcase */\n\n  return logRequest;\n}\n\nexport function _mergeStrings(s1: string, s2: string): string {\n  const resultArray = [];\n  for (let i = 0; i < s1.length; i++) {\n    resultArray.push(s1.charAt(i));\n    if (i < s2.length) {\n      resultArray.push(s2.charAt(i));\n    }\n  }\n\n  return resultArray.join('');\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp, _FirebaseService } from '@firebase/app';\nimport { MessagePayload, NextFn, Observer } from './interfaces/public-types';\n\nimport { FirebaseAnalyticsInternalName } from '@firebase/analytics-interop-types';\nimport { FirebaseInternalDependencies } from './interfaces/internal-dependencies';\nimport { LogEvent } from './interfaces/logging-types';\nimport { Provider } from '@firebase/component';\nimport { _FirebaseInstallationsInternal } from '@firebase/installations';\nimport { extractAppConfig } from './helpers/extract-app-config';\n\nexport class MessagingService implements _FirebaseService {\n  readonly app!: FirebaseApp;\n  readonly firebaseDependencies!: FirebaseInternalDependencies;\n\n  swRegistration?: ServiceWorkerRegistration;\n  vapidKey?: string;\n  // logging is only done with end user consent. Default to false.\n  deliveryMetricsExportedToBigQueryEnabled: boolean = false;\n\n  onBackgroundMessageHandler:\n    | NextFn<MessagePayload>\n    | Observer<MessagePayload>\n    | null = null;\n\n  onMessageHandler: NextFn<MessagePayload> | Observer<MessagePayload> | null =\n    null;\n\n  logEvents: LogEvent[] = [];\n  isLogServiceStarted: boolean = false;\n\n  constructor(\n    app: FirebaseApp,\n    installations: _FirebaseInstallationsInternal,\n    analyticsProvider: Provider<FirebaseAnalyticsInternalName>\n  ) {\n    const appConfig = extractAppConfig(app);\n\n    this.firebaseDependencies = {\n      app,\n      appConfig,\n      installations,\n      analyticsProvider\n    };\n  }\n\n  _delete(): Promise<void> {\n    return Promise.resolve();\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DEFAULT_SW_PATH, DEFAULT_SW_SCOPE } from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\n\nimport { MessagingService } from '../messaging-service';\n\nexport async function registerDefaultSw(\n  messaging: MessagingService\n): Promise<void> {\n  try {\n    messaging.swRegistration = await navigator.serviceWorker.register(\n      DEFAULT_SW_PATH,\n      {\n        scope: DEFAULT_SW_SCOPE\n      }\n    );\n\n    // The timing when browser updates sw when sw has an update is unreliable from experiment. It\n    // leads to version conflict when the SDK upgrades to a newer version in the main page, but sw\n    // is stuck with the old version. For example,\n    // https://github.com/firebase/firebase-js-sdk/issues/2590 The following line reliably updates\n    // sw if there was an update.\n    messaging.swRegistration.update().catch(() => {\n      /* it is non blocking and we don't care if it failed */\n    });\n  } catch (e) {\n    throw ERROR_FACTORY.create(ErrorCode.FAILED_DEFAULT_REGISTRATION, {\n      browserErrorMessage: e.message\n    });\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\n\nimport { MessagingService } from '../messaging-service';\nimport { registerDefaultSw } from './registerDefaultSw';\n\nexport async function updateSwReg(\n  messaging: MessagingService,\n  swRegistration?: ServiceWorkerRegistration | undefined\n): Promise<void> {\n  if (!swRegistration && !messaging.swRegistration) {\n    await registerDefaultSw(messaging);\n  }\n\n  if (!swRegistration && !!messaging.swRegistration) {\n    return;\n  }\n\n  if (!(swRegistration instanceof ServiceWorkerRegistration)) {\n    throw ERROR_FACTORY.create(ErrorCode.INVALID_SW_REGISTRATION);\n  }\n\n  messaging.swRegistration = swRegistration;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DEFAULT_VAPID_KEY } from '../util/constants';\nimport { MessagingService } from '../messaging-service';\n\nexport async function updateVapidKey(\n  messaging: MessagingService,\n  vapidKey?: string | undefined\n): Promise<void> {\n  if (!!vapidKey) {\n    messaging.vapidKey = vapidKey;\n  } else if (!messaging.vapidKey) {\n    messaging.vapidKey = DEFAULT_VAPID_KEY;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\n\nimport { MessagingService } from '../messaging-service';\nimport { getTokenInternal } from '../internals/token-manager';\nimport { updateSwReg } from '../helpers/updateSwReg';\nimport { updateVapidKey } from '../helpers/updateVapidKey';\nimport { GetTokenOptions } from '../interfaces/public-types';\n\nexport async function getToken(\n  messaging: MessagingService,\n  options?: GetTokenOptions\n): Promise<string> {\n  if (!navigator) {\n    throw ERROR_FACTORY.create(ErrorCode.AVAILABLE_IN_WINDOW);\n  }\n\n  if (Notification.permission === 'default') {\n    await Notification.requestPermission();\n  }\n\n  if (Notification.permission !== 'granted') {\n    throw ERROR_FACTORY.create(ErrorCode.PERMISSION_BLOCKED);\n  }\n\n  await updateVapidKey(messaging, options?.vapidKey);\n  await updateSwReg(messaging, options?.serviceWorkerRegistration);\n\n  return getTokenInternal(messaging);\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CONSOLE_CAMPAIGN_ID,\n  CONSOLE_CAMPAIGN_NAME,\n  CONSOLE_CAMPAIGN_TIME\n} from '../util/constants';\nimport {\n  ConsoleMessageData,\n  MessageType\n} from '../interfaces/internal-message-payload';\n\nimport { MessagingService } from '../messaging-service';\n\nexport async function logToScion(\n  messaging: MessagingService,\n  messageType: MessageType,\n  data: ConsoleMessageData\n): Promise<void> {\n  const eventType = getEventType(messageType);\n  const analytics = await messaging.firebaseDependencies.analyticsProvider.get();\n  analytics.logEvent(eventType, {\n    /* eslint-disable camelcase */\n    message_id: data[CONSOLE_CAMPAIGN_ID],\n    message_name: data[CONSOLE_CAMPAIGN_NAME],\n    message_time: data[CONSOLE_CAMPAIGN_TIME],\n    message_device_time: Math.floor(Date.now() / 1000)\n    /* eslint-enable camelcase */\n  });\n}\n\nfunction getEventType(messageType: MessageType): string {\n  switch (messageType) {\n    case MessageType.NOTIFICATION_CLICKED:\n      return 'notification_open';\n    case MessageType.PUSH_RECEIVED:\n      return 'notification_foreground';\n    default:\n      throw new Error();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  MessagePayloadInternal,\n  MessageType\n} from '../interfaces/internal-message-payload';\n\nimport { CONSOLE_CAMPAIGN_ANALYTICS_ENABLED } from '../util/constants';\nimport { MessagingService } from '../messaging-service';\nimport { externalizePayload } from '../helpers/externalizePayload';\nimport { isConsoleMessage } from '../helpers/is-console-message';\nimport { logToScion } from '../helpers/logToScion';\n\nexport async function messageEventListener(\n  messaging: MessagingService,\n  event: MessageEvent\n): Promise<void> {\n  const internalPayload = event.data as MessagePayloadInternal;\n\n  if (!internalPayload.isFirebaseMessaging) {\n    return;\n  }\n\n  if (\n    messaging.onMessageHandler &&\n    internalPayload.messageType === MessageType.PUSH_RECEIVED\n  ) {\n    if (typeof messaging.onMessageHandler === 'function') {\n      messaging.onMessageHandler(externalizePayload(internalPayload));\n    } else {\n      messaging.onMessageHandler.next(externalizePayload(internalPayload));\n    }\n  }\n\n  // Log to Scion if applicable\n  const dataPayload = internalPayload.data;\n  if (\n    isConsoleMessage(dataPayload) &&\n    dataPayload[CONSOLE_CAMPAIGN_ANALYTICS_ENABLED] === '1'\n  ) {\n    await logToScion(messaging, internalPayload.messageType!, dataPayload);\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Component,\n  ComponentContainer,\n  ComponentType,\n  InstanceFactory\n} from '@firebase/component';\nimport {\n  onNotificationClick,\n  onPush,\n  onSubChange\n} from '../listeners/sw-listeners';\n\nimport { GetTokenOptions } from '../interfaces/public-types';\nimport { MessagingInternal } from '@firebase/messaging-interop-types';\nimport { MessagingService } from '../messaging-service';\nimport { ServiceWorkerGlobalScope } from '../util/sw-types';\nimport { _registerComponent } from '@firebase/app';\nimport { getToken } from '../api/getToken';\nimport { messageEventListener } from '../listeners/window-listener';\n\nconst WindowMessagingFactory: InstanceFactory<'messaging'> = (\n  container: ComponentContainer\n) => {\n  const messaging = new MessagingService(\n    container.getProvider('app').getImmediate(),\n    container.getProvider('installations-internal').getImmediate(),\n    container.getProvider('analytics-internal')\n  );\n\n  navigator.serviceWorker.addEventListener('message', e =>\n    messageEventListener(messaging as MessagingService, e)\n  );\n\n  return messaging;\n};\n\nconst WindowMessagingInternalFactory: InstanceFactory<'messaging-internal'> = (\n  container: ComponentContainer\n) => {\n  const messaging = container\n    .getProvider('messaging')\n    .getImmediate() as MessagingService;\n\n  const messagingInternal: MessagingInternal = {\n    getToken: (options?: GetTokenOptions) => getToken(messaging, options)\n  };\n\n  return messagingInternal;\n};\n\ndeclare const self: ServiceWorkerGlobalScope;\nconst SwMessagingFactory: InstanceFactory<'messaging'> = (\n  container: ComponentContainer\n) => {\n  const messaging = new MessagingService(\n    container.getProvider('app').getImmediate(),\n    container.getProvider('installations-internal').getImmediate(),\n    container.getProvider('analytics-internal')\n  );\n\n  self.addEventListener('push', e => {\n    e.waitUntil(onPush(e, messaging as MessagingService));\n  });\n  self.addEventListener('pushsubscriptionchange', e => {\n    e.waitUntil(onSubChange(e, messaging as MessagingService));\n  });\n  self.addEventListener('notificationclick', e => {\n    e.waitUntil(onNotificationClick(e));\n  });\n\n  return messaging;\n};\n\nexport function registerMessagingInWindow(): void {\n  _registerComponent(\n    new Component('messaging', WindowMessagingFactory, ComponentType.PUBLIC)\n  );\n\n  _registerComponent(\n    new Component(\n      'messaging-internal',\n      WindowMessagingInternalFactory,\n      ComponentType.PRIVATE\n    )\n  );\n}\n\n/**\n * The messaging instance registered in sw is named differently than that of in client. This is\n * because both `registerMessagingInWindow` and `registerMessagingInSw` would be called in\n * `messaging-compat` and component with the same name can only be registered once.\n */\nexport function registerMessagingInSw(): void {\n  _registerComponent(\n    new Component('messaging-sw', SwMessagingFactory, ComponentType.PUBLIC)\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\n\nimport { MessagingService } from '../messaging-service';\nimport { deleteTokenInternal } from '../internals/token-manager';\nimport { registerDefaultSw } from '../helpers/registerDefaultSw';\n\nexport async function deleteToken(\n  messaging: MessagingService\n): Promise<boolean> {\n  if (!navigator) {\n    throw ERROR_FACTORY.create(ErrorCode.AVAILABLE_IN_WINDOW);\n  }\n\n  if (!messaging.swRegistration) {\n    await registerDefaultSw(messaging);\n  }\n\n  return deleteTokenInternal(messaging);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp, _getProvider, getApp } from '@firebase/app';\nimport {\n  GetTokenOptions,\n  MessagePayload,\n  Messaging\n} from './interfaces/public-types';\nimport {\n  NextFn,\n  Observer,\n  Unsubscribe,\n  getModularInstance\n} from '@firebase/util';\n\nimport { MessagingService } from './messaging-service';\nimport { deleteToken as _deleteToken } from './api/deleteToken';\nimport { getToken as _getToken } from './api/getToken';\nimport { isSwSupported, isWindowSupported } from './api/isSupported';\nimport { onBackgroundMessage as _onBackgroundMessage } from './api/onBackgroundMessage';\nimport { onMessage as _onMessage } from './api/onMessage';\nimport { _setDeliveryMetricsExportedToBigQueryEnabled } from './api/setDeliveryMetricsExportedToBigQueryEnabled';\nimport { ERROR_FACTORY, ErrorCode } from './util/errors';\n\n/**\n * Retrieves a Firebase Cloud Messaging instance.\n *\n * @returns The Firebase Cloud Messaging instance associated with the provided firebase app.\n *\n * @public\n */\nexport function getMessagingInWindow(app: FirebaseApp = getApp()): Messaging {\n  // Conscious decision to make this async check non-blocking during the messaging instance\n  // initialization phase for performance consideration. An error would be thrown latter for\n  // developer's information. Developers can then choose to import and call `isSupported` for\n  // special handling.\n  isWindowSupported().then(\n    isSupported => {\n      // If `isWindowSupported()` resolved, but returned false.\n      if (!isSupported) {\n        throw ERROR_FACTORY.create(ErrorCode.UNSUPPORTED_BROWSER);\n      }\n    },\n    _ => {\n      // If `isWindowSupported()` rejected.\n      throw ERROR_FACTORY.create(ErrorCode.INDEXED_DB_UNSUPPORTED);\n    }\n  );\n  return _getProvider(getModularInstance(app), 'messaging').getImmediate();\n}\n\n/**\n * Retrieves a Firebase Cloud Messaging instance.\n *\n * @returns The Firebase Cloud Messaging instance associated with the provided firebase app.\n *\n * @public\n */\nexport function getMessagingInSw(app: FirebaseApp = getApp()): Messaging {\n  // Conscious decision to make this async check non-blocking during the messaging instance\n  // initialization phase for performance consideration. An error would be thrown latter for\n  // developer's information. Developers can then choose to import and call `isSupported` for\n  // special handling.\n  isSwSupported().then(\n    isSupported => {\n      // If `isSwSupported()` resolved, but returned false.\n      if (!isSupported) {\n        throw ERROR_FACTORY.create(ErrorCode.UNSUPPORTED_BROWSER);\n      }\n    },\n    _ => {\n      // If `isSwSupported()` rejected.\n      throw ERROR_FACTORY.create(ErrorCode.INDEXED_DB_UNSUPPORTED);\n    }\n  );\n  return _getProvider(getModularInstance(app), 'messaging-sw').getImmediate();\n}\n\n/**\n * Subscribes the {@link Messaging} instance to push notifications. Returns an Firebase Cloud\n * Messaging registration token that can be used to send push messages to that {@link Messaging}\n * instance.\n *\n * If a notification permission isn't already granted, this method asks the user for permission. The\n * returned promise rejects if the user does not allow the app to show notifications.\n *\n * @param messaging - The {@link Messaging} instance.\n * @param options - Provides an optional vapid key and an optinoal service worker registration\n *\n * @returns The promise resolves with an FCM registration token.\n *\n * @public\n */\nexport async function getToken(\n  messaging: Messaging,\n  options?: GetTokenOptions\n): Promise<string> {\n  messaging = getModularInstance(messaging);\n  return _getToken(messaging as MessagingService, options);\n}\n\n/**\n * Deletes the registration token associated with this {@link Messaging} instance and unsubscribes\n * the {@link Messaging} instance from the push subscription.\n *\n * @param messaging - The {@link Messaging} instance.\n *\n * @returns The promise resolves when the token has been successfully deleted.\n *\n * @public\n */\nexport function deleteToken(messaging: Messaging): Promise<boolean> {\n  messaging = getModularInstance(messaging);\n  return _deleteToken(messaging as MessagingService);\n}\n\n/**\n * When a push message is received and the user is currently on a page for your origin, the\n * message is passed to the page and an `onMessage()` event is dispatched with the payload of\n * the push message.\n *\n *\n * @param messaging - The {@link Messaging} instance.\n * @param nextOrObserver - This function, or observer object with `next` defined,\n *     is called when a message is received and the user is currently viewing your page.\n * @returns To stop listening for messages execute this returned function.\n *\n * @public\n */\nexport function onMessage(\n  messaging: Messaging,\n  nextOrObserver: NextFn<MessagePayload> | Observer<MessagePayload>\n): Unsubscribe {\n  messaging = getModularInstance(messaging);\n  return _onMessage(messaging as MessagingService, nextOrObserver);\n}\n\n/**\n * Called when a message is received while the app is in the background. An app is considered to be\n * in the background if no active window is displayed.\n *\n * @param messaging - The {@link Messaging} instance.\n * @param nextOrObserver - This function, or observer object with `next` defined, is called when a\n * message is received and the app is currently in the background.\n *\n * @returns To stop listening for messages execute this returned function\n *\n * @public\n */\nexport function onBackgroundMessage(\n  messaging: Messaging,\n  nextOrObserver: NextFn<MessagePayload> | Observer<MessagePayload>\n): Unsubscribe {\n  messaging = getModularInstance(messaging);\n  return _onBackgroundMessage(messaging as MessagingService, nextOrObserver);\n}\n\n/**\n * Enables or disables Firebase Cloud Messaging message delivery metrics export to BigQuery. By\n * default, message delivery metrics are not exported to BigQuery. Use this method to enable or\n * disable the export at runtime.\n *\n * @param messaging - The `FirebaseMessaging` instance.\n * @param enable - Whether Firebase Cloud Messaging should export message delivery metrics to\n * BigQuery.\n *\n * @public\n */\nexport function setDeliveryMetricsExportedToBigQueryEnabled(\n  messaging: Messaging,\n  enable: boolean\n): void {\n  messaging = getModularInstance(messaging);\n  return _setDeliveryMetricsExportedToBigQueryEnabled(messaging, enable);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\n\nimport {\n  MessagePayload,\n  NextFn,\n  Observer,\n  Unsubscribe\n} from '../interfaces/public-types';\nimport { MessagingService } from '../messaging-service';\n\nexport function onMessage(\n  messaging: MessagingService,\n  nextOrObserver: NextFn<MessagePayload> | Observer<MessagePayload>\n): Unsubscribe {\n  if (!navigator) {\n    throw ERROR_FACTORY.create(ErrorCode.AVAILABLE_IN_WINDOW);\n  }\n\n  messaging.onMessageHandler = nextOrObserver;\n\n  return () => {\n    messaging.onMessageHandler = null;\n  };\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Returns a promise that resolves after given time passes. */\nexport function sleep(ms: number): Promise<void> {\n  return new Promise<void>(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DEFAULT_VAPID_KEY, FCM_MSG } from '../util/constants';\nimport {\n  MessagePayloadInternal,\n  MessageType,\n  NotificationPayloadInternal\n} from '../interfaces/internal-message-payload';\nimport {\n  NotificationEvent,\n  PushEvent,\n  PushSubscriptionChangeEvent,\n  ServiceWorkerGlobalScope,\n  WindowClient\n} from '../util/sw-types';\nimport {\n  deleteTokenInternal,\n  getTokenInternal\n} from '../internals/token-manager';\n\nimport { MessagingService } from '../messaging-service';\nimport { dbGet } from '../internals/idb-manager';\nimport { externalizePayload } from '../helpers/externalizePayload';\nimport { isConsoleMessage } from '../helpers/is-console-message';\nimport { sleep } from '../helpers/sleep';\nimport { stageLog } from '../helpers/logToFirelog';\n\n// Let TS know that this is a service worker\ndeclare const self: ServiceWorkerGlobalScope;\n\nexport async function onSubChange(\n  event: PushSubscriptionChangeEvent,\n  messaging: MessagingService\n): Promise<void> {\n  const { newSubscription } = event;\n  if (!newSubscription) {\n    // Subscription revoked, delete token\n    await deleteTokenInternal(messaging);\n    return;\n  }\n\n  const tokenDetails = await dbGet(messaging.firebaseDependencies);\n  await deleteTokenInternal(messaging);\n\n  messaging.vapidKey =\n    tokenDetails?.subscriptionOptions?.vapidKey ?? DEFAULT_VAPID_KEY;\n  await getTokenInternal(messaging);\n}\n\nexport async function onPush(\n  event: PushEvent,\n  messaging: MessagingService\n): Promise<void> {\n  const internalPayload = getMessagePayloadInternal(event);\n  if (!internalPayload) {\n    // Failed to get parsed MessagePayload from the PushEvent. Skip handling the push.\n    return;\n  }\n\n  // log to Firelog with user consent\n  if (messaging.deliveryMetricsExportedToBigQueryEnabled) {\n    await stageLog(messaging, internalPayload);\n  }\n\n  // foreground handling: eventually passed to onMessage hook\n  const clientList = await getClientList();\n  if (hasVisibleClients(clientList)) {\n    return sendMessagePayloadInternalToWindows(clientList, internalPayload);\n  }\n\n  // background handling: display if possible and pass to onBackgroundMessage hook\n  if (!!internalPayload.notification) {\n    await showNotification(wrapInternalPayload(internalPayload));\n  }\n\n  if (!messaging) {\n    return;\n  }\n\n  if (!!messaging.onBackgroundMessageHandler) {\n    const payload = externalizePayload(internalPayload);\n\n    if (typeof messaging.onBackgroundMessageHandler === 'function') {\n      messaging.onBackgroundMessageHandler(payload);\n    } else {\n      messaging.onBackgroundMessageHandler.next(payload);\n    }\n  }\n}\n\nexport async function onNotificationClick(\n  event: NotificationEvent\n): Promise<void> {\n  const internalPayload: MessagePayloadInternal =\n    event.notification?.data?.[FCM_MSG];\n\n  if (!internalPayload) {\n    return;\n  } else if (event.action) {\n    // User clicked on an action button. This will allow developers to act on action button clicks\n    // by using a custom onNotificationClick listener that they define.\n    return;\n  }\n\n  // Prevent other listeners from receiving the event\n  event.stopImmediatePropagation();\n  event.notification.close();\n\n  // Note clicking on a notification with no link set will focus the Chrome's current tab.\n  const link = getLink(internalPayload);\n  if (!link) {\n    return;\n  }\n\n  // FM should only open/focus links from app's origin.\n  const url = new URL(link, self.location.href);\n  const originUrl = new URL(self.location.origin);\n\n  if (url.host !== originUrl.host) {\n    return;\n  }\n\n  let client = await getWindowClient(url);\n\n  if (!client) {\n    client = await self.clients.openWindow(link);\n\n    // Wait three seconds for the client to initialize and set up the message handler so that it\n    // can receive the message.\n    await sleep(3000);\n  } else {\n    client = await client.focus();\n  }\n\n  if (!client) {\n    // Window Client will not be returned if it's for a third party origin.\n    return;\n  }\n\n  internalPayload.messageType = MessageType.NOTIFICATION_CLICKED;\n  internalPayload.isFirebaseMessaging = true;\n  return client.postMessage(internalPayload);\n}\n\nfunction wrapInternalPayload(\n  internalPayload: MessagePayloadInternal\n): NotificationPayloadInternal {\n  const wrappedInternalPayload: NotificationPayloadInternal = {\n    ...(internalPayload.notification as unknown as NotificationPayloadInternal)\n  };\n\n  // Put the message payload under FCM_MSG name so we can identify the notification as being an FCM\n  // notification vs a notification from somewhere else (i.e. normal web push or developer generated\n  // notification).\n  wrappedInternalPayload.data = {\n    [FCM_MSG]: internalPayload\n  };\n\n  return wrappedInternalPayload;\n}\n\nfunction getMessagePayloadInternal({\n  data\n}: PushEvent): MessagePayloadInternal | null {\n  if (!data) {\n    return null;\n  }\n\n  try {\n    return data.json();\n  } catch (err) {\n    // Not JSON so not an FCM message.\n    return null;\n  }\n}\n\n/**\n * @param url The URL to look for when focusing a client.\n * @return Returns an existing window client or a newly opened WindowClient.\n */\nasync function getWindowClient(url: URL): Promise<WindowClient | null> {\n  const clientList = await getClientList();\n\n  for (const client of clientList) {\n    const clientUrl = new URL(client.url, self.location.href);\n\n    if (url.host === clientUrl.host) {\n      return client;\n    }\n  }\n\n  return null;\n}\n\n/**\n * @returns If there is currently a visible WindowClient, this method will resolve to true,\n * otherwise false.\n */\nfunction hasVisibleClients(clientList: WindowClient[]): boolean {\n  return clientList.some(\n    client =>\n      client.visibilityState === 'visible' &&\n      // Ignore chrome-extension clients as that matches the background pages of extensions, which\n      // are always considered visible for some reason.\n      !client.url.startsWith('chrome-extension://')\n  );\n}\n\nfunction sendMessagePayloadInternalToWindows(\n  clientList: WindowClient[],\n  internalPayload: MessagePayloadInternal\n): void {\n  internalPayload.isFirebaseMessaging = true;\n  internalPayload.messageType = MessageType.PUSH_RECEIVED;\n\n  for (const client of clientList) {\n    client.postMessage(internalPayload);\n  }\n}\n\nfunction getClientList(): Promise<WindowClient[]> {\n  return self.clients.matchAll({\n    type: 'window',\n    includeUncontrolled: true\n    // TS doesn't know that \"type: 'window'\" means it'll return WindowClient[]\n  }) as Promise<WindowClient[]>;\n}\n\nfunction showNotification(\n  notificationPayloadInternal: NotificationPayloadInternal\n): Promise<void> {\n  // Note: Firefox does not support the maxActions property.\n  // https://developer.mozilla.org/en-US/docs/Web/API/notification/maxActions\n  const { actions } = notificationPayloadInternal;\n  const { maxActions } = Notification;\n  if (actions && maxActions && actions.length > maxActions) {\n    console.warn(\n      `This browser only supports ${maxActions} actions. The remaining actions will not be displayed.`\n    );\n  }\n\n  return self.registration.showNotification(\n    /* title= */ notificationPayloadInternal.title ?? '',\n    notificationPayloadInternal\n  );\n}\n\nfunction getLink(payload: MessagePayloadInternal): string | null {\n  // eslint-disable-next-line camelcase\n  const link = payload.fcmOptions?.link ?? payload.notification?.click_action;\n  if (link) {\n    return link;\n  }\n\n  if (isConsoleMessage(payload.data)) {\n    // Notification created in the Firebase Console. Redirect to origin.\n    return self.location.origin;\n  } else {\n    return null;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\n\nimport {\n  MessagePayload,\n  NextFn,\n  Observer,\n  Unsubscribe\n} from '../interfaces/public-types';\nimport { MessagingService } from '../messaging-service';\n\nexport function onBackgroundMessage(\n  messaging: MessagingService,\n  nextOrObserver: NextFn<MessagePayload> | Observer<MessagePayload>\n): Unsubscribe {\n  if (self.document !== undefined) {\n    throw ERROR_FACTORY.create(ErrorCode.AVAILABLE_IN_SW);\n  }\n\n  messaging.onBackgroundMessageHandler = nextOrObserver;\n\n  return () => {\n    messaging.onBackgroundMessageHandler = null;\n  };\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp as AppCompat,\n  _FirebaseService\n} from '@firebase/app-compat';\nimport {\n  Messaging,\n  MessagePayload,\n  deleteToken,\n  getToken,\n  onMessage\n} from '@firebase/messaging';\nimport { NextFn, Observer, Unsubscribe } from '@firebase/util';\n\nimport { onBackgroundMessage } from '@firebase/messaging/sw';\n\nexport interface MessagingCompat {\n  getToken(options?: {\n    vapidKey?: string;\n    serviceWorkerRegistration?: ServiceWorkerRegistration;\n  }): Promise<string>;\n\n  deleteToken(): Promise<boolean>;\n\n  onMessage(\n    nextOrObserver: NextFn<MessagePayload> | Observer<MessagePayload>\n  ): Unsubscribe;\n\n  onBackgroundMessage(\n    nextOrObserver: NextFn<MessagePayload> | Observer<MessagePayload>\n  ): Unsubscribe;\n}\n\nexport function isSupported(): boolean {\n  if (self && 'ServiceWorkerGlobalScope' in self) {\n    // Running in ServiceWorker context\n    return isSwSupported();\n  } else {\n    // Assume we are in the window context.\n    return isWindowSupported();\n  }\n}\n\n/**\n * Checks to see if the required APIs exist.\n */\nfunction isWindowSupported(): boolean {\n  return (\n    'indexedDB' in window &&\n    indexedDB !== null &&\n    navigator.cookieEnabled &&\n    'serviceWorker' in navigator &&\n    'PushManager' in window &&\n    'Notification' in window &&\n    'fetch' in window &&\n    ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') &&\n    PushSubscription.prototype.hasOwnProperty('getKey')\n  );\n}\n\n/**\n * Checks to see if the required APIs exist within SW Context.\n */\nfunction isSwSupported(): boolean {\n  return (\n    'indexedDB' in self &&\n    indexedDB !== null &&\n    'PushManager' in self &&\n    'Notification' in self &&\n    ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') &&\n    PushSubscription.prototype.hasOwnProperty('getKey')\n  );\n}\n\nexport class MessagingCompatImpl implements MessagingCompat, _FirebaseService {\n  constructor(readonly app: AppCompat, readonly _delegate: Messaging) {\n    this.app = app;\n    this._delegate = _delegate;\n  }\n\n  async getToken(options?: {\n    vapidKey?: string;\n    serviceWorkerRegistration?: ServiceWorkerRegistration;\n  }): Promise<string> {\n    return getToken(this._delegate, options);\n  }\n\n  async deleteToken(): Promise<boolean> {\n    return deleteToken(this._delegate);\n  }\n\n  onMessage(\n    nextOrObserver: NextFn<MessagePayload> | Observer<MessagePayload>\n  ): Unsubscribe {\n    return onMessage(this._delegate, nextOrObserver);\n  }\n\n  onBackgroundMessage(\n    nextOrObserver: NextFn<MessagePayload> | Observer<MessagePayload>\n  ): Unsubscribe {\n    return onBackgroundMessage(this._delegate, nextOrObserver);\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Component,\n  ComponentContainer,\n  ComponentType,\n  InstanceFactory\n} from '@firebase/component';\nimport { MessagingCompatImpl, isSupported } from './messaging-compat';\nimport firebase, { _FirebaseNamespace } from '@firebase/app-compat';\n\ndeclare module '@firebase/component' {\n  interface NameServiceMapping {\n    'messaging-compat': MessagingCompatImpl;\n  }\n}\n\nconst messagingCompatFactory: InstanceFactory<'messaging-compat'> = (\n  container: ComponentContainer\n) => {\n  if (self && 'ServiceWorkerGlobalScope' in self) {\n    // in sw\n    return new MessagingCompatImpl(\n      container.getProvider('app-compat').getImmediate(),\n      container.getProvider('messaging-sw').getImmediate()\n    );\n  } else {\n    // in window\n    return new MessagingCompatImpl(\n      container.getProvider('app-compat').getImmediate(),\n      container.getProvider('messaging').getImmediate()\n    );\n  }\n};\n\nconst NAMESPACE_EXPORTS = {\n  isSupported\n};\n\nexport function registerMessagingCompat(): void {\n  (firebase as _FirebaseNamespace).INTERNAL.registerComponent(\n    new Component(\n      'messaging-compat',\n      messagingCompatFactory,\n      ComponentType.PUBLIC\n    ).setServiceProps(NAMESPACE_EXPORTS)\n  );\n}\n","import app from './_firebase';\n\nimport {getFirestore} from 'firebase/firestore'\nimport {getStorage} from 'firebase/storage'\n\nexport const addSlide = async (values, image) => {\n  try {\n    values.create_at = getFirestore().FieldValue.serverTimestamp();\n    let slideRef = await app.firestore().collection('teachers').doc(values.created_by).collection('slides').add(values);\n    let slide = await slideRef.get();\n    const slideId = slide.id;\n    let slideData = slide.data();\n    if (typeof (image) == 'undefined') {\n      return slideId;\n    }\n    var metadata = {\n      contentType: 'image/jpeg'\n    };\n    let cover_url = 'public/images/slide/' + slide.id;\n    var storageRef = app.storage().ref();\n    var uploadTask = storageRef.child(cover_url).put(image, metadata);\n    uploadTask.on(getStorage().TaskEvent.STATE_CHANGED, // or 'state_changed'\n      function(snapshot) {\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload cover is ' + progress + '% done');\n        switch (snapshot.state) {\n          case getStorage().TaskState.PAUSED: // or 'paused'\n            console.log('Upload cover is paused');\n            break;\n          case getStorage().TaskState.RUNNING: // or 'running'\n            console.log('Upload cover is running');\n            break;\n        }\n      },\n      function(error) {\n\n        switch (error.code) {\n          case 'storage/unauthorized':\n            console.log('unauthorized');\n            break;\n          case 'storage/canceled':\n            console.log('cancel');\n            break;\n          case 'storage/unknown':\n\n            console.log('unkonwn');\n            // Unknown error occurred, inspect error.serverResponse\n            break;\n        }\n      },\n      function() {\n        // Upload completed successfully, now we can get the download URL\n        uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n          console.log('File available at', downloadURL);\n          slideData.cover = downloadURL;\n          app.firestore().collection('teachers').doc(values.created_by).collection('slides').doc(slide.id).update(slideData);\n        });\n      });\n    return slideId;\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const addPartSlide = async (subSlide)=>{\nconsole.log(\"cuongtr\");\nconsole.log(subSlide);\nconst slideRef = await app.firestore().collection('teachers').doc(subSlide.created_by).collection('slides').doc(subSlide.parentId).collection('subslides').add(subSlide);\nlet slide = await slideRef.get();\nconst slideId = slide.id;\nreturn slideId;\n// const subSlideRef = app.firestore().collection('teachers').doc().collection('slides').\n};\n\nexport const updatePartSlide = async(subSlide)=>{\n  console.log(\"edit  slide\");\n  console.log(subSlide);\n  if(subSlide.type ===\"master\"){\n    await app.firestore().collection('teachers').doc(subSlide.created_by).collection('slides').doc(subSlide.parentId).update(subSlide);\n    return subSlide.id;\n  }else{\n    await app.firestore().collection('teachers').doc(subSlide.created_by).collection('slides').doc(subSlide.parentId).collection('subslides').doc(subSlide.id).update(subSlide);\n    return subSlide.id;\n  }\n};\n\nexport const getSlideMaster = async (teacherId, slideId)=>{\n  console.log(teacherId, slideId);\n  const slideRef = app.firestore().collection('teachers').doc(teacherId).collection('slides').doc(slideId);\n  const slide = await slideRef.get();\n  if (!slide.exists) {\n    console.log('No such document!');\n  } else {\n    console.log(slide.data());\n    return  slide.data();\n  }\n};\n\nexport const getSlide = async (teacherId, slideId)=>{\n  console.log(teacherId, slideId);\n  let result = [];\n  const slideRef = app.firestore().collection('teachers').doc(teacherId).collection('slides').doc(slideId);\n  const slide = await slideRef.get();\n  if (!slide.exists) {\n    console.log('No such document!');\n  } else {\n    let slideData =  slide.data();\n    slideData.id=slide.id;\n    result.push(slideData);\n    const subslideRef = app.firestore().collection('teachers').doc(teacherId).collection('slides').doc(slideId).collection('subslides');\n    let snapshot = await subslideRef.get();\n    if (snapshot.empty) {\n      console.log('No matching documents.');\n      return result;\n    }\n    snapshot.forEach(doc => {\n      let data = doc.data();\n      data.id=doc.id;\n      result.push(data);\n    });\n    return result;\n  }\n};\nexport const listSlides = async (teacherId)=>{\n  console.log(teacherId);\n  const slideRef = app.firestore().collection('teachers').doc(teacherId).collection('slides');\n  const slide = await slideRef.get();\n  const listSlide = slide.docs.map((doc) => {\n    return {\n      id: doc.id,\n      ...doc.data()\n    };\n  });\n  return listSlide;\n};\n\n\nexport const editSlide = async ()=>{\n  const testerRef = app.firestore().collection('users');\n  const tester = await testerRef.where('roles', 'array-contains-any',['tester']).get();\n  // const tester = await testerRef.where('email', '==','phancuongcdth12@gmail.com').get();\n  console.log(\"cuongpt\");\n  console.log(tester);\n    tester.forEach(doc=>{\n      const testerInfo = doc.data();\n      if(typeof testerInfo.last_device !==\"undefined\" && typeof testerInfo.last_device.device_token!==\"undefined\") {\n        console.log(doc.data().last_device.device_token);\n      };\n    });\n};\n\nexport const deleteslides = ()=>{\n\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  makeStyles,\n  Grid,\n  TextField, CardHeader, Divider\n} from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\nimport useAuth from 'src/hooks/useAuth';\nimport Hashids from 'hashids'\nimport {addSlide} from 'src/api/slides'\nimport Autocomplete from '@material-ui/lab/Autocomplete/Autocomplete';\nimport Chip from '@material-ui/core/Chip';\nimport { getListAllTags } from '../../../../api/catalog';\nimport useIsMountedRef from '../../../../hooks/useIsMountedRef';\nimport FilesDropzone from '../../../../components/FilesDropzone';\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst SlideCreateForm = ({ className, ...rest }) => {\n\n  const isMountedRef = useIsMountedRef();\n  const classes = useStyles();\n  const history = useHistory();\n  const { user } = useAuth();\n  const hashids = new Hashids();\n\n  const [files, setFiles] = useState([]);\n  const handleRemoveAll = () => {\n    setFiles([]);\n  };\n  const handleDrop = useCallback((acceptedFiles) => {\n    setFiles((prevFiles) => acceptedFiles);\n  }, []);\n\n  const [tag, setTags] = useState([]);\n  const getTags = useCallback(async () => {\n    try {\n      const tag = await getListAllTags();\n      console.log(tag);\n      if (isMountedRef.current) {\n        setTags(tag);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }, [isMountedRef]);\n  useEffect(() => {\n    getTags();\n  }, [getTags]);\n\n  const sleep = (ms) => new Promise((r) => setTimeout(r, ms));\n\n  return (\n    <Formik\n      initialValues={{\n        name: '',\n        desc:'',\n        tag:'',\n        type:'master',\n        submit: null\n      }}\n      validationSchema={Yup.object().shape({\n        name: Yup.string().max(255).required('Name is required'),\n      })}\n      onSubmit={async (values, {\n        resetForm,\n        setErrors,\n        setStatus,\n        setSubmitting\n      }) => {\n        try {\n          values.created_by=user.userId;\n          values.author = user.name;\n          console.log(values);\n          const idSlide = await addSlide(values,files[0]);\n          await sleep(500);\n          if(typeof idSlide!==\"undefined\"){\n            history.push('/teacher/management/slides/edit/'+idSlide);\n          }\n        } catch (err) {\n          console.error(err);\n          setStatus({ success: false });\n          setErrors({ submit: err.message });\n          setSubmitting(false);\n        }\n      }}\n    >\n      {({\n          errors,\n          handleBlur,\n          handleChange,\n          handleSubmit,\n          isSubmitting,\n          touched,\n          values\n        }) => (\n        <form className={clsx(classes.root, className)} onSubmit={handleSubmit}{...rest}>\n          <Card>\n            <CardContent>\n              <Grid container spacing={3}>\n                <Grid item md={6} xs={12}>\n                  <TextField\n                    error={Boolean(touched.name && errors.name)}\n                    fullWidth\n                    helperText={touched.name && errors.name}\n                    label=\"Tên Slide\"\n                    name=\"name\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.name}\n                    variant=\"outlined\"\n                  />\n                  <TextField\n                    fullWidth\n                    name=\"type\"\n                    required\n                    value=\"master\"\n                    hidden\n                  />\n                </Grid>\n                <Grid item md={6} xs={12}>\n                  <Autocomplete\n                    fullWidth\n                    multiple\n                    name=\"tag\"\n                    onChange={(event, value) =>values.tag = value}\n                    id=\"tags-filled\"\n                    options={tag.map((option) => option.name)}\n                    freeSolo\n                    renderTags={(value, getTagProps) =>\n                      value.map((option, index) => (\n                        <Chip variant=\"outlined\" label={option} {...getTagProps({ index })} />\n                      ))\n                    }\n                    renderInput={(params) => (\n                      <TextField {...params} variant=\"outlined\" label=\"Tags\" placeholder=\"Thêm tag vào cho cho slide\"/>\n                    )}\n                  />\n                </Grid>\n                <Grid item md={12} xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Mô tả ngắn\"\n                    name=\"desc\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.desc}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid item md={12} xs={12}>\n                  <Card>\n                    <CardHeader title=\"Ảnh Cover\" />\n                    <Divider />\n                    <CardContent>\n                      <FilesDropzone handleDrop = {handleDrop} files={files} handleRemoveAll={handleRemoveAll}/>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              </Grid>\n              <Box mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  type=\"submit\"\n                  // disabled={isSubmitting}\n                >\n                  Lưu\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </form>\n      )}\n    </Formik>\n  );\n};\n\nSlideCreateForm.propTypes = {\n  className: PropTypes.string\n};\n\nexport default SlideCreateForm;\n","import React, { useState } from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { Link as RouterLink } from 'react-router-dom';\nimport SlideCreateForm from './SlideCreateForm'\nimport 'react-form-builder2/dist/app.css';\nimport Page from 'src/components/Page';\nimport {\n  Box,\n  Button,\n  Link,\n  Portal,\n  Typography,\n  makeStyles,\n  colors\n} from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3)\n  },\n  avatar: {\n    backgroundColor: colors.red[600]\n  },\n  stepper: {\n    backgroundColor: 'transparent'\n  }\n}));\nconst Slide  = (props) => {\n  const classes = useStyles();\n  console.log(props);\n\n  return (\n    <Page className={classes.root} title=\"Slide Create\">\n      <h1>Tạo slides mới</h1>\n      <SlideCreateForm/>\n    </Page>\n  );\n};\n\nexport default Slide;\n","export { default } from './Popper';","export { default } from './Chip';","export { default } from './ListSubheader';"],"sourceRoot":""}