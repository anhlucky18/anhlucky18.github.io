(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[58,9,11],{1258:function(e,t,n){"use strict";var a=n(0);t.a=function(){var e=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return function(){e.current=!1}}),[]),e}},1364:function(e,t,n){"use strict";n.d(t,"h",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return h})),n.d(t,"i",(function(){return b})),n.d(t,"f",(function(){return k})),n.d(t,"k",(function(){return x})),n.d(t,"b",(function(){return y})),n.d(t,"g",(function(){return w})),n.d(t,"d",(function(){return T})),n.d(t,"l",(function(){return A})),n.d(t,"j",(function(){return O})),n.d(t,"e",(function(){return S}));var a=n(9),o=n.n(a),r=n(24),c=n(14),s=n(184),i=n.n(s),l=n(53),u=n(1392),d=n.n(u),p=n(1143),f=n(1560),g=n(1367),m=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=null,!t){e.next=8;break}return e.next=5,l.a.firestore().collection("schools").doc(t).collection("contents").orderBy("create_at","desc").get();case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,l.a.firestore().collection("contents").orderBy("create_at","desc").get();case 10:n=e.sent;case 11:return a=n.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s,u,d,p,f,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,t.content_type="news",t.create_at=i.a.firestore.FieldValue.serverTimestamp(),e.next=7,l.a.firestore().collection("contents").add(t);case 7:return r=e.sent,e.next=10,r.get();case 10:if(c=e.sent,console.log("done content:"+c.id),s=c.data(),(u=l.a.storage().ref().child("public/contents/"+c.id).putString(a)).on(i.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case i.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case i.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){u.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),r.collection("detail").doc("content").set({data:a,file:"public/contents/"+c.id,content_url:e})}))})),"undefined"!=typeof n){e.next=17;break}return e.abrupt("return");case 17:d={contentType:"image/jpeg"},p="public/images/content/"+c.id,"public/images/content/app"+c.id,f=l.a.storage().ref(),(g=f.child(p).put(n,d)).on(i.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case i.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case i.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){g.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),s.cover=e,l.a.firestore().collection("contents").doc(c.id).update(s)}))})),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n){return e.apply(this,arguments)}}(),h=function(e){try{e.map((function(e){var t="public/images/content/"+e,n=l.a.storage().ref();n.child(t).getDownloadURL().then((function(e){n.child(t).delete()}),(function(e){console.log(e.code)})),l.a.firestore().collection("contents").doc(e).collection("detail").doc("content").delete(),l.a.firestore().collection("contents").doc(e).delete()}))}catch(t){console.log(t)}},b=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,(function(e,t){return e?(console.log(e),{statusCode:500,message:"G\u1eedi notify th\u1ea5t b\u1ea1i"}):(console.log(t),{statusCode:200,message:"G\u1eedi notify th\xe0nh c\xf4ng"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function _(e,t){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s,i,u,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a=l.a.firestore().collection("contents").doc(t),e.next=4,a.get();case 4:(r=e.sent).exists&&(c=r.data(),(s=c.tags).length>0&&(i=[],s.forEach((function(e,t){s.length>=5?t<5&&(i+=4==t?"'"+e+"' in topics ":"'"+e+"' in topics || "):(console.log(i.length),console.log("topic.length"),t<5&&(t+1==s.length?i+="'"+e+"' in topics ":i+="'"+e+"' in topics || "))})),u={"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:24.0) Gecko/20100101 Firefox/24.0","Content-Type":"application/json",Authorization:"key="+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_AUTH0_CLIENT_ID:"",REACT_APP_AUTH0_DOMAIN:"",REACT_APP_SERVER_URL:"https://server.dschool.vn",REACT_APP_LOGOUT_URL:"https://id.hocbaionha.com/oauth2/sessions/logout",REACT_APP_H5P_URL:"https://h5p.dschool.vn",REACT_APP_FIREBASE_API_KEY:"AIzaSyD1rFzhNHcbWql0L8g4dWMcdgn5KiZ3cv4",REACT_APP_FIREBASE_APP_ID:"1:666303282505:web:2daabfe2056b8bcf276e98",REACT_APP_FIREBASE_AUTH_DOMAIN:"hbon-sso.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://hbon-sso.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"666303282505",REACT_APP_FIREBASE_PROJECT_ID:"hbon-sso",REACT_APP_FIREBASE_STORAGE_BUCKET:"hbon-sso.appspot.com",REACT_APP_GA_MEASUREMENT_ID:"G-6ED668BBJC"}).REACT_APP_FIREBASE_CLOUD_MESSAGE_KEY},p={condition:i,priority:"high",notification:{body:c.title,title:"Hbon news",sound:"default",image:c.cover},apns:{payload:{aps:{"mutable-content":1}},fcm_options:{image:c.cover}},data:{click_action:"FLUTTER_NOTIFICATION_CLICK",deep_link:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_AUTH0_CLIENT_ID:"",REACT_APP_AUTH0_DOMAIN:"",REACT_APP_SERVER_URL:"https://server.dschool.vn",REACT_APP_LOGOUT_URL:"https://id.hocbaionha.com/oauth2/sessions/logout",REACT_APP_H5P_URL:"https://h5p.dschool.vn",REACT_APP_FIREBASE_API_KEY:"AIzaSyD1rFzhNHcbWql0L8g4dWMcdgn5KiZ3cv4",REACT_APP_FIREBASE_APP_ID:"1:666303282505:web:2daabfe2056b8bcf276e98",REACT_APP_FIREBASE_AUTH_DOMAIN:"hbon-sso.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://hbon-sso.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"666303282505",REACT_APP_FIREBASE_PROJECT_ID:"hbon-sso",REACT_APP_FIREBASE_STORAGE_BUCKET:"hbon-sso.appspot.com",REACT_APP_GA_MEASUREMENT_ID:"G-6ED668BBJC"}).REACT_APP_DOMAIN_VIEWER+"/news_detail?content_id="+t+"&news_title="+encodeURIComponent(c.title),body:c.title,title:"Hbon news",content_type:"news"}},d()({method:"POST",url:"https://fcm.googleapis.com/fcm/send",body:p,headers:u,json:!0},(function(e,t,a){if(console.log(a),console.log(t),console.log(t.statusCode),console.log(t.request),e||200!==t.statusCode)return console.log(a),n(e||{statusCode:t.statusCode});n(null,a)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.firestore().collection("contents").doc(t).get();case 3:return n=e.sent,(a=n.data()).id=t,e.next=8,l.a.firestore().collection("contents").doc(t).collection("detail").doc("content").get();case 8:return r=e.sent,c=r.data(),console.log(c.content_url),e.next=13,fetch(c.content_url).then((function(e){return e.text()}));case 13:return s=e.sent,console.log(s),a.detail=s,e.abrupt("return",a);case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s,u,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("update contents"),a=t.id,r=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,e.next=7,l.a.firestore().collection("contents").doc(a).update(t);case 7:if((c=l.a.storage().ref().child("public/contents/"+a).putString(r)).on(i.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case i.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case i.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){c.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),l.a.firestore().collection("contents").doc(a).collection("detail").doc("content").set({file:"public/contents/"+a,content_url:e})}))})),"undefined"!=typeof n){e.next=11;break}return e.abrupt("return");case 11:t.cover,s={contentType:"image/jpeg"},u="public/images/content/"+t.id,d=l.a.storage().ref(),(p=d.child(u).put(n,s)).on(i.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case i.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case i.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){p.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),t.cover=e,l.a.firestore().collection("contents").doc(a).update(t)}))})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s,u,d,p,f,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.schoolid)){e.next=28;break}return e.prev=2,r=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,t.content_type="news",t.create_at=i.a.firestore.FieldValue.serverTimestamp(),e.next=9,l.a.firestore().collection("schools").doc(a).collection("contents").add(t);case 9:return c=e.sent,e.next=12,c.get();case 12:if(s=e.sent,console.log("done content:"+s.id),c.collection("detail").doc("content").set({data:r}),u=s.data(),"undefined"!=typeof n){e.next=18;break}return e.abrupt("return");case 18:d={contentType:"image/jpeg"},p="public/images/content/"+s.id,f=l.a.storage().ref(),(g=f.child(p).put(n,d)).on(i.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case i.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case i.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){g.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),u.cover=e,l.a.firestore().collection("schools").doc(a).collection("contents").doc(s.id).update(u)}))})),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(2),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[2,25]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.firestore().collection("schools").doc(n).collection("contents").doc(t).get();case 3:return a=e.sent,(r=a.data()).id=t,e.next=8,l.a.firestore().collection("schools").doc(n).collection("contents").doc(t).collection("detail").doc("content").get();case 8:return c=e.sent,s=c.data(),r.detail=s.data,e.abrupt("return",r);case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e,t){try{e.map((function(e){var n="public/images/content/"+e,a=l.a.storage().ref();a.child(n).getDownloadURL().then((function(e){a.child(n).delete()}),(function(e){console.log(e.code)})),l.a.firestore().collection("schools").doc(t).collection("contents").doc(e).collection("detail").doc("content").delete(),l.a.firestore().collection("schools").doc(t).collection("contents").doc(e).delete()}))}catch(n){console.log(n)}},A=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s,u,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.schoolid,console.log("update contents"),r=t.id,c=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,e.next=8,l.a.firestore().collection("schools").doc(a).collection("contents").doc(r).update(t);case 8:return e.next=10,l.a.firestore().collection("schools").doc(a).collection("contents").doc(r).collection("detail").doc("content").update({data:c});case 10:if("undefined"!=typeof n){e.next=12;break}return e.abrupt("return");case 12:t.cover,s={contentType:"image/jpeg"},u="public/images/content/"+t.id,d=l.a.storage().ref(),(p=d.child(u).put(n,s)).on(i.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case i.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case i.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){p.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),t.cover=e,l.a.firestore().collection("schools").doc(a).collection("contents").doc(r).update(t)}))})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=Object(p.a)(),"undefined"!=typeof t){e.next=4;break}return e.abrupt("return",n(null));case 4:r={contentType:"image/jpeg"},c="public/images/content/detail/"+a,s=l.a.storage().ref(),(u=s.child(c).put(t,r)).on(i.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case i.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case i.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){u.snapshot.ref.getDownloadURL().then((function(e){return console.log("File available at",e),n(e)}))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=[],a=l.a.firestore().collection("contents").doc(t).collection("embedded_submissions"),e.next=5,a.get();case 5:return e.sent.forEach(function(){var e=Object(c.a)(o.a.mark((function e(a){var r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.data(),s=l.a.firestore().collection("contents").doc(t).collection("embedded_submissions").doc(a.id).collection("quizzes_submissions"),e.next=4,s.get();case 4:e.sent.forEach(function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data().result,r["logs-"+t.id]=n.toString(),r["results-"+t.id]=n.filter((function(e){return!0===e})).length;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.push(r),console.log(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,l.a.firestore().collection("contents").doc(t).get();case 9:r=e.sent,s=r.data(),setTimeout((function(){var e=s.title,t={Sheets:{data:f.utils.json_to_sheet(n)},SheetNames:["data"]},a=f.write(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});g.saveAs(o,e+".xlsx")}),3e4);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1393:function(e,t){},1394:function(e,t){},1395:function(e,t){},1588:function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\s+/," ").split(" ").slice(0,2).map((function(e){return e&&e[0].toUpperCase()})).join("")}},1660:function(e,t){},1662:function(e,t){},1663:function(e,t){},1884:function(e,t,n){"use strict";n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return b})),n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return E})),n.d(t,"f",(function(){return k})),n.d(t,"b",(function(){return x})),n.d(t,"l",(function(){return y})),n.d(t,"d",(function(){return T})),n.d(t,"e",(function(){return A}));var a=n(9),o=n.n(a),r=n(24),c=n(14),s=n(1286),i=n(184),l=n.n(i),u=n(53),d=n(1982),p=n(1367),f=n(1560),g=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,u.a.firestore().collection("live_events").where("type","==","competition").orderBy("created_at","desc").get();case 4:return t=e.sent,n=t.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,u.a.firestore().collection("live_events").where("type","==","school_competition").orderBy("created_at","desc").get();case 4:return t=e.sent,n=t.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,a=u.a.firestore(),"undefined"===typeof n){e.next=11;break}return e.next=5,a.collection("live_events").doc(n).collection("submission").get();case 5:return r=e.sent,e.next=8,r.docs.map(function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,c,i,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data(),r={},2!==n.status){e.next=36;break}return c=a.collection("students").doc(n.uid),e.next=6,c.get();case 6:if((i=e.sent).exists){e.next=24;break}return l=a.collection("users").doc(n.uid),e.next=11,l.get();case 11:u=e.sent,r.display_name="undefined"!==typeof u.data().display_name?u.data().display_name:n.display_name,r.school_id="undefined"!==typeof n.school_id?n.school_id:u.data().school_id,r.point=n.point,r.submit_at=w(n.submit_at),r.created_at=w(n.created_at),r.time_work=parseInt((n.submit_at-n.created_at)/60),r.email="undefined"!==typeof u.data().email?u.data().email:"",r.grade="undefined"!==typeof u.data().class?u.data().class:"",parseInt((n.submit_at-n.created_at)/60)>70?r.autosubmit="Tool auto":r.autosubmit="",r.not_student="Ch\u01b0a c\xf3 trong Student",e.next=34;break;case 24:r.display_name="undefined"!==typeof n.display_name?n.display_name:i.data().lastname+i.data().firstname,r.school_id="undefined"!==typeof n.school_id?n.school_id:i.data().school_id,r.point=n.point,r.submit_at=w(n.submit_at),r.created_at=w(n.created_at),r.time_work=parseInt((n.submit_at-n.created_at)/60),r.email="undefined"!==typeof i.data().email?i.data().email:"",r.grade="undefined"!==typeof i.data().class?i.data().class.name:"",parseInt((n.submit_at-n.created_at)/60)>70?r.autosubmit="Tool auto":r.autosubmit="",r.not_student="";case 34:console.log(r),s.push(r);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return s=e.sent,console.log(s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,u.a.firestore().collection("resource/public/quizzes").get();case 4:return t=e.sent,n=t.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,u.a.firestore().collection("/resource/kimchung/quizzes").get();case 4:return t=e.sent,n=t.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s,i,p,f,g,m,v,h,b,_,E,k;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("start_at"in t||(t.start_at=l.a.firestore.FieldValue.serverTimestamp()),"end_at"in t||(t.end_at=l.a.firestore.FieldValue.serverTimestamp()),null===typeof t.school||"undefined"===typeof t.school.id){e.next=9;break}return e.next=5,u.a.firestore().collection("resource/kimchung/quizzes/").doc(t.quizid);case 5:a=e.sent,t.quizRef=a,e.next=13;break;case 9:return e.next=11,u.a.firestore().collection("resource/public/quizzes/").doc(t.quizid);case 11:r=e.sent,t.quizRef=r;case 13:return c={eventType:"image/jpeg"},e.prev=14,t.created_at=Date.now(),null==typeof t.start_at&&(t.start_at=Date.now()),null==typeof t.end_at&&(t.end_at=Date.now()),s=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,t.created_at=l.a.firestore.FieldValue.serverTimestamp(),i=(i=t.tags).filter((function(e){return e})),t.tags=i,e.next=26,u.a.firestore().collection("live_events").add(t);case 26:return p=e.sent,e.next=29,p.get();case 29:if(f=e.sent,console.log("done event:"+f.id),p.collection("detail").doc("content").set({data:s}),g=f.data(),"undefined"!=typeof n){e.next=35;break}return e.abrupt("return");case 35:return e.next=37,Object(d.fromImage)(n);case 37:return m=e.sent,e.next=40,m.thumbnail(512).toFile();case 40:if(v=e.sent,h="public/images/events/"+f.id,b="public/images/events/full/"+f.id,_=u.a.storage().ref(),(E=_.child(b).put(n,c)).on(l.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case l.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case l.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){E.snapshot.ref.getDownloadURL().then((function(e){console.log("image full available at",e),g.cover_full=e,u.a.firestore().collection("live_events").doc(f.id).update(g)}))})),"undefined"!=typeof v){e.next=48;break}return e.abrupt("return");case 48:(k=_.child(h).put(v,c)).on(l.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case l.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case l.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){k.snapshot.ref.getDownloadURL().then((function(e){console.log("image available at",e),u.a.firestore().collection("live_events").doc(f.id).update({cover:e})}))})),e.next=55;break;case 52:e.prev=52,e.t0=e.catch(14),console.log(e.t0);case 55:case"end":return e.stop()}}),e,null,[[14,52]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){try{var t=u.a.storage().ref();e.map((function(e){console.log(e);var n="public/images/events/"+e,a="public/images/events/full"+e;t.child(n).getDownloadURL().then((function(e){t.child(n).delete()}),(function(e){console.log(e.code)})),t.child(a).getDownloadURL().then((function(e){t.child(a).delete()}),(function(e){console.log(e.code)})),u.a.firestore().collection("events").doc(e).collection("detail").doc("content").delete(),u.a.firestore().collection("events").doc(e).delete()}))}catch(n){console.log(n)}},k=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,u.a.firestore().collection("live_events").doc(t).get();case 4:return n=e.sent,(a=n.data()).id=t,console.log(t),e.next=10,u.a.firestore().collection("live_events").doc(t).collection("detail").doc("content").get();case 10:return r=e.sent,c=r.data(),a.detail=c.data,console.log(a),e.next=16,a.quizRef.get();case 16:return(s=e.sent).exists?a.quizname=s.data().name:a.quizname="Ch\u1ecdn quizzes",e.abrupt("return",a);case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,r,c,i,d,p,f,g,m,v,h,b,_,E,k,x,y,w,T,A,O,S,j,R,P,U,C,I,N,D,z,B,L,F,G,H,q,M,V,W,K,J,Y,X,Z,Q,$,ee,te;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),null!=(n=t)&&""!=n){e.next=4;break}return e.abrupt("return",{error_code:1,message:"kh\xf4ng t\u1ed3n t\u1ea1i eventId"});case 4:return a=u.a.firestore(),r=0,e.next=8,a.collection("live_events").doc(n).get();case 8:return c=e.sent,e.next=11,c.data();case 11:if(i=e.sent,d=0,null==i){e.next=54;break}return e.next=16,i.quizRef.get();case 16:return p=e.sent,e.next=19,p.data();case 19:f=e.sent,g=f.questions,m=!0,v=!1,e.prev=23,b=Object(s.a)(g);case 25:return e.next=27,b.next();case 27:return _=e.sent,m=_.done,e.next=31,_.value;case 31:if(E=e.sent,m){e.next=38;break}"id"in E&&d++;case 35:m=!0,e.next=25;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e.catch(23),v=!0,h=e.t0;case 44:if(e.prev=44,e.prev=45,m||null==b.return){e.next=49;break}return e.next=49,b.return();case 49:if(e.prev=49,!v){e.next=52;break}throw h;case 52:return e.finish(49);case 53:return e.finish(44);case 54:return e.next=56,a.collection("live_events").doc(n).collection("submission").where("status","==",1).limit(50).get();case 56:k=e.sent,x=!0,y=!1,e.prev=59,T=Object(s.a)(k.docs);case 61:return e.next=63,T.next();case 63:return A=e.sent,x=A.done,e.next=67,A.value;case 67:if(O=e.sent,x){e.next=210;break}return S=O,console.log("cuongpt"),console.log(S),e.prev=72,e.next=75,S.ref.collection("attemps").get();case 75:j=e.sent,R=!0,P=!1,e.prev=78,C=Object(s.a)(j.docs);case 80:return e.next=82,C.next();case 82:return I=e.sent,R=I.done,e.next=86,I.value;case 86:if(N=e.sent,R){e.next=168;break}if(!("selection"in(D=N.data()))){e.next=164;break}z=!0,B=!1,e.prev=93,F=Object(s.a)(D.selection);case 95:return e.next=97,F.next();case 97:return G=e.sent,z=G.done,e.next=101,G.value;case 101:if(H=e.sent,z){e.next=148;break}if(null==(q=H)){e.next=145;break}return M=q.selection_values[0],e.next=108,q.quiz_ref.get();case 108:if(!(V=e.sent).exists){e.next=145;break}W=V.data(),K=!0,J=!1,e.prev=113,X=Object(s.a)(W.options);case 115:return e.next=117,X.next();case 117:return Z=e.sent,K=Z.done,e.next=121,Z.value;case 121:if(Q=e.sent,K){e.next=128;break}($=Q).fraction>0&&$.value==M&&(r++,console.log(r,",",S.id,V.data().label));case 125:K=!0,e.next=115;break;case 128:e.next=134;break;case 130:e.prev=130,e.t1=e.catch(113),J=!0,Y=e.t1;case 134:if(e.prev=134,e.prev=135,K||null==X.return){e.next=139;break}return e.next=139,X.return();case 139:if(e.prev=139,!J){e.next=142;break}throw Y;case 142:return e.finish(139);case 143:return e.finish(134);case 144:case 145:z=!0,e.next=95;break;case 148:e.next=154;break;case 150:e.prev=150,e.t2=e.catch(93),B=!0,L=e.t2;case 154:if(e.prev=154,e.prev=155,z||null==F.return){e.next=159;break}return e.next=159,F.return();case 159:if(e.prev=159,!B){e.next=162;break}throw L;case 162:return e.finish(159);case 163:return e.finish(154);case 164:case 165:R=!0,e.next=80;break;case 168:e.next=174;break;case 170:e.prev=170,e.t3=e.catch(78),P=!0,U=e.t3;case 174:if(e.prev=174,e.prev=175,R||null==C.return){e.next=179;break}return e.next=179,C.return();case 179:if(e.prev=179,!P){e.next=182;break}throw U;case 182:return e.finish(179);case 183:return e.finish(174);case 184:return ee=Math.round(1e3*r/d)/100,e.t4=r,e.t5=r,e.t6=d,e.t7=d,e.t8=ee,e.next=193,l.a.firestore.FieldValue.serverTimestamp();case 193:return e.t9=e.sent,te={correct_quiz_count:e.t4,grade:e.t5,grade_max:e.t6,total_quiz_count:e.t7,point:e.t8,status:2,submit_at:e.t9,submit_by:"auto"},e.next=197,S.ref.update(te);case 197:return console.log("Graded: ,",S.id,",",te,",",S.id),r=0,e.abrupt("return",{error_code:0,message:"T\u1ea5t c\u1ea3 c\xe1c b\xe0i thi \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng n\u1ed9p"});case 202:return e.prev=202,e.t10=e.catch(72),console.log(S.id),console.log(e.t10),e.abrupt("return",{error_code:1,message:"kh\xf4ng t\u1ed3n t\u1ea1i eventId"});case 207:x=!0,e.next=61;break;case 210:e.next=216;break;case 212:e.prev=212,e.t11=e.catch(59),y=!0,w=e.t11;case 216:if(e.prev=216,e.prev=217,x||null==T.return){e.next=221;break}return e.next=221,T.return();case 221:if(e.prev=221,!y){e.next=224;break}throw w;case 224:return e.finish(221);case 225:return e.finish(216);case 226:return e.abrupt("return",{error_code:0,message:"T\u1ea5t c\u1ea3 c\xe1c b\xe0i thi \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng n\u1ed9p"});case 228:case"end":return e.stop()}}),e,null,[[23,40,44,54],[45,,49,53],[59,212,216,226],[72,202],[78,170,174,184],[93,150,154,164],[113,130,134,144],[135,,139,143],[155,,159,163],[175,,179,183],[217,,221,225]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,s,i,p,f,g,m,v,h,b,_,E;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("start_at"in t||(t.start_at=l.a.firestore.FieldValue.serverTimestamp()),"end_at"in t||(t.end_at=l.a.firestore.FieldValue.serverTimestamp()),null===typeof t.school||"undefined"===typeof t.school.id){e.next=9;break}return e.next=5,u.a.firestore().collection("resource/kimchung/quizzes/").doc(t.quizid);case 5:a=e.sent,t.quizRef=a,e.next=13;break;case 9:return e.next=11,u.a.firestore().collection("resource/public/quizzes/").doc(t.quizid);case 11:r=e.sent,t.quizRef=r;case 13:return c={eventType:"image/jpeg"},e.prev=14,t.created_at=Date.now(),null==typeof t.start_at&&(t.start_at=Date.now()),null==typeof t.end_at&&(t.end_at=Date.now()),s=" <news content-type='news'>"+t.detail+"</news>",delete t.detail,t.created_at=l.a.firestore.FieldValue.serverTimestamp(),i=(i=t.tags).filter((function(e){return e})),t.tags=i,e.next=26,u.a.firestore().collection("live_events").doc(t.id).update(t);case 26:return e.next=28,u.a.firestore().collection("live_events").doc(t.id).get();case 28:return p=e.sent,console.log("done event:"+p.id),e.next=32,u.a.firestore().collection("live_events").doc(t.id).collection("detail").doc("content").update({data:s});case 32:if(f=p.data(),"undefined"!=typeof n){e.next=35;break}return e.abrupt("return");case 35:return e.next=37,Object(d.fromImage)(n);case 37:return g=e.sent,e.next=40,g.thumbnail(512).toFile();case 40:if(m=e.sent,v="public/images/events/"+p.id,h="public/images/events/full/"+p.id,b=u.a.storage().ref(),(_=b.child(h).put(n,c)).on(l.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case l.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case l.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){_.snapshot.ref.getDownloadURL().then((function(e){console.log("image full available at",e),f.cover_full=e,u.a.firestore().collection("live_events").doc(p.id).update(f)}))})),"undefined"!=typeof m){e.next=48;break}return e.abrupt("return");case 48:(E=b.child(v).put(m,c)).on(l.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload cover is "+t+"% done"),e.state){case l.a.storage.TaskState.PAUSED:console.log("Upload cover is paused");break;case l.a.storage.TaskState.RUNNING:console.log("Upload cover is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("unauthorized");break;case"storage/canceled":console.log("cancel");break;case"storage/unknown":console.log("unkonwn")}}),(function(){E.snapshot.ref.getDownloadURL().then((function(e){console.log("image available at",e),u.a.firestore().collection("live_events").doc(p.id).update({cover:e})}))})),e.next=55;break;case 52:e.prev=52,e.t0=e.catch(14),console.log(e.t0);case 55:case"end":return e.stop()}}),e,null,[[14,52]])})));return function(t,n){return e.apply(this,arguments)}}();function w(e){if(e){var t=e.toDate(),n=t.getMonth(),a=t.getDate(),o=t.getFullYear(),r=t.getHours(),c=t.getMinutes(),s=t.getSeconds();return t=a+"/"+n+"/"+o+" "+r+":"+c+":"+s}return null}var T=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,r,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,a=[],r=u.a.firestore(),"undefined"===typeof n){e.next=20;break}return e.prev=4,e.next=7,r.collection("live_events").doc(n).collection("submission").get();case 7:return e.sent.forEach(function(){var e=Object(c.a)(o.a.mark((function e(t){var n,c,s,i,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data(),c={},2!=n.status){e.next=38;break}return s=r.collection("students").doc(n.uid),e.next=6,s.get();case 6:if((i=e.sent).exists){e.next=26;break}return l=r.collection("users").doc(n.uid),e.next=11,l.get();case 11:u=e.sent,c.display_name="undefined"!==typeof u.data().display_name?u.data().display_name:n.display_name,c.school_id="undefined"!==typeof n.school_id?n.school_id:u.data().school_id,c.point=n.point,c.submit_at=w(n.submit_at),c.created_at=w(n.created_at),c.time_work=parseInt((n.submit_at-n.created_at)/60),c.email="undefined"!==typeof u.data().email?u.data().email:"",c.grade="undefined"!==typeof u.data().class?u.data().class:"",a.push(c),parseInt((n.submit_at-n.created_at)/60)>70?c.autosubmit="Tool auto":c.autosubmit="",c.not_student="Ch\u01b0a c\xf3 trong Student",console.log(c),e.next=38;break;case 26:c.display_name="undefined"!==typeof n.display_name?n.display_name:i.data().lastname+i.data().firstname,c.school_id="undefined"!==typeof n.school_id?n.school_id:i.data().school_id,c.point=n.point,c.submit_at=w(n.submit_at),c.created_at=w(n.created_at),c.time_work=parseInt((n.submit_at-n.created_at)/60),c.email="undefined"!==typeof i.data().email?i.data().email:"",c.grade="undefined"!==typeof i.data().class?i.data().class.name:"",a.push(c),parseInt((n.submit_at-n.created_at)/60)>70?c.autosubmit="Tool auto":c.autosubmit="",console.log(c),c.not_student="";case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11,r.collection("live_events").doc(n).get();case 11:s=e.sent,i=s.data(),setTimeout((function(){var e=i.title,t={Sheets:{data:f.utils.json_to_sheet(a)},SheetNames:["data"]},n=f.write(t,{bookType:"xlsx",type:"array"}),o=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});p.saveAs(o,e+".xlsx")}),3e4),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(4);case 18:e.next=20;break;case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,r,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,a=[],r=u.a.firestore(),"undefined"===typeof n){e.next=20;break}return e.prev=4,e.next=7,r.collection("live_events").doc(n).collection("submission").get();case 7:return e.sent.forEach(function(){var e=Object(c.a)(o.a.mark((function e(t){var s,i,l,u,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.data(),(i={}).devicesid="",2!=s.status){e.next=43;break}return l=r.collection("students").doc(s.uid),e.next=7,l.get();case 7:return u=e.sent,e.next=10,r.collection("live_events").doc(n).collection("submission").doc(t.id).collection("devices").get();case 10:if(e.sent.forEach(function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.devicesid+=","+t.id;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u.exists){e.next=31;break}return d=r.collection("users").doc(s.uid),e.next=16,d.get();case 16:p=e.sent,i.display_name="undefined"!==typeof p.data().display_name?p.data().display_name:s.display_name,i.school_id="undefined"!==typeof s.school_id?s.school_id:p.data().school_id,i.point=s.point,i.submit_at=w(s.submit_at),i.created_at=w(s.created_at),i.time_work=parseInt((s.submit_at-s.created_at)/60),i.email="undefined"!==typeof p.data().email?p.data().email:"",i.grade="undefined"!==typeof p.data().class?p.data().class:"",a.push(i),parseInt((s.submit_at-s.created_at)/60)>70?i.autosubmit="Tool auto":i.autosubmit="",i.not_student="Ch\u01b0a c\xf3 trong Student",console.log(i),e.next=43;break;case 31:i.display_name="undefined"!==typeof s.display_name?s.display_name:u.data().lastname+u.data().firstname,i.school_id="undefined"!==typeof s.school_id?s.school_id:u.data().school_id,i.point=s.point,i.submit_at=w(s.submit_at),i.created_at=w(s.created_at),i.time_work=parseInt((s.submit_at-s.created_at)/60),i.email="undefined"!==typeof u.data().email?u.data().email:"",i.grade="undefined"!==typeof u.data().class?u.data().class.name:"",a.push(i),parseInt((s.submit_at-s.created_at)/60)>70?i.autosubmit="Tool auto":i.autosubmit="",console.log(i),i.not_student="";case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11,r.collection("live_events").doc(n).get();case 11:s=e.sent,i=s.data(),setTimeout((function(){var e=i.title,t={Sheets:{data:f.utils.json_to_sheet(a)},SheetNames:["data"]},n=f.write(t,{bookType:"xlsx",type:"array"}),o=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});p.saveAs(o,e+".xlsx")}),3e4),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(4);case 18:e.next=20;break;case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()},2255:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(3),c=n.n(r);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=Object(a.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,r=e.size,c=void 0===r?24:r,l=i(e,["color","size"]);return o.a.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),o.a.createElement("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),o.a.createElement("polygon",{points:"22 2 15 22 11 13 2 9 22 2"}))}));l.propTypes={color:c.a.string,size:c.a.oneOfType([c.a.string,c.a.number])},l.displayName="Send",t.a=l},2345:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(3),c=n.n(r);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=Object(a.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,r=e.size,c=void 0===r?24:r,l=i(e,["color","size"]);return o.a.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),o.a.createElement("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),o.a.createElement("polyline",{points:"17 21 17 13 7 13 7 21"}),o.a.createElement("polyline",{points:"7 3 7 8 15 8"}))}));l.propTypes={color:c.a.string,size:c.a.oneOfType([c.a.string,c.a.number])},l.displayName="Save",t.a=l},2738:function(e,t,n){"use strict";n.r(t);var a=n(9),o=n.n(a),r=n(14),c=n(17),s=n(0),i=n.n(s),l=n(380),u=n(1180),d=n(374),p=n(390),f=n(1258),g=n(28),m=n(8),v=n(2),h=n(1188),b=n(1233),_=n(1191),E=n(84),k=n(1151),x=n(181),y=n(1278),w=n.n(y),T=n(1680),A=Object(l.a)((function(e){return{root:{},action:{marginBottom:e.spacing(1),"& + &":{marginLeft:e.spacing(1)}}}})),O=function(e){var t=e.className,n=Object(g.a)(e,["className"]),a=A();return i.a.createElement(h.a,Object.assign({className:Object(v.default)(a.root,t),container:!0,justify:"space-between",spacing:3},n),i.a.createElement(h.a,{item:!0},i.a.createElement(b.a,{separator:i.a.createElement(w.a,{fontSize:"small"}),"aria-label":"breadcrumb"},i.a.createElement(_.a,{variant:"body1",color:"inherit",to:"/hbon/management/schools",component:m.a},"Trang ch\u1ee7"),i.a.createElement(_.a,{variant:"body1",color:"inherit",to:"#",component:m.a},"Qu\u1ea3n l\xfd"),i.a.createElement(E.a,{variant:"body1",color:"textPrimary"},"N\u1ed9i dung")),i.a.createElement(E.a,{variant:"h3",color:"textPrimary"},"Danh s\xe1ch n\u1ed9i dung")),i.a.createElement(h.a,{item:!0},i.a.createElement(_.a,{to:"/hbon/management/contents/createlive",component:m.a},i.a.createElement(k.a,{color:"secondary",variant:"contained",startIcon:i.a.createElement(x.a,{fontSize:"small"},i.a.createElement(T.a,null))},"Th\xf4ng b\xe1o live")),i.a.createElement(_.a,{to:"/hbon/management/contents/create",component:m.a},i.a.createElement(k.a,{color:"secondary",variant:"contained",startIcon:i.a.createElement(x.a,{fontSize:"small"},i.a.createElement(T.a,null))},"Th\xeam N\u1ed9i dung"))))},S=n(57),j=n(24),R=n(78),P=n.n(R),U=n(1174),C=n(1230),I=n(1198),N=n(1187),D=n(1161),z=n(1189),B=n(1163),L=n(1155),F=n(1199),G=n(1160),H=n(1157),q=n(1156),M=n(646),V=n(1181),W=n(1186),K=n(1184),J=n(1185),Y=n(1183),X=n(1164),Z=n(1226),Q=n(1224),$=n(2255),ee=n(2345),te=(n(1588),n(55)),ne=n(1364),ae=n(62),oe=(n(1884),n(2236)),re=[{value:"all",label:"T\u1ea5t c\u1ea3"}],ce=[{value:"updatedAt|desc",label:"Last update (newest first)"},{value:"updatedAt|asc",label:"Last update (oldest first)"},{value:"name|desc",label:"T\xean (gi\u1ea3m)"},{value:"name|asc",label:"T\xean (t\u0103ng)"}],se=function(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0},ie=function(e,t){var n=t.split("|"),a=Object(c.a)(n,2),o=a[0],r=function(e,t){return"desc"===e?function(e,n){return se(e,n,t)}:function(e,n){return-se(e,n,t)}}(a[1],o),s=e.map((function(e,t){return[e,t]}));return s.sort((function(e,t){var n=r(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),s.map((function(e){return e[0]}))},le=Object(l.a)((function(e){return{root:{},queryField:{width:500},bulkOperations:{position:"relative"},bulkActions:{paddingLeft:4,paddingRight:4,marginTop:6,position:"absolute",width:"100%",zIndex:2,backgroundColor:e.palette.background.default},bulkAction:{marginLeft:e.spacing(2)},avatar:{height:42,width:42,marginRight:e.spacing(1)}}})),ue=function(e){var t=e.className,n=e.contents,a=Object(g.a)(e,["className","contents"]),l=Object(te.g)(),u=Object(s.useState)(!1),p=Object(c.a)(u,2),f=p[0],h=p[1],b=function(){h(!1)},_=le(),E=Object(ae.b)().enqueueSnackbar,y=Object(s.useState)("all"),w=Object(c.a)(y,2),T=w[0],A=w[1],O=Object(s.useState)([]),R=Object(c.a)(O,2),se=R[0],ue=R[1],de=Object(s.useState)(0),pe=Object(c.a)(de,2),fe=pe[0],ge=pe[1],me=Object(s.useState)(10),ve=Object(c.a)(me,2),he=ve[0],be=ve[1],_e=Object(s.useState)(""),Ee=Object(c.a)(_e,2),ke=Ee[0],xe=Ee[1],ye=Object(s.useState)(ce[0].value),we=Object(c.a)(ye,2),Te=we[0],Ae=we[1],Oe=Object(s.useState)({hasAcceptedMarketing:null,isProspect:null,isReturning:null}),Se=Object(c.a)(Oe,2),je=Se[0],Re=Se[1],Pe=function(e){ue(e.target.checked?n.map((function(e){return e.id})):[])},Ue=function(e,t,n){return e.filter((function(e){var a=!0;if(t){var o=!1;["title","description"].forEach((function(n){n in e&&e[n].toLowerCase().includes(t.toLowerCase())&&(o=!0)})),o||(a=!1)}return Object.keys(n).forEach((function(t){var o=n[t];o&&e[t]!==o&&(a=!1)})),a}))}(n,ke,je),Ce=function(e,t,n){return e.slice(t*n,t*n+n)}(ie(Ue,Te),fe,he),Ie=se.length>0,Ne=se.length>0&&se.length<n.length,De=se.length===n.length,ze=Object(s.useState)(!1),Be=Object(c.a)(ze,2),Le=Be[0],Fe=Be[1];return i.a.createElement(U.a,Object.assign({className:Object(v.default)(_.root,t)},a),i.a.createElement(C.a,{onChange:function(e,t){var n=Object(j.a)(Object(j.a)({},je),{},{hasAcceptedMarketing:null,isProspect:null,isReturning:null});"all"!==t&&(n[t]=!0),Re(n),ue([]),A(t)},scrollButtons:"auto",textColor:"secondary",value:T,variant:"scrollable"},!0===Le&&i.a.createElement(oe.WaveLoading,null),re.map((function(e){return i.a.createElement(I.a,{key:e.value,value:e.value,label:e.label})}))),i.a.createElement(N.a,null),i.a.createElement(d.a,{p:2,minHeight:56,display:"flex",alignItems:"center"},i.a.createElement(D.a,{className:_.queryField,InputProps:{startAdornment:i.a.createElement(z.a,{position:"start"},i.a.createElement(x.a,{fontSize:"small",color:"action"},i.a.createElement(Z.a,null)))},onChange:function(e){e.persist(),xe(e.target.value)},placeholder:"T\xecm ki\u1ebfm",value:ke,variant:"outlined"}),i.a.createElement(d.a,{flexGrow:1}),i.a.createElement(D.a,{label:"S\u1eafp x\u1ebfp",name:"sort",onChange:function(e){e.persist(),Ae(e.target.value)},select:!0,SelectProps:{native:!0},value:Te,variant:"outlined"},ce.map((function(e){return i.a.createElement("option",{key:e.value,value:e.value},e.label)})))),Ie&&i.a.createElement("div",{className:_.bulkOperations},i.a.createElement("div",{className:_.bulkActions},i.a.createElement(B.a,{checked:De,indeterminate:Ne,onChange:Pe}),i.a.createElement(k.a,{variant:"outlined",className:_.bulkAction,onClick:function(){Object(ne.c)(se),l.push("/hbon/management/contents")}},"X\xf3a"))),i.a.createElement(P.a,null,i.a.createElement(d.a,{minWidth:700},i.a.createElement(L.a,null,i.a.createElement(F.a,null,i.a.createElement(G.a,null,i.a.createElement(H.a,{padding:"checkbox"},i.a.createElement(B.a,{checked:De,indeterminate:Ne,onChange:Pe})),i.a.createElement(H.a,null,"Lo\u1ea1i Content"),i.a.createElement(H.a,null,"Ti\xeau \u0111\u1ec1 (title)"),i.a.createElement(H.a,null,"Cover"),i.a.createElement(H.a,null,"M\xf4 t\u1ea3 (description)"),i.a.createElement(H.a,null,"Roles"),i.a.createElement(H.a,null,"Tags"),i.a.createElement(H.a,null,"Votes"),i.a.createElement(H.a,{align:"right"},"Actions"))),i.a.createElement(q.a,null,Ce.map((function(e){var t=null,n=null;"reactions"in e&&(t=e.reactions.upvotes,n=e.reactions.downvotes);var a=se.includes(e.id);return"roles"in e||(e.roles=[""]),"tags"in e||(e.tags=[""]),i.a.createElement(G.a,{hover:!0,key:e.id,selected:a},i.a.createElement(H.a,{padding:"checkbox"},i.a.createElement(B.a,{checked:a,onChange:function(t){return n=e.id,void(se.includes(n)?ue((function(e){return e.filter((function(e){return e!==n}))})):ue((function(e){return[].concat(Object(S.a)(e),[n])})));var n},value:a})),i.a.createElement(H.a,null,i.a.createElement(d.a,{display:"flex",alignItems:"center"},e.content_type)),i.a.createElement(H.a,null,e.title),i.a.createElement(H.a,null,e.cover),i.a.createElement(H.a,null,e.description),i.a.createElement(H.a,null,e.roles.map((function(e){return i.a.createElement("span",{key:e},e,",")}))),i.a.createElement(H.a,null,e.tags.map((function(e){return i.a.createElement("span",{key:e},e,",")}))),i.a.createElement(H.a,null,i.a.createElement("span",null,t||null),",",i.a.createElement("span",null,n||null)),i.a.createElement(H.a,{align:"right"},i.a.createElement(M.a,{component:m.a,to:"/hbon/management/contents/edit/"+e.id},i.a.createElement(x.a,{fontSize:"small"},i.a.createElement(Q.a,null))),i.a.createElement(M.a,{onClick:function(){h(e.id)}},i.a.createElement(x.a,{fontSize:"small"},i.a.createElement($.a,null))),i.a.createElement(V.a,{open:f==e.id,onClose:b,"aria-labelledby":"draggable-dialog-title",data:e.id},i.a.createElement(W.a,{style:{cursor:"move"},id:"draggable-dialog-title"},"Send noti"),i.a.createElement(K.a,null,i.a.createElement(J.a,null,"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n send noti cho  : ",e.title," ?")),i.a.createElement(Y.a,null,i.a.createElement(k.a,{autoFocus:!0,onClick:b,color:"primary"},"Cancel"),i.a.createElement(k.a,{value:e.id,onClick:function(){var t=Object(r.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,Object(ne.i)(e.id);case 3:a=t.sent,console.log(a),E("G\u1eedi notify th\xe0nh c\xf4ng",{variant:"success",action:i.a.createElement(k.a,null,"See all")}),h(!1),l.push("/hbon/management/contents");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),color:"primary"},"Send"))),e.tags.includes("english-marathon")?i.a.createElement(M.a,{title:"Down load nhanh",onClick:Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Fe(!0),t.next=3,Object(ne.e)(e.id);case 3:setTimeout((function(){Fe(!1)}),3e4);case 4:case"end":return t.stop()}}),t)})))},i.a.createElement(x.a,{fontSize:"small"},i.a.createElement(ee.a,null))):i.a.createElement("p",null)))})))))),i.a.createElement(X.a,{component:"div",count:Ue.length,onChangePage:function(e,t){ge(t)},onChangeRowsPerPage:function(e){be(parseInt(e.target.value))},page:fe,rowsPerPage:he,rowsPerPageOptions:[5,10,25]}))};ue.defaultProps={contents:[]};var de=ue,pe=Object(l.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));t.default=function(){var e=pe(),t=Object(f.a)(),n=Object(s.useState)([]),a=Object(c.a)(n,2),l=a[0],g=a[1],m=Object(s.useCallback)(Object(r.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ne.h)();case 3:n=e.sent,t.current&&g(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);return Object(s.useEffect)((function(){m()}),[m]),i.a.createElement(p.a,{className:e.root,title:"Tr\u01b0\u1eddng h\u1ecdc"},i.a.createElement(u.a,{maxWidth:!1},i.a.createElement(O,null),i.a.createElement(d.a,{mt:3},i.a.createElement(de,{contents:l}))))}}}]);
//# sourceMappingURL=58.75be7f21.chunk.js.map