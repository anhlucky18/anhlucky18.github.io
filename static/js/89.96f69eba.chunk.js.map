{"version":3,"sources":["hooks/useIsMountedRef.js","../node_modules/@material-ui/icons/NavigateNext.js","utils/bytesToSize.js","components/FilesDropzone.js","api/ads.js","views/ads/AdEditView/AdEditForm.js","views/ads/AdEditView/Header.js","views/ads/AdEditView/index.js"],"names":["useIsMountedRef","isMounted","useRef","useEffect","current","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","bytesToSize","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","useStyles","makeStyles","theme","root","dropZone","border","palette","divider","padding","spacing","outline","display","justifyContent","flexWrap","alignItems","backgroundColor","action","hover","opacity","cursor","dragActive","active","image","width","info","marginTop","list","maxHeight","actions","marginLeft","FilesDropzone","className","handleDrop","files","handleRemoveAll","rest","classes","useDropzone","onDrop","getRootProps","getInputProps","isDragActive","clsx","alt","src","Typography","gutterBottom","variant","Box","mt","color","Link","underline","length","options","suppressScrollX","List","map","file","ListItem","ListItemIcon","ListItemText","primary","name","primaryTypographyProps","secondary","size","Tooltip","title","IconButton","edge","Button","onClick","listAllAd","a","app","firestore","collection","get","querySnapshot","ad","docs","doc","id","data","console","addAd","values","metadata","contentType","create_at","getFirestore","FieldValue","serverTimestamp","add","adRef","adData","img_url","storageRef","storage","ref","uploadTask","child","put","on","getStorage","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","state","TaskState","PAUSED","RUNNING","error","code","getDownloadURL","then","downloadURL","img","update","deleteAds","ids","delete","err","getAdApi","updateAd","set","result","AdEditForm","history","useHistory","enqueueSnackbar","useSnackbar","useState","setFiles","useCallback","acceptedFiles","prevFiles","initialValues","switch_time","tags","url","submit","validationSchema","Yup","shape","max","required","urswitch_timel","onSubmit","setErrors","setStatus","setSubmitting","split","wait","success","href","push","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","Card","CardContent","type","Grid","container","item","md","xs","TextField","Boolean","fullWidth","helperText","label","onBlur","onChange","disableHoverListener","CardHeader","Divider","disabled","Header","Breadcrumbs","separator","fontSize","to","component","RouterLink","background","dark","minHeight","paddingTop","paddingBottom","AdEditView","props","adId","match","params","isMountedRef","setAd","getAd","Page","Container","maxWidth"],"mappings":"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","file":"static/js/89.96f69eba.chunk.js","sourcesContent":["import {useRef, useEffect } from 'react';\n\nconst useIsMountedRef = () => {\n  const isMounted = useRef(true);\n\n  useEffect(() => () => {\n    isMounted.current = false;\n  }, []);\n\n  return isMounted;\n};\n\nexport default useIsMountedRef;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');\n\nexports.default = _default;","/* eslint-disable no-restricted-properties */\nconst bytesToSize = (bytes, decimals = 2) => {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n\nexport default bytesToSize;\n","import React, {\n  useState,\n  useCallback\n} from 'react';\nimport clsx from 'clsx';\nimport { useDropzone } from 'react-dropzone';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport PropTypes from 'prop-types';\nimport {\n  Box,\n  Button,\n  IconButton,\n  Link,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport bytesToSize from 'src/utils/bytesToSize';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  dropZone: {\n    border: `1px dashed ${theme.palette.divider}`,\n    padding: theme.spacing(6),\n    outline: 'none',\n    display: 'flex',\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    '&:hover': {\n      backgroundColor: theme.palette.action.hover,\n      opacity: 0.5,\n      cursor: 'pointer'\n    }\n  },\n  dragActive: {\n    backgroundColor: theme.palette.action.active,\n    opacity: 0.5\n  },\n  image: {\n    width: 130\n  },\n  info: {\n    marginTop: theme.spacing(1)\n  },\n  list: {\n    maxHeight: 320\n  },\n  actions: {\n    marginTop: theme.spacing(2),\n    display: 'flex',\n    justifyContent: 'flex-end',\n    '& > * + *': {\n      marginLeft: theme.spacing(2)\n    }\n  }\n}));\n\nconst FilesDropzone = ({ className,handleDrop,files,handleRemoveAll, ...rest }) => {\n  const classes = useStyles();\n  // const [files, setFiles] = useState([]);\n\n  // const handleDrop = useCallback((acceptedFiles) => {\n  //   setFiles((prevFiles) => [...prevFiles].concat(acceptedFiles));\n  //   console.log(\"con\");\n  // }, []);\n\n  // const handleRemoveAll = () => {\n  //   setFiles([]);\n  // };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop: handleDrop\n  });\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <div\n        className={clsx({\n          [classes.dropZone]: true,\n          [classes.dragActive]: isDragActive\n        })}\n        {...getRootProps()}\n      >\n        <input {...getInputProps()} />\n        <div>\n          <img\n            alt=\"Select file\"\n            className={classes.image}\n            src=\"/static/images/undraw_add_file2_gvbb.svg\"\n          />\n        </div>\n        <div>\n          <Typography\n            gutterBottom\n            variant=\"h3\"\n          >\n           Tải file lên\n          </Typography>\n          <Box mt={2}>\n            <Typography\n              color=\"textPrimary\"\n              variant=\"body1\"\n            >\n              Bằng cách kéo thả hoặc click \n              {' '}\n              <Link underline=\"always\">vào đây</Link>\n              {' '}\n              để chọn file trên máy của bạn\n            </Typography>\n          </Box>\n        </div>\n      </div>\n      {files.length > 0 && (\n        <>\n          <PerfectScrollbar options={{ suppressScrollX: true }}>\n            <List className={classes.list}>\n              {files.map((file, i) => (\n                <ListItem\n                  divider={i < files.length - 1}\n                  key={i}\n                >\n                  <ListItemIcon>\n                    <FileCopyIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={file.name}\n                    primaryTypographyProps={{ variant: 'h5' }}\n                    secondary={bytesToSize(file.size)}\n                  />\n                  <Tooltip title=\"More options\">\n                    <IconButton edge=\"end\">\n                      <MoreIcon />\n                    </IconButton>\n                  </Tooltip>\n                </ListItem>\n              ))}\n            </List>\n          </PerfectScrollbar>\n          <div className={classes.actions}>\n            <Button\n              onClick={handleRemoveAll}\n              size=\"small\"\n            >\n              Remove all\n            </Button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nFilesDropzone.propTypes = {\n  className: PropTypes.string\n};\n\nexport default FilesDropzone;\n","\nimport app from './_firebase';\n\nimport {getFirestore} from 'firebase/firestore'\nimport {getStorage} from 'firebase/storage'\nexport const listAllAd = async () => {\n  try {\n    let querySnapshot = await app.firestore().collection('ads').get();\n    const ad = querySnapshot.docs.map((doc) => {\n      return {\n        id: doc.id,\n        ...doc.data()\n      }\n    })\n    return ad\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n\nexport const addAd = async (values,image) => {\n  try {\n    \n    if(typeof(image)==\"undefined\"){\n      return;\n    }\n    var metadata = {\n      contentType: 'image/jpeg'\n    };\n    values.create_at = getFirestore().FieldValue.serverTimestamp();\n    let adRef = await app.firestore().collection('ads').add(values);\n    let ad = await adRef.get();\n    let adData = ad.data();\n    console.log(\"done ad:\"+ad.id)\n    let img_url = \"public/images/ads/\" + ad.id;\n    var storageRef = app.storage().ref();\n    var uploadTask = storageRef.child(img_url).put(image, metadata);\n    uploadTask.on(getStorage().TaskEvent.STATE_CHANGED, // or 'state_changed'\n      function (snapshot) {\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload cover is ' + progress + '% done');\n        switch (snapshot.state) {\n          case getStorage().TaskState.PAUSED: // or 'paused'\n            console.log('Upload cover is paused');\n            break;\n          case getStorage().TaskState.RUNNING: // or 'running'\n            console.log('Upload cover is running');\n            break;\n        }\n      },\n      function (error) {\n\n        switch (error.code) {\n          case 'storage/unauthorized':\n              console.log(\"unauthorized\")\n            break;\n          case 'storage/canceled':\n            console.log(\"cancel\")\n            break;\n          case 'storage/unknown':\n\n            console.log(\"unkonwn\")\n            // Unknown error occurred, inspect error.serverResponse\n            break;\n        }\n      },\n      function () {\n        // Upload completed successfully, now we can get the download URL\n        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          console.log('File available at', downloadURL);\n          adData.img = downloadURL;\n          app.firestore().collection('ads').doc(ad.id).update(adData);\n        });\n      });\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const deleteAds = (ids) => {\n  try {\n    ids.map((id) => {\n      let img_url = \"public/images/ads/\" + id;\n      var storageRef = app.storage().ref();\n      storageRef.child(img_url).delete();\n      app.firestore().collection('ads').doc(id).delete();\n    })\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const getAdApi = async (id) => {\n  try {\n    let querySnapshot = await app.firestore().collection('ads').doc(id).get();\n    const ad = querySnapshot.data()\n    ad.id = id\n    return ad\n  } catch (err) {\n    console.log(err);\n  }\n}\nexport const updateAd = async (data,image) => {\n  try {\n    console.log(\"update ads\")\n    let id = data.id;\n    let result = await app.firestore().collection('ads').doc(id).set(data);\n    console.log(\"done ad:\"+data.id)\n    var metadata = {\n      contentType: 'image/jpeg'\n    };\n    let img_url = \"public/images/ads/\" + data.id;\n    var storageRef = app.storage().ref();\n    var uploadTask = storageRef.child(img_url).put(image, metadata);\n    uploadTask.on(getStorage().TaskEvent.STATE_CHANGED, // or 'state_changed'\n      function (snapshot) {\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload cover is ' + progress + '% done');\n        switch (snapshot.state) {\n          case getStorage().TaskState.PAUSED: // or 'paused'\n            console.log('Upload cover is paused');\n            break;\n          case getStorage().TaskState.RUNNING: // or 'running'\n            console.log('Upload cover is running');\n            break;\n        }\n      },\n      function (error) {\n\n        switch (error.code) {\n          case 'storage/unauthorized':\n              console.log(\"unauthorized\")\n            break;\n          case 'storage/canceled':\n            console.log(\"cancel\")\n            break;\n          case 'storage/unknown':\n\n            console.log(\"unkonwn\")\n            // Unknown error occurred, inspect error.serverResponse\n            break;\n        }\n      },\n      function () {\n        // storageRef.child(img_url).delete();\n        // Upload completed successfully, now we can get the download URL\n        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          console.log('File available at', downloadURL);\n          data.img = downloadURL;\n          app.firestore().collection('ads').doc(data.id).update(data);\n        });\n      });\n    return result\n  } catch (err) {\n    console.log(err);\n  }\n};\n","import React,{\n  useState,\n  useEffect,\n  useCallback} from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Grid,\n  TextField,\n  makeStyles,\n  CardHeader,\n  Divider,\n  Tooltip\n} from '@material-ui/core';\nimport FilesDropzone from 'src/components/FilesDropzone';\nimport wait from 'src/utils/wait';\nimport {updateAd} from '../../../api/ads'\nimport { useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst AdEditForm = ({\n  className,\n  ad,\n  ...rest\n}) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [files, setFiles] = useState([]);\n\n\n  const handleRemoveAll = () => {\n    setFiles([]);\n  };\n  const handleDrop = useCallback((acceptedFiles) => {\n    setFiles((prevFiles) => acceptedFiles);\n  }, []);\n  \n  return (\n    <Formik\n      initialValues={{\n        id: ad.id || '',\n        switch_time: ad.switch_time || '',\n        tags: ad.tags || '',\n        url: ad.url || '',\n        img: ad.img || '',\n        submit: null\n      }}\n      validationSchema={Yup.object().shape({\n        tags: Yup.string().max(255).required('Tag is required'),\n        url: Yup.string().max(255),\n        urswitch_timel: Yup.number().max(2)\n      })}\n      onSubmit={async (values, {\n        \n        setErrors,\n        setStatus,\n        setSubmitting\n      }) => {\n        try {\n          values.tags = values.tags.split(\",\")\n          console.log(values)\n          updateAd(values,files[0])\n\n          // NOTE: Make API request\n          await wait(500);\n          \n          setStatus({ success: true });\n          setSubmitting(false);\n          enqueueSnackbar('Cập nhật thành công', {\n            variant: 'success',\n            action: <a href=\"/hbon/management/ads\"><Button>Xem tất cả</Button></a>\n          });\n\n          history.push('/hbon/management/ads');\n        } catch (err) {\n          console.error(err);\n          setStatus({ success: false });\n          setErrors({ submit: err.message });\n          setSubmitting(false);\n        }\n      }}\n    >\n      {({\n        errors,\n        handleBlur,\n        handleChange,\n        handleSubmit,\n        isSubmitting,\n        touched,\n        values\n      }) => (\n        <form\n          className={clsx(classes.root, className)}\n          onSubmit={handleSubmit}\n          {...rest}\n        >\n          <Card>\n            <CardContent>\n              <input type=\"hidden\" name=\"id\" \n                    required\n                    value={values.id}/>\n              <Grid\n                container\n                spacing={3}\n              >\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.switch_time && errors.switch_time)}\n                    fullWidth\n                    helperText={touched.switch_time && errors.switch_time}\n                    label=\"Thời gian hiển thị(s)\"\n                    name=\"switch_time\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.switch_time}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <Tooltip title=\"Viết liền, không dấu, cách bởi dấu ,\" disableHoverListener>\n                  <TextField\n                    error={Boolean(touched.tags && errors.tags)}\n                    fullWidth\n                    helperText={touched.tags && errors.tags}\n                    label=\"tags\"\n                    name=\"tags\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.tags}\n                    variant=\"outlined\"\n                  />\n                  </Tooltip>\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <Tooltip title=\"Định dạng url\" disableHoverListener>\n                  <TextField\n                    error={Boolean(touched.url && errors.url)}\n                    fullWidth\n                    helperText={touched.url && errors.url}\n                    label=\"Target url\"\n                    name=\"url\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.url}\n                    variant=\"outlined\"\n                  />\n                  </Tooltip>\n                </Grid>\n                <Grid\n                  item\n                  md={12}\n                  xs={12}\n                >\n                  <img src={values.img}></img>\n                </Grid>\n              </Grid>\n              <Box mt={3}>\n                <Card>\n                  <CardHeader title=\"Tải ảnh lên\" />\n                  <Divider />\n                  <CardContent>\n                    <FilesDropzone handleDrop = {handleDrop} files={files} handleRemoveAll={handleRemoveAll}/>\n                  </CardContent>\n                </Card>\n              </Box>\n              <Box mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                >\n                  Lưu\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </form>\n      )}\n    </Formik>\n  );\n};\n\nAdEditForm.propTypes = {\n  className: PropTypes.string,\n  ad: PropTypes.object.isRequired\n};\n\nexport default AdEditForm;\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport {\n  Breadcrumbs,\n  Link,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst Header = ({ className, ...rest }) => {\n  const classes = useStyles();\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n      >\n      <Link\n        variant=\"body1\"\n        color=\"inherit\"\n        to=\"/hbon \"\n        component={RouterLink}\n      >\n        Trang chủ\n      </Link>\n      <Link\n        variant=\"body1\"\n        color=\"inherit\"\n        to=\"/hbon/management/ads\"\n        component={RouterLink}\n      >\n        Quảng cáo \n      </Link>\n      </Breadcrumbs>\n      <Typography\n        variant=\"h3\"\n        color=\"textPrimary\"\n      >\n        Chỉnh sửa quảng cáo \n      </Typography>\n    </div>\n  );\n};\n\nHeader.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Header;\n","import React, {\n  useState,\n  useCallback,\n  useEffect\n} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box,\n  Container,\n  makeStyles\n} from '@material-ui/core';\nimport axios from 'src/utils/axios';\nimport Page from 'src/components/Page';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\nimport AdEditForm from './AdEditForm';\nimport Header from './Header';\nimport {getAdApi}  from '../../../api/ads'\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3)\n  }\n}));\n\nconst  AdEditView  = (props) => {\n  const {adId } = props.match.params;\n  const classes = useStyles();\n  const isMountedRef = useIsMountedRef();\n  const [ad, setAd] = useState(null);\n\n  const getAd = useCallback(async () => {\n    try {\n      let ad = await getAdApi(adId);\n      if (isMountedRef.current) {\n        setAd(ad);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }, [isMountedRef]);\n\n  useEffect(() => {\n    getAd();\n  }, [getAd]);\n\n  if (!ad) {\n    return null;\n  }\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Ad Edit\"\n    >\n      <Container maxWidth={false}>\n        <Header />\n      </Container>\n      <Box mt={3}>\n        <Container maxWidth=\"lg\">\n          <AdEditForm ad={ad} />\n        </Container>\n      </Box>\n    </Page>\n  );\n};\nexport default AdEditView;\n"],"sourceRoot":""}