{"version":3,"sources":["hooks/useIsMountedRef.js","../node_modules/@material-ui/icons/NavigateNext.js","api/schools.js","views/schools/SchoolEditView/SchoolEditForm.js","views/schools/SchoolEditView/Header.js","views/schools/SchoolEditView/index.js"],"names":["useIsMountedRef","isMounted","useRef","useEffect","current","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","addSchool","data","a","app","firestore","collection","doc","id","docRef","total_student","total_teacher","lms_url","trim","get","exists","console","log","set","getSchoolApi","querySnapshot","school","updateSchool","update","result","listAllSchool","docs","map","has_running_command","school_id","where","commands","uploadExcel","user","file","year","reader","FileReader","rABS","readAsBinaryString","onabort","onerror","onload","e","bstr","target","workbook","XLSX","read","type","command","action","status","executer","Sheets","length","keys","sheet0_list","SheetNames","sheet0","utils","sheet_to_json","raw","dateNF","header","blankrows","defval","hs","JSON","stringify","sheet1_list","sheet1","gv","template","add","schoolApi","commandid","url","API_URL","axios","post","then","resp","readAsArrayBuffer","useStyles","makeStyles","root","SchoolEditForm","className","rest","classes","history","useHistory","useSnackbar","enqueueSnackbar","initialValues","address","email","name","phone","district","province","submit","validationSchema","Yup","shape","max","required","onSubmit","values","setErrors","setStatus","setSubmitting","wait","push","error","success","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","clsx","Card","CardContent","Grid","container","spacing","item","md","xs","TextField","Boolean","fullWidth","helperText","label","onBlur","onChange","variant","disabled","country","state","Box","mt","Button","color","Header","Breadcrumbs","separator","fontSize","Link","to","component","RouterLink","Typography","theme","backgroundColor","palette","background","dark","minHeight","paddingTop","paddingBottom","SchoolEditView","props","schoolId","match","params","isMountedRef","useState","setSchool","getSchool","useCallback","Page","title","Container","maxWidth"],"mappings":"gKAAA,WAYeA,IAVS,WACtB,IAAMC,EAAYC,kBAAO,GAMzB,OAJAC,qBAAU,kBAAM,WACdF,EAAUG,SAAU,KACnB,IAEIH,I,kCCPT,IAAII,EAAyBC,EAAQ,KAEjCC,EAA0BD,EAAQ,KAEtCE,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAAQN,EAAwBD,EAAQ,IAIxCQ,GAAW,EAFMT,EAAuBC,EAAQ,MAElBM,SAAuBC,EAAME,cAAc,OAAQ,CACnFC,EAAG,mDACD,gBAEJN,EAAQE,QAAUE,G,6YCbLG,EAAS,uCAAG,WAAOC,GAAP,eAAAC,EAAA,+EAEEC,IAAIC,YAAYC,WAAW,WAAWC,IAAIL,EAAKM,IAFjD,UAEbC,EAFa,OAGjBP,EAAKQ,cAAc,EACnBR,EAAKS,cAAc,EACnBT,EAAKU,QAAQV,EAAKM,GAAGK,OAAO,eAChBJ,EAAOK,MACXC,OAPS,wBAQbC,QAAQC,IAAI,aARC,kBASN,WATM,eAWbD,QAAQC,IAAIf,GAXC,UAYOE,IAAIC,YAAYC,WAAW,WAAWC,IAAIL,EAAKM,IAAIU,IAAIhB,GAZ9D,eAabc,QAAQC,IAAI,sBAbC,0DAiBjBD,QAAQC,IAAR,MAjBiB,0DAAH,sDAqBTE,EAAY,uCAAG,WAAOX,GAAP,iBAAAL,EAAA,+EAEOC,IAAIC,YAAYC,WAAW,WAAWC,IAAIC,GAAIM,MAFrD,cAEhBM,EAFgB,QAGdC,EAASD,EAAclB,QACtBM,GAAGA,EAJU,kBAKXa,GALW,gCAOpBL,QAAQC,IAAR,MAPoB,yDAAH,sDAWZK,EAAY,uCAAG,WAAOpB,GAAP,iBAAAC,EAAA,sEAEhBK,EAAGN,EAAKM,GAFQ,SAGAJ,IAAIC,YAAYC,WAAW,WAAWC,IAAIC,GAAIe,OAAOrB,GAHrD,cAGhBsB,EAHgB,yBAIbA,GAJa,gCAMpBR,QAAQC,IAAR,MANoB,yDAAH,sDAUZQ,EAAa,uCAAG,WAAOvB,GAAP,iBAAAC,EAAA,+EAEMC,IAAIC,YAAYC,WAAW,WAAWQ,MAF5C,cAEjBM,EAFiB,OAGfC,EAASD,EAAcM,KAAKC,KAAI,SAACpB,GACnC,OAAO,aAAEC,GAAID,EAAIC,IAAOD,EAAIL,WAJX,kBAMZmB,GANY,gCAQrBL,QAAQC,IAAR,MARqB,yDAAH,sDAYbW,EAAmB,uCAAG,WAAOC,GAAP,iBAAA1B,EAAA,+EAGDC,IAAIC,YAAYC,WAAW,YAAYwB,MAAM,iBAAiB,KAAKD,GAAWC,MAAM,OAAO,KAAK,UAAUA,MAAM,SAAS,KAAK,UAAUA,MAAM,SAAS,KAAK,GAAGhB,MAH9J,cAGvBM,EAHuB,OAIrBW,EAAWX,EAAcM,KAAKC,KAAI,SAACpB,GACrC,OAAO,aACLC,GAAID,EAAIC,IACLD,EAAIL,WAGXc,QAAQC,IAAIc,GAVa,kBAWlBA,GAXkB,gCAc3Bf,QAAQC,IAAR,MAd2B,yDAAH,sDA4BjBe,EAAW,uCAAG,WAAOC,EAAKC,EAAKL,GAAjB,mBAAA1B,EAAA,mEAEjBD,EAAO,CAAC,UAAY2B,IACnBM,KAAK,YACJC,EAAS,IAAIC,WACbC,IAASF,EAAOG,mBACtBH,EAAOI,QAAU,kBAAMxB,QAAQC,IAAI,6BACnCmB,EAAOK,QAAU,kBAAMzB,QAAQC,IAAI,4BACnCmB,EAAOM,OAAP,uCAAgB,WAAMC,GAAN,mCAAAxC,EAAA,yDAERyC,EAAOD,EAAEE,OAAOrB,OAChBsB,EAAWC,IAAKC,KAAKJ,EAAM,CAAEK,KAAMX,EAAO,SAAW,UACrDY,EAAU,CACZD,KAAM,SACNE,OAAQ,SACRC,OAAQ,EACRC,SAAUpB,GAEZjB,QAAQC,IAAI6B,EAASQ,QACjBC,EAAO/D,OAAOgE,KAAMV,EAASQ,QAAQC,OACzCvC,QAAQC,IAAI,SAASsC,GACV,GAARA,EAbS,iBAeNE,EAAcX,EAASY,WAAW,GAClCC,EAASZ,IAAKa,MAAMC,cAAcf,EAASQ,OAAOG,GAAc,CAChEK,KAAK,EACLC,OAAQ,aACRC,OAAO,EACPC,WAAW,EACXC,OAAQ,KAEZhE,EAAKiE,GAAKC,KAAKC,UAAUV,GACrBW,EAAcxB,EAASY,WAAW,GAClCa,EAASxB,IAAKa,MAAMC,cAAcf,EAASQ,OAAOgB,GAAc,CAChER,KAAK,EACLC,OAAQ,aACRC,OAAO,EACPC,WAAW,EACXC,OAAQ,KAOZhE,EAAKsE,GAAKJ,KAAKC,UAAUE,GACzBrE,EAAKuE,SAAS,EACdvB,EAAQhD,KAAKA,EAvCH,2BA6CM,GAARqD,EA7CE,wBA8CVvC,QAAQC,IAAI,kBA9CF,kBA+CH,0BA/CG,yBAkFUb,IAAIC,YAAYC,WAAW,YAAYoE,IAAIxB,GAlFrD,eAkFRyB,EAlFQ,iBAmFUA,EAAU7D,MAnFpB,gCAmF2BN,GAnF3B,eAmFRA,EAnFQ,OAoFZQ,QAAQC,IAAIT,GACZ0C,EAAQhD,KAAK0E,UAAUpE,EACjBqE,EAtFM,UAsFGC,IAtFH,sBAuFZC,IAAMC,KAAKH,EAAI,CAACrE,GAAGA,IAAKyE,MAAK,SAAAC,GACzBlE,QAAQC,IAAIiE,EAAKhF,SAxFT,kBA2FL,WA3FK,4CAAhB,uDA6FMoC,EArGe,kCAqGFF,EAAOG,mBAAmBL,GArGxB,iDAsGPE,EAAO+C,kBAAkBjD,GAtGlB,iEAwGvBlB,QAAQC,IAAR,MAxGuB,kBAyGhB,yBAzGgB,0DAAH,2D,0SCrEpBmE,EAAYC,aAAW,iBAAO,CAClCC,KAAM,OAiPOC,EA9OQ,SAAC,GAIjB,IAHLC,EAGI,EAHJA,UACAnE,EAEI,EAFJA,OACGoE,EACC,iBACEC,EAAUN,IACVO,EAAUC,cACYC,cAApBC,gBAER,OACE,cAAC,IAAD,CACEC,cAAe,CACbvF,GAAIa,EAAOb,IAAM,GACjBwF,QAAS3E,EAAO2E,SAAW,GAC3BC,MAAO5E,EAAO4E,OAAS,GACvBC,KAAM7E,EAAO6E,MAAQ,GACrBC,MAAO9E,EAAO8E,OAAS,GACvBC,SAAU/E,EAAO+E,UAAY,GAC7BC,SAAUhF,EAAOgF,UAAY,GAC7BzF,QAASS,EAAOT,SAAW,GAC3B0F,OAAQ,MAEVC,iBAAkBC,MAAaC,MAAM,CACnCT,QAASQ,MAAaE,IAAI,KAC1BT,MAAOO,MAAaP,MAAM,yBAAyBS,IAAI,KAAKC,SAAS,qBACrET,KAAMM,MAAaE,IAAI,KAAKC,SAAS,oBACrCR,MAAOK,MAAaE,IAAI,MAE1BE,SAAQ,uCAAE,WAAOC,EAAP,sBAAA1G,EAAA,6DAER2G,EAFQ,EAERA,UACAC,EAHQ,EAGRA,UACAC,EAJQ,EAIRA,cAJQ,SAQNhG,QAAQC,IAAI4F,GACZvF,YAAauF,GATP,SAWAI,YAAK,KAXL,OAYNtB,EAAQuB,KAAK,4BAZP,gDAcNlG,QAAQmG,MAAR,MACAJ,EAAU,CAAEK,SAAS,IACrBN,EAAU,CAAER,OAAQ,KAAIe,UACxBL,GAAc,GAjBR,yDAAF,wDAlBV,SAuCG,gBACCM,EADD,EACCA,OACAC,EAFD,EAECA,WACAC,EAHD,EAGCA,aACAC,EAJD,EAICA,aACAC,EALD,EAKCA,aACAC,EAND,EAMCA,QACAd,EAPD,EAOCA,OAPD,OASC,8CACErB,UAAWoC,kBAAKlC,EAAQJ,KAAME,GAC9BoB,SAAUa,GACNhC,GAHN,aAKE,cAACoC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,uBAAO7E,KAAK,SAASiD,KAAK,KACpBS,UAAQ,EACRhH,MAAOkH,EAAOrG,KACpB,eAACuH,EAAA,EAAD,CACEC,WAAS,EACTC,QAAS,EAFX,UAIE,cAACF,EAAA,EAAD,CACEG,MAAI,EACJC,GAAI,EACJC,GAAI,GAHN,SAKE,cAACC,EAAA,EAAD,CACElB,MAAOmB,QAAQX,EAAQzB,MAAQoB,EAAOpB,MACtCqC,WAAS,EACTC,WAAYb,EAAQzB,MAAQoB,EAAOpB,KACnCuC,MAAM,0BACNvC,KAAK,OACLwC,OAAQnB,EACRoB,SAAUnB,EACVb,UAAQ,EACRhH,MAAOkH,EAAOX,KACd0C,QAAQ,eAGZ,cAACb,EAAA,EAAD,CACEG,MAAI,EACJC,GAAI,EACJC,GAAI,GAHN,SAKE,cAACC,EAAA,EAAD,CACElB,MAAOmB,QAAQX,EAAQnH,IAAM8G,EAAO9G,IACpC+H,WAAS,EACTC,WAAYb,EAAQnH,IAAM8G,EAAO9G,GACjCiI,MAAM,SACNvC,KAAK,KACLwC,OAAQnB,EACRoB,SAAUnB,EACVb,UAAQ,EACRkC,UAAQ,EACRlJ,MAAOkH,EAAOrG,GACdoI,QAAQ,eAGZ,cAACb,EAAA,EAAD,CACEG,MAAI,EACJC,GAAI,EACJC,GAAI,GAHN,SAKE,cAACC,EAAA,EAAD,CACElB,MAAOmB,QAAQX,EAAQ1B,OAASqB,EAAOrB,OACvCsC,WAAS,EACTC,WAAYb,EAAQ1B,OAASqB,EAAOrB,MACpCwC,MAAM,QACNvC,KAAK,QACLwC,OAAQnB,EACRoB,SAAUnB,EACVb,UAAQ,EACRhH,MAAOkH,EAAOZ,MACd2C,QAAQ,eAGZ,cAACb,EAAA,EAAD,CACEG,MAAI,EACJC,GAAI,EACJC,GAAI,GAHN,SAKE,cAACC,EAAA,EAAD,CACElB,MAAOmB,QAAQX,EAAQmB,SAAWxB,EAAOwB,SACzCP,WAAS,EACTC,WAAYb,EAAQmB,SAAWxB,EAAOwB,QACtCL,MAAM,8BACNvC,KAAK,WACLwC,OAAQnB,EACRoB,SAAUnB,EACV7H,MAAOkH,EAAOR,SACduC,QAAQ,eAGZ,cAACb,EAAA,EAAD,CACEG,MAAI,EACJC,GAAI,EACJC,GAAI,GAHN,SAKE,cAACC,EAAA,EAAD,CACElB,MAAOmB,QAAQX,EAAQoB,OAASzB,EAAOyB,OACvCR,WAAS,EACTC,WAAYb,EAAQoB,OAASzB,EAAOyB,MACpCN,MAAM,uBACNvC,KAAK,WACLwC,OAAQnB,EACRoB,SAAUnB,EACV7H,MAAOkH,EAAOT,SACdwC,QAAQ,eAGZ,cAACb,EAAA,EAAD,CACEG,MAAI,EACJC,GAAI,EACJC,GAAI,GAHN,SAKE,cAACC,EAAA,EAAD,CACElB,MAAOmB,QAAQX,EAAQ3B,SAAWsB,EAAOtB,SACzCuC,WAAS,EACTC,WAAYb,EAAQ3B,SAAWsB,EAAOtB,QACtCyC,MAAM,yBACNvC,KAAK,UACLwC,OAAQnB,EACRoB,SAAUnB,EACV7H,MAAOkH,EAAOb,QACd4C,QAAQ,eAGZ,cAACb,EAAA,EAAD,CACEG,MAAI,EACJC,GAAI,EACJC,GAAI,GAHN,SAKE,cAACC,EAAA,EAAD,CACElB,MAAOmB,QAAQX,EAAQxB,OAASmB,EAAOnB,OACvCoC,WAAS,EACTC,WAAYb,EAAQxB,OAASmB,EAAOnB,MACpCsC,MAAM,oCACNvC,KAAK,QACLwC,OAAQnB,EACRoB,SAAUnB,EACV7H,MAAOkH,EAAOV,MACdyC,QAAQ,eAGZ,cAACb,EAAA,EAAD,CACEG,MAAI,EACJC,GAAI,EACJC,GAAI,GAHN,SAKE,cAACC,EAAA,EAAD,CACElB,MAAOmB,QAAQX,EAAQ/G,SAAW0G,EAAO1G,SACzC2H,WAAS,EACTC,WAAYb,EAAQ/G,SAAW0G,EAAO1G,QACtC6H,MAAM,UACNvC,KAAK,UACLwC,OAAQnB,EACRoB,SAAUnB,EACV7H,MAAOkH,EAAOjG,QACdgI,QAAQ,eAGZ,cAACb,EAAA,EAAD,CAAMG,MAAI,OAGZ,cAACc,EAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACC,EAAA,EAAD,CACEN,QAAQ,YACRO,MAAM,YACNlG,KAAK,SACL4F,SAAUnB,EAJZ,oC,uECnOVtC,EAAYC,aAAW,iBAAO,CAClCC,KAAM,OA8CO8D,EA3CA,SAAC,GAA4B,IAA1B5D,EAAyB,EAAzBA,UAAcC,EAAW,iBACnCC,EAAUN,IAEhB,OACE,8CACEI,UAAWoC,kBAAKlC,EAAQJ,KAAME,IAC1BC,GAFN,cAIE,eAAC4D,EAAA,EAAD,CACEC,UAAW,cAAC,IAAD,CAAkBC,SAAS,UACtC,aAAW,aAFb,UAIE,cAACC,EAAA,EAAD,CACEZ,QAAQ,QACRO,MAAM,UACNM,GAAG,2BACHC,UAAWC,IAJb,4BAQA,cAACH,EAAA,EAAD,CACEZ,QAAQ,QACRO,MAAM,UACNM,GAAG,2BACHC,UAAWC,IAJb,0CASF,cAACC,EAAA,EAAD,CACEhB,QAAQ,KACRO,MAAM,cAFR,gEC5BA/D,EAAYC,aAAW,SAACwE,GAAD,MAAY,CACvCvE,KAAM,CACJwE,gBAAiBD,EAAME,QAAQC,WAAWC,KAC1CC,UAAW,OACXC,WAAYN,EAAM5B,QAAQ,GAC1BmC,cAAeP,EAAM5B,QAAQ,QA6ClBoC,UAzCU,SAACC,GACxB,IAAOC,EAAaD,EAAME,MAAMC,OAAzBF,SACD7E,EAAUN,IACVsF,EAAe1L,cACrB,EAA4B2L,mBAAS,MAArC,mBAAOtJ,EAAP,KAAeuJ,EAAf,KAEMC,EAAYC,sBAAW,sBAAC,4BAAA3K,EAAA,+EAEPgB,YAAaoJ,GAFN,OAEtBlJ,EAFsB,OAGtBqJ,EAAatL,SACfwL,EAAUvJ,GAJc,gDAO1BL,QAAQmG,MAAR,MAP0B,yDAS3B,CAACuD,IAMJ,OAJAvL,qBAAU,WACR0L,MACC,CAACA,IAECxJ,EAKH,eAAC0J,EAAA,EAAD,CACEvF,UAAWE,EAAQJ,KACnB0F,MAAM,cAFR,UAIE,cAACC,EAAA,EAAD,CAAWC,UAAU,EAArB,SACE,cAAC,EAAD,MAEF,cAAClC,EAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACgC,EAAA,EAAD,CAAWC,SAAS,KAApB,SACE,cAAC,EAAD,CAAgB7J,OAAQA,WAbvB","file":"static/js/84.275453af.chunk.js","sourcesContent":["import {useRef, useEffect } from 'react';\n\nconst useIsMountedRef = () => {\n  const isMounted = useRef(true);\n\n  useEffect(() => () => {\n    isMounted.current = false;\n  }, []);\n\n  return isMounted;\n};\n\nexport default useIsMountedRef;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');\n\nexports.default = _default;","import app from './_firebase';\n\nimport axios from 'axios';\nimport XLSX from 'xlsx' ;\nimport { API_URL } from '../config';\n\nexport const addSchool = async (data) => {\n    try {\n        var docRef = await app.firestore().collection(\"schools\").doc(data.id);\n        data.total_student=0;\n        data.total_teacher=0;\n        data.lms_url=data.id.trim()+\".dschool.vn\";\n        const doc = docRef.get()\n        if (doc.exists) {\n            console.log(\"doc exist\")\n            return \"existed\";\n        } else {\n            console.log(data);\n            let school  = await app.firestore().collection('schools').doc(data.id).set(data);\n            console.log(\"add school success\");\n        }\n        \n    } catch (err) {\n        console.log(err);\n    }\n};\n\nexport const getSchoolApi = async (id) => {\n    try {\n        let querySnapshot  = await app.firestore().collection('schools').doc(id).get();\n        const school = querySnapshot.data()\n        school.id=id\n          return school\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nexport const updateSchool = async (data) => {\n    try {\n        let id=data.id;\n        let result  = await app.firestore().collection('schools').doc(id).update(data);\n        return result\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nexport const listAllSchool = async (data) => {\n    try {\n        let querySnapshot  = await app.firestore().collection('schools').get();\n        const school = querySnapshot.docs.map((doc) => {\n            return { id: doc.id, ...doc.data() }\n          })\n          return school\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nexport const has_running_command = async (school_id) => {\n    try {\n       \n        let querySnapshot = await app.firestore().collection('commands').where(\"data.school_id\",\"==\",school_id).where(\"type\",\"==\",\"school\").where(\"action\",\"==\",\"upload\").where(\"status\",\"==\",1).get();\n        const commands = querySnapshot.docs.map((doc) => {\n            return {\n              id: doc.id,\n              ...doc.data()\n            };\n          });\n          console.log(commands);\n          return commands;\n        \n      } catch (err) {\n        console.log(err);\n      }\n}\n\nexport const deleteSchools = (ids) => {\n    try {\n      ids.map((id) => {\n        app.firestore().collection('schools').doc(id).delete();\n      })\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  export const uploadExcel = async (user,file,school_id) => {\n    try {\n        let data = {\"school_id\":school_id};\n        data.year=\"2021_2022\";\n        const reader = new FileReader() \n        const rABS = !!reader.readAsBinaryString;  // !! converts object to boolean \n        reader.onabort = () => console.log('file reading was aborted')\n        reader.onerror = () => console.log('file reading has failed')\n        reader.onload = async(e) => {\n            // Do what you want with the file contents \n            var bstr = e.target.result; \n            var workbook = XLSX.read(bstr, { type: rABS ? \"binary\" : \"array\" })\n            var command = {\n              type: \"school\",\n              action: \"upload\",\n              status: 0,\n              executer: user,\n            }\n            console.log(workbook.Sheets);\n            let length=Object.keys( workbook.Sheets).length;\n            console.log(\"length\",length)\n            if(length==2){\n              //issert mẫu mới \n              var sheet0_list = workbook.SheetNames[0];\n              var sheet0 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet0_list], {\n                  raw: false,\n                  dateNF: \"MM-DD-YYYY\",\n                  header:1,\n                  blankrows: false,\n                  defval: \"\"\n              })\n              data.hs = JSON.stringify(sheet0);\n              var sheet1_list = workbook.SheetNames[1];\n              var sheet1 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet1_list], {\n                  raw: false,\n                  dateNF: \"MM-DD-YYYY\",\n                  header:1,\n                  blankrows: false,\n                  defval: \"\"\n              })\n              // const checkhs = check_hs(data.hs)\n              // if(checkhs){\n              //   console.log(\"checkhs\",checkhs)\n              //   return checkhs;\n              // }\n              data.gv = JSON.stringify(sheet1);\n              data.template=2;\n              command.data=data;\n              // const checkgv = check_gv(data.gv);\n              // if(checkgv){\n              //   console.log(\"checkgv\",checkgv)\n              //   return checkgv;\n              // }\n            } else if(length==3){\n              console.log(\"not use 3 temp\")\n              return \"please review template\";\n              //insert mẫu cũ \n              // var sheet0_list = workbook.SheetNames[0];\n              // var sheet0 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet0_list], {\n              //     raw: false,\n              //     dateNF: \"MM-DD-YYYY\",\n              //     header:1,\n              //     blankrows: false,\n              //     defval: \"\"\n              // })\n              // data.hs = JSON.stringify(sheet0);\n              // var sheet1_list = workbook.SheetNames[1];\n              // var sheet1 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet1_list], {\n              //     raw: false,\n              //     dateNF: \"MM-DD-YYYY\",\n              //     header:1,\n              //     blankrows: false,\n              //     defval: \"\"\n              // })\n              // data.gv = JSON.stringify(sheet1);\n              // var sheet2_list = workbook.SheetNames[2];\n              // var sheet2 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet2_list], {\n              //     raw: false,\n              //     dateNF: \"MM-DD-YYYY\",\n              //     header:1,\n              //     blankrows: false,\n              //     defval: \"\"                \n              // })\n              // data.assignment = JSON.stringify(sheet2);\n              // data.template=3;\n              // command.data=data;\n            }\n\n            \n\n            let schoolApi = await app.firestore().collection('commands').add(command);\n            let id = await (await schoolApi.get()).id;\n            console.log(id)\n            command.data.commandid=id;\n            const url = `${API_URL}/api/upload_school`;\n            axios.post(url,{id:id}).then(resp => {\n                console.log(resp.data);\n            });\n            // console.log(\"add command success\",id)\n            return \"success\";\n          }\n          if (rABS) {await reader.readAsBinaryString(file);}\n          else {await reader.readAsArrayBuffer(file);}\n    } catch (err) {\n      console.log(err);\n      return \"Lỗi rồi !!!\";\n    }\n  };\n\n  function check_hs(data){\n    console.log(\"hs:\",data);\n    for (let user_row of data) {\n      if (user_row[0] != \"STT\") {\n        let class_name = user_row[1];\n        let fullname = user_row[3];\n        let birthdate = user_row[4];\n        let password = user_row[8];\n        let username = user_row[7];\n        if(class_name==null||fullname==null||username==null||password==null||class_name==\"\"||fullname==\"\"||username==\"\"||password==\"\"){\n          return \"Xem lại lớp:\"+class_name+\" tên:\"+fullname+\" user:\"+username+\" pass:\"+password;\n        }\n      }\n    }\n    return false;\n  }\n  function check_gv(data){\n    console.log(\"gv:\",data);\n    for (let user_row of data) {\n      if (user_row[0] != \"STT\") {\n\n        let class_name = user_row[1];\n        let fullname = user_row[3];\n        let birthdate = user_row[4];\n        let password = user_row[8];\n        let username = user_row[7];\n        if(class_name==null||fullname==null||username==null||password==null||class_name==\"\"||fullname==\"\"||username==\"\"||password==\"\"){\n          return \"Xem lại lớp:\"+class_name+\" tên:\"+fullname+\" user:\"+username+\" pass:\"+password;\n        }\n      }\n    }\n    return false;\n  }","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Grid,\n  TextField,\n  makeStyles\n} from '@material-ui/core';\nimport wait from 'src/utils/wait';\nimport { useHistory } from 'react-router-dom';\nimport {updateSchool} from '../../../api/schools'\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst SchoolEditForm = ({\n  className,\n  school,\n  ...rest\n}) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  return (\n    <Formik\n      initialValues={{\n        id: school.id || '',\n        address: school.address || '',\n        email: school.email || '',\n        name: school.name || '',\n        phone: school.phone || '',\n        district: school.district || '',\n        province: school.province || '',\n        lms_url: school.lms_url || '',\n        submit: null\n      }}\n      validationSchema={Yup.object().shape({\n        address: Yup.string().max(255),\n        email: Yup.string().email('Must be a valid email').max(255).required('Email is required'),\n        name: Yup.string().max(255).required('Name is required'),\n        phone: Yup.string().max(15)\n      })}\n      onSubmit={async (values, {\n        \n        setErrors,\n        setStatus,\n        setSubmitting\n      }) => {\n        try {\n\n          console.log(values)\n          updateSchool(values);\n          // NOTE: Make API request\n          await wait(500);\n          history.push('/hbon/management/schools');\n        } catch (err) {\n          console.error(err);\n          setStatus({ success: false });\n          setErrors({ submit: err.message });\n          setSubmitting(false);\n        }\n      }}\n    >\n      {({\n        errors,\n        handleBlur,\n        handleChange,\n        handleSubmit,\n        isSubmitting,\n        touched,\n        values\n      }) => (\n        <form\n          className={clsx(classes.root, className)}\n          onSubmit={handleSubmit}\n          {...rest}\n        >\n          <Card>\n            <CardContent>\n              <input type=\"hidden\" name=\"id\" \n                    required\n                    value={values.id}/>\n              <Grid\n                container\n                spacing={3}\n              >\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.name && errors.name)}\n                    fullWidth\n                    helperText={touched.name && errors.name}\n                    label=\"Tên trường\"\n                    name=\"name\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.name}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.id && errors.id)}\n                    fullWidth\n                    helperText={touched.id && errors.id}\n                    label=\"domain\"\n                    name=\"id\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    disabled\n                    value={values.id}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.email && errors.email)}\n                    fullWidth\n                    helperText={touched.email && errors.email}\n                    label=\"Email\"\n                    name=\"email\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.email}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.country && errors.country)}\n                    fullWidth\n                    helperText={touched.country && errors.country}\n                    label=\"Tỉnh/Thành phố\"\n                    name=\"province\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.province}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.state && errors.state)}\n                    fullWidth\n                    helperText={touched.state && errors.state}\n                    label=\"Quận/Huyện\"\n                    name=\"district\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.district}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.address && errors.address)}\n                    fullWidth\n                    helperText={touched.address && errors.address}\n                    label=\"Địa chỉ\"\n                    name=\"address\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.address}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.phone && errors.phone)}\n                    fullWidth\n                    helperText={touched.phone && errors.phone}\n                    label=\"Số điện thoại\"\n                    name=\"phone\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.phone}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.lms_url && errors.lms_url)}\n                    fullWidth\n                    helperText={touched.lms_url && errors.lms_url}\n                    label=\"LMS URL\"\n                    name=\"lms_url\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.lms_url}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid item />\n                \n              </Grid>\n              <Box mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                >\n                  Lưu\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </form>\n      )}\n    </Formik>\n  );\n};\n\nSchoolEditForm.propTypes = {\n  className: PropTypes.string,\n  school: PropTypes.object.isRequired\n};\n\nexport default SchoolEditForm;\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport {\n  Breadcrumbs,\n  Link,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst Header = ({ className, ...rest }) => {\n  const classes = useStyles();\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n      >\n        <Link\n          variant=\"body1\"\n          color=\"inherit\"\n          to=\"/hbon/management/schools\"\n          component={RouterLink}\n        >\n          Trang chủ\n        </Link>\n        <Link\n          variant=\"body1\"\n          color=\"inherit\"\n          to=\"/hbon/management/schools\"\n          component={RouterLink}\n        >\n          Trường học\n        </Link>\n      </Breadcrumbs>\n      <Typography\n        variant=\"h3\"\n        color=\"textPrimary\"\n      >\n        Chỉnh sửa trường học\n      </Typography>\n    </div>\n  );\n};\n\nHeader.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Header;\n","import React, {\n  useState,\n  useCallback,\n  useEffect\n} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box,\n  Container,\n  makeStyles\n} from '@material-ui/core';\nimport axios from 'src/utils/axios';\nimport Page from 'src/components/Page';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\nimport SchoolEditForm from './SchoolEditForm';\nimport Header from './Header';\nimport {getSchoolApi}  from '../../../api/schools'\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3)\n  }\n}));\n\nconst  SchoolEditView  = (props) => {\n  const {schoolId } = props.match.params;\n  const classes = useStyles();\n  const isMountedRef = useIsMountedRef();\n  const [school, setSchool] = useState(null);\n\n  const getSchool = useCallback(async () => {\n    try {\n      let school = await getSchoolApi(schoolId);\n      if (isMountedRef.current) {\n        setSchool(school);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }, [isMountedRef]);\n\n  useEffect(() => {\n    getSchool();\n  }, [getSchool]);\n\n  if (!school) {\n    return null;\n  }\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"School Edit\"\n    >\n      <Container maxWidth={false}>\n        <Header />\n      </Container>\n      <Box mt={3}>\n        <Container maxWidth=\"lg\">\n          <SchoolEditForm school={school} />\n        </Container>\n      </Box>\n    </Page>\n  );\n};\nexport default SchoolEditView;\n"],"sourceRoot":""}