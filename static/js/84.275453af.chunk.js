(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[84],{1284:function(e,t,n){"use strict";var r=n(0);t.a=function(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),e}},1304:function(e,t,n){"use strict";var r=n(244),a=n(243);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,r(n(246)).default)(c.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");t.default=o},1601:function(e,t){},1609:function(e,t){},1610:function(e,t){},1962:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return j})),n.d(t,"f",(function(){return x}));n(24);var r=n(16),a=n(2),c=n.n(a),o=n(4),s=n(152),i=n(153),l=n.n(i),u=n(1580),d=n.n(u),h=n(140),b=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("schools").doc(t.id);case 3:if(n=e.sent,t.total_student=0,t.total_teacher=0,t.lms_url=t.id.trim()+".dschool.vn",!n.get().exists){e.next=13;break}return console.log("doc exist"),e.abrupt("return","existed");case 13:return console.log(t),e.next=16,s.a.firestore().collection("schools").doc(t.id).set(t);case 16:e.sent,console.log("add school success");case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("schools").doc(t).get();case 3:return n=e.sent,(r=n.data()).id=t,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id,e.next=4,s.a.firestore().collection("schools").doc(n).update(t);case 4:return r=e.sent,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("schools").get();case 3:return n=e.sent,a=n.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.firestore().collection("commands").where("data.school_id","==",t).where("type","==","school").where("action","==","upload").where("status","==",1).get();case 3:return n=e.sent,a=n.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),console.log(a),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r){var a,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a={school_id:r}).year="2021_2022",i=new FileReader,u=!!i.readAsBinaryString,i.onabort=function(){return console.log("file reading was aborted")},i.onerror=function(){return console.log("file reading has failed")},i.onload=function(){var e=Object(o.a)(c.a.mark((function e(n){var r,o,i,b,p,m,f,j,x,v,O;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.result,o=d.a.read(r,{type:u?"binary":"array"}),i={type:"school",action:"upload",status:0,executer:t},console.log(o.Sheets),b=Object.keys(o.Sheets).length,console.log("length",b),2!=b){e.next=17;break}p=o.SheetNames[0],m=d.a.utils.sheet_to_json(o.Sheets[p],{raw:!1,dateNF:"MM-DD-YYYY",header:1,blankrows:!1,defval:""}),a.hs=JSON.stringify(m),f=o.SheetNames[1],j=d.a.utils.sheet_to_json(o.Sheets[f],{raw:!1,dateNF:"MM-DD-YYYY",header:1,blankrows:!1,defval:""}),a.gv=JSON.stringify(j),a.template=2,i.data=a,e.next=20;break;case 17:if(3!=b){e.next=20;break}return console.log("not use 3 temp"),e.abrupt("return","please review template");case 20:return e.next=22,s.a.firestore().collection("commands").add(i);case 22:return x=e.sent,e.next=25,x.get();case 25:return e.next=27,e.sent.id;case 27:return v=e.sent,console.log(v),i.data.commandid=v,O="".concat(h.a,"/api/upload_school"),l.a.post(O,{id:v}).then((function(e){console.log(e.data)})),e.abrupt("return","success");case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!u){e.next=13;break}return e.next=11,i.readAsBinaryString(n);case 11:e.next=15;break;case 13:return e.next=15,i.readAsArrayBuffer(n);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","L\u1ed7i r\u1ed3i !!!");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n,r){return e.apply(this,arguments)}}()},2760:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(4),o=n(23),s=n(0),i=n(401),l=n(1207),u=n(395),d=(n(39),n(412)),h=n(1284),b=n(16),p=n(38),m=n(5),f=n(1382),j=n(1373),x=n(72),v=n(1201),O=n(1203),g=n(1215),y=n(1188),k=n(1178),w=n(205),S=n(66),B=n(1962),_=n(1),N=["className","school"],T=Object(i.a)((function(){return{root:{}}})),C=function(e){var t=e.className,n=e.school,r=Object(p.a)(e,N),o=T(),s=Object(S.g)();Object(x.b)().enqueueSnackbar;return Object(_.jsx)(j.a,{initialValues:{id:n.id||"",address:n.address||"",email:n.email||"",name:n.name||"",phone:n.phone||"",district:n.district||"",province:n.province||"",lms_url:n.lms_url||"",submit:null},validationSchema:f.e().shape({address:f.g().max(255),email:f.g().email("Must be a valid email").max(255).required("Email is required"),name:f.g().max(255).required("Name is required"),phone:f.g().max(15)}),onSubmit:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setErrors,c=n.setStatus,o=n.setSubmitting,e.prev=1,console.log(t),Object(B.e)(t),e.next=6,Object(w.a)(500);case 6:s.push("/hbon/management/schools"),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),c({success:!1}),r({submit:e.t0.message}),o(!1);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var n=e.errors,a=e.handleBlur,c=e.handleChange,s=e.handleSubmit,i=e.isSubmitting,l=e.touched,d=e.values;return Object(_.jsx)("form",Object(b.a)(Object(b.a)({className:Object(m.default)(o.root,t),onSubmit:s},r),{},{children:Object(_.jsx)(v.a,{children:Object(_.jsxs)(O.a,{children:[Object(_.jsx)("input",{type:"hidden",name:"id",required:!0,value:d.id}),Object(_.jsxs)(g.a,{container:!0,spacing:3,children:[Object(_.jsx)(g.a,{item:!0,md:6,xs:12,children:Object(_.jsx)(y.a,{error:Boolean(l.name&&n.name),fullWidth:!0,helperText:l.name&&n.name,label:"T\xean tr\u01b0\u1eddng",name:"name",onBlur:a,onChange:c,required:!0,value:d.name,variant:"outlined"})}),Object(_.jsx)(g.a,{item:!0,md:6,xs:12,children:Object(_.jsx)(y.a,{error:Boolean(l.id&&n.id),fullWidth:!0,helperText:l.id&&n.id,label:"domain",name:"id",onBlur:a,onChange:c,required:!0,disabled:!0,value:d.id,variant:"outlined"})}),Object(_.jsx)(g.a,{item:!0,md:6,xs:12,children:Object(_.jsx)(y.a,{error:Boolean(l.email&&n.email),fullWidth:!0,helperText:l.email&&n.email,label:"Email",name:"email",onBlur:a,onChange:c,required:!0,value:d.email,variant:"outlined"})}),Object(_.jsx)(g.a,{item:!0,md:6,xs:12,children:Object(_.jsx)(y.a,{error:Boolean(l.country&&n.country),fullWidth:!0,helperText:l.country&&n.country,label:"T\u1ec9nh/Th\xe0nh ph\u1ed1",name:"province",onBlur:a,onChange:c,value:d.province,variant:"outlined"})}),Object(_.jsx)(g.a,{item:!0,md:6,xs:12,children:Object(_.jsx)(y.a,{error:Boolean(l.state&&n.state),fullWidth:!0,helperText:l.state&&n.state,label:"Qu\u1eadn/Huy\u1ec7n",name:"district",onBlur:a,onChange:c,value:d.district,variant:"outlined"})}),Object(_.jsx)(g.a,{item:!0,md:6,xs:12,children:Object(_.jsx)(y.a,{error:Boolean(l.address&&n.address),fullWidth:!0,helperText:l.address&&n.address,label:"\u0110\u1ecba ch\u1ec9",name:"address",onBlur:a,onChange:c,value:d.address,variant:"outlined"})}),Object(_.jsx)(g.a,{item:!0,md:6,xs:12,children:Object(_.jsx)(y.a,{error:Boolean(l.phone&&n.phone),fullWidth:!0,helperText:l.phone&&n.phone,label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"phone",onBlur:a,onChange:c,value:d.phone,variant:"outlined"})}),Object(_.jsx)(g.a,{item:!0,md:6,xs:12,children:Object(_.jsx)(y.a,{error:Boolean(l.lms_url&&n.lms_url),fullWidth:!0,helperText:l.lms_url&&n.lms_url,label:"LMS URL",name:"lms_url",onBlur:a,onChange:c,value:d.lms_url,variant:"outlined"})}),Object(_.jsx)(g.a,{item:!0})]}),Object(_.jsx)(u.a,{mt:2,children:Object(_.jsx)(k.a,{variant:"contained",color:"secondary",type:"submit",disabled:i,children:"L\u01b0u"})})]})})}))}})},W=n(15),q=n(1260),M=n(1218),Y=n(94),E=n(1304),L=n.n(E),A=["className"],D=Object(i.a)((function(){return{root:{}}})),J=function(e){var t=e.className,n=Object(p.a)(e,A),r=D();return Object(_.jsxs)("div",Object(b.a)(Object(b.a)({className:Object(m.default)(r.root,t)},n),{},{children:[Object(_.jsxs)(q.a,{separator:Object(_.jsx)(L.a,{fontSize:"small"}),"aria-label":"breadcrumb",children:[Object(_.jsx)(M.a,{variant:"body1",color:"inherit",to:"/hbon/management/schools",component:W.b,children:"Trang ch\u1ee7"}),Object(_.jsx)(M.a,{variant:"body1",color:"inherit",to:"/hbon/management/schools",component:W.b,children:"Tr\u01b0\u1eddng h\u1ecdc"})]}),Object(_.jsx)(Y.a,{variant:"h3",color:"textPrimary",children:"Ch\u1ec9nh s\u1eeda tr\u01b0\u1eddng h\u1ecdc"})]}))},F=Object(i.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));t.default=function(e){var t=e.match.params.schoolId,n=F(),r=Object(h.a)(),i=Object(s.useState)(null),b=Object(o.a)(i,2),p=b[0],m=b[1],f=Object(s.useCallback)(Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(B.b)(t);case 3:n=e.sent,r.current&&m(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[r]);return Object(s.useEffect)((function(){f()}),[f]),p?Object(_.jsxs)(d.a,{className:n.root,title:"School Edit",children:[Object(_.jsx)(l.a,{maxWidth:!1,children:Object(_.jsx)(J,{})}),Object(_.jsx)(u.a,{mt:3,children:Object(_.jsx)(l.a,{maxWidth:"lg",children:Object(_.jsx)(C,{school:p})})})]}):null}}}]);
//# sourceMappingURL=84.275453af.chunk.js.map