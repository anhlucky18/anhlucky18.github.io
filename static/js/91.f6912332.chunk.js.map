{"version":3,"sources":["hooks/useIsMountedRef.js","../node_modules/@material-ui/icons/NavigateNext.js","utils/bytesToSize.js","components/FilesDropzone.js","api/ads.js","views/ads/AdEditView/AdEditForm.js","views/ads/AdEditView/Header.js","views/ads/AdEditView/index.js"],"names":["useIsMountedRef","isMounted","useRef","useEffect","current","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","bytesToSize","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","useStyles","makeStyles","theme","root","dropZone","border","palette","divider","padding","spacing","outline","display","justifyContent","flexWrap","alignItems","backgroundColor","action","hover","opacity","cursor","dragActive","active","image","width","info","marginTop","list","maxHeight","actions","marginLeft","FilesDropzone","className","handleDrop","files","handleRemoveAll","rest","classes","useDropzone","onDrop","getRootProps","getInputProps","isDragActive","clsx","alt","src","Typography","gutterBottom","variant","Box","mt","color","Link","underline","length","options","suppressScrollX","List","map","file","ListItem","key","ListItemIcon","ListItemText","primary","name","primaryTypographyProps","secondary","size","Tooltip","title","IconButton","edge","Button","onClick","listAllAd","a","app","firestore","collection","get","querySnapshot","ad","docs","doc","id","data","console","addAd","values","metadata","contentType","create_at","firebase","FieldValue","serverTimestamp","add","adRef","adData","img_url","storageRef","storage","ref","uploadTask","child","put","on","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","state","TaskState","PAUSED","RUNNING","error","code","getDownloadURL","then","downloadURL","img","update","deleteAds","ids","delete","err","getAdApi","updateAd","set","result","AdEditForm","history","useHistory","enqueueSnackbar","useSnackbar","useState","setFiles","useCallback","acceptedFiles","prevFiles","initialValues","switch_time","tags","url","submit","validationSchema","Yup","shape","max","required","urswitch_timel","onSubmit","setErrors","setStatus","setSubmitting","split","wait","success","href","push","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","Card","CardContent","type","Grid","container","item","md","xs","TextField","Boolean","fullWidth","helperText","label","onBlur","onChange","disableHoverListener","CardHeader","Divider","disabled","Header","Breadcrumbs","separator","fontSize","aria-label","to","component","RouterLink","background","dark","minHeight","paddingTop","paddingBottom","AdEditView","props","adId","match","params","isMountedRef","setAd","getAd","Page","Container","maxWidth"],"mappings":"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","file":"static/js/91.f6912332.chunk.js","sourcesContent":["import {useRef, useEffect } from 'react';\n\nconst useIsMountedRef = () => {\n  const isMounted = useRef(true);\n\n  useEffect(() => () => {\n    isMounted.current = false;\n  }, []);\n\n  return isMounted;\n};\n\nexport default useIsMountedRef;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');\n\nexports.default = _default;","/* eslint-disable no-restricted-properties */\nconst bytesToSize = (bytes, decimals = 2) => {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n\nexport default bytesToSize;\n","import React, {\n  useState,\n  useCallback\n} from 'react';\nimport clsx from 'clsx';\nimport { useDropzone } from 'react-dropzone';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport PropTypes from 'prop-types';\nimport {\n  Box,\n  Button,\n  IconButton,\n  Link,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport bytesToSize from 'src/utils/bytesToSize';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  dropZone: {\n    border: `1px dashed ${theme.palette.divider}`,\n    padding: theme.spacing(6),\n    outline: 'none',\n    display: 'flex',\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    '&:hover': {\n      backgroundColor: theme.palette.action.hover,\n      opacity: 0.5,\n      cursor: 'pointer'\n    }\n  },\n  dragActive: {\n    backgroundColor: theme.palette.action.active,\n    opacity: 0.5\n  },\n  image: {\n    width: 130\n  },\n  info: {\n    marginTop: theme.spacing(1)\n  },\n  list: {\n    maxHeight: 320\n  },\n  actions: {\n    marginTop: theme.spacing(2),\n    display: 'flex',\n    justifyContent: 'flex-end',\n    '& > * + *': {\n      marginLeft: theme.spacing(2)\n    }\n  }\n}));\n\nconst FilesDropzone = ({ className,handleDrop,files,handleRemoveAll, ...rest }) => {\n  const classes = useStyles();\n  // const [files, setFiles] = useState([]);\n\n  // const handleDrop = useCallback((acceptedFiles) => {\n  //   setFiles((prevFiles) => [...prevFiles].concat(acceptedFiles));\n  //   console.log(\"con\");\n  // }, []);\n\n  // const handleRemoveAll = () => {\n  //   setFiles([]);\n  // };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop: handleDrop\n  });\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <div\n        className={clsx({\n          [classes.dropZone]: true,\n          [classes.dragActive]: isDragActive\n        })}\n        {...getRootProps()}\n      >\n        <input {...getInputProps()} />\n        <div>\n          <img\n            alt=\"Select file\"\n            className={classes.image}\n            src=\"/static/images/undraw_add_file2_gvbb.svg\"\n          />\n        </div>\n        <div>\n          <Typography\n            gutterBottom\n            variant=\"h3\"\n          >\n           Tải file lên\n          </Typography>\n          <Box mt={2}>\n            <Typography\n              color=\"textPrimary\"\n              variant=\"body1\"\n            >\n              Bằng cách kéo thả hoặc click \n              {' '}\n              <Link underline=\"always\">vào đây</Link>\n              {' '}\n              để chọn file trên máy của bạn\n            </Typography>\n          </Box>\n        </div>\n      </div>\n      {files.length > 0 && (\n        <>\n          <PerfectScrollbar options={{ suppressScrollX: true }}>\n            <List className={classes.list}>\n              {files.map((file, i) => (\n                <ListItem\n                  divider={i < files.length - 1}\n                  key={i}\n                >\n                  <ListItemIcon>\n                    <FileCopyIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={file.name}\n                    primaryTypographyProps={{ variant: 'h5' }}\n                    secondary={bytesToSize(file.size)}\n                  />\n                  <Tooltip title=\"More options\">\n                    <IconButton edge=\"end\">\n                      <MoreIcon />\n                    </IconButton>\n                  </Tooltip>\n                </ListItem>\n              ))}\n            </List>\n          </PerfectScrollbar>\n          <div className={classes.actions}>\n            <Button\n              onClick={handleRemoveAll}\n              size=\"small\"\n            >\n              Remove all\n            </Button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nFilesDropzone.propTypes = {\n  className: PropTypes.string\n};\n\nexport default FilesDropzone;\n","import firebase from 'firebase';\nimport app from './firebase';\n\nexport const listAllAd = async () => {\n  try {\n    let querySnapshot = await app.firestore().collection('ads').get();\n    const ad = querySnapshot.docs.map((doc) => {\n      return {\n        id: doc.id,\n        ...doc.data()\n      }\n    })\n    return ad\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n\nexport const addAd = async (values,image) => {\n  try {\n    \n    if(typeof(image)==\"undefined\"){\n      return;\n    }\n    var metadata = {\n      contentType: 'image/jpeg'\n    };\n    values.create_at = firebase.firestore.FieldValue.serverTimestamp();\n    let adRef = await app.firestore().collection('ads').add(values);\n    let ad = await adRef.get();\n    let adData = ad.data();\n    console.log(\"done ad:\"+ad.id)\n    let img_url = \"public/images/ads/\" + ad.id;\n    var storageRef = app.storage().ref();\n    var uploadTask = storageRef.child(img_url).put(image, metadata);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\n      function (snapshot) {\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload cover is ' + progress + '% done');\n        switch (snapshot.state) {\n          case firebase.storage.TaskState.PAUSED: // or 'paused'\n            console.log('Upload cover is paused');\n            break;\n          case firebase.storage.TaskState.RUNNING: // or 'running'\n            console.log('Upload cover is running');\n            break;\n        }\n      },\n      function (error) {\n\n        switch (error.code) {\n          case 'storage/unauthorized':\n              console.log(\"unauthorized\")\n            break;\n          case 'storage/canceled':\n            console.log(\"cancel\")\n            break;\n          case 'storage/unknown':\n\n            console.log(\"unkonwn\")\n            // Unknown error occurred, inspect error.serverResponse\n            break;\n        }\n      },\n      function () {\n        // Upload completed successfully, now we can get the download URL\n        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          console.log('File available at', downloadURL);\n          adData.img = downloadURL;\n          app.firestore().collection('ads').doc(ad.id).update(adData);\n        });\n      });\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const deleteAds = (ids) => {\n  try {\n    ids.map((id) => {\n      let img_url = \"public/images/ads/\" + id;\n      var storageRef = app.storage().ref();\n      storageRef.child(img_url).delete();\n      app.firestore().collection('ads').doc(id).delete();\n    })\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const getAdApi = async (id) => {\n  try {\n    let querySnapshot = await app.firestore().collection('ads').doc(id).get();\n    const ad = querySnapshot.data()\n    ad.id = id\n    return ad\n  } catch (err) {\n    console.log(err);\n  }\n}\nexport const updateAd = async (data,image) => {\n  try {\n    console.log(\"update ads\")\n    let id = data.id;\n    let result = await app.firestore().collection('ads').doc(id).set(data);\n    console.log(\"done ad:\"+data.id)\n    var metadata = {\n      contentType: 'image/jpeg'\n    };\n    let img_url = \"public/images/ads/\" + data.id;\n    var storageRef = app.storage().ref();\n    var uploadTask = storageRef.child(img_url).put(image, metadata);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\n      function (snapshot) {\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload cover is ' + progress + '% done');\n        switch (snapshot.state) {\n          case firebase.storage.TaskState.PAUSED: // or 'paused'\n            console.log('Upload cover is paused');\n            break;\n          case firebase.storage.TaskState.RUNNING: // or 'running'\n            console.log('Upload cover is running');\n            break;\n        }\n      },\n      function (error) {\n\n        switch (error.code) {\n          case 'storage/unauthorized':\n              console.log(\"unauthorized\")\n            break;\n          case 'storage/canceled':\n            console.log(\"cancel\")\n            break;\n          case 'storage/unknown':\n\n            console.log(\"unkonwn\")\n            // Unknown error occurred, inspect error.serverResponse\n            break;\n        }\n      },\n      function () {\n        // storageRef.child(img_url).delete();\n        // Upload completed successfully, now we can get the download URL\n        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          console.log('File available at', downloadURL);\n          data.img = downloadURL;\n          app.firestore().collection('ads').doc(data.id).update(data);\n        });\n      });\n    return result\n  } catch (err) {\n    console.log(err);\n  }\n};\n","import React,{\n  useState,\n  useEffect,\n  useCallback} from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Grid,\n  TextField,\n  makeStyles,\n  CardHeader,\n  Divider,\n  Tooltip\n} from '@material-ui/core';\nimport FilesDropzone from 'src/components/FilesDropzone';\nimport wait from 'src/utils/wait';\nimport {updateAd} from '../../../api/ads'\nimport { useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst AdEditForm = ({\n  className,\n  ad,\n  ...rest\n}) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [files, setFiles] = useState([]);\n\n\n  const handleRemoveAll = () => {\n    setFiles([]);\n  };\n  const handleDrop = useCallback((acceptedFiles) => {\n    setFiles((prevFiles) => acceptedFiles);\n  }, []);\n  \n  return (\n    <Formik\n      initialValues={{\n        id: ad.id || '',\n        switch_time: ad.switch_time || '',\n        tags: ad.tags || '',\n        url: ad.url || '',\n        img: ad.img || '',\n        submit: null\n      }}\n      validationSchema={Yup.object().shape({\n        tags: Yup.string().max(255).required('Tag is required'),\n        url: Yup.string().max(255),\n        urswitch_timel: Yup.number().max(2)\n      })}\n      onSubmit={async (values, {\n        \n        setErrors,\n        setStatus,\n        setSubmitting\n      }) => {\n        try {\n          values.tags = values.tags.split(\",\")\n          console.log(values)\n          updateAd(values,files[0])\n\n          // NOTE: Make API request\n          await wait(500);\n          \n          setStatus({ success: true });\n          setSubmitting(false);\n          enqueueSnackbar('Cập nhật thành công', {\n            variant: 'success',\n            action: <a href=\"/hbon/management/ads\"><Button>Xem tất cả</Button></a>\n          });\n\n          history.push('/hbon/management/ads');\n        } catch (err) {\n          console.error(err);\n          setStatus({ success: false });\n          setErrors({ submit: err.message });\n          setSubmitting(false);\n        }\n      }}\n    >\n      {({\n        errors,\n        handleBlur,\n        handleChange,\n        handleSubmit,\n        isSubmitting,\n        touched,\n        values\n      }) => (\n        <form\n          className={clsx(classes.root, className)}\n          onSubmit={handleSubmit}\n          {...rest}\n        >\n          <Card>\n            <CardContent>\n              <input type=\"hidden\" name=\"id\" \n                    required\n                    value={values.id}/>\n              <Grid\n                container\n                spacing={3}\n              >\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.switch_time && errors.switch_time)}\n                    fullWidth\n                    helperText={touched.switch_time && errors.switch_time}\n                    label=\"Thời gian hiển thị(s)\"\n                    name=\"switch_time\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.switch_time}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <Tooltip title=\"Viết liền, không dấu, cách bởi dấu ,\" disableHoverListener>\n                  <TextField\n                    error={Boolean(touched.tags && errors.tags)}\n                    fullWidth\n                    helperText={touched.tags && errors.tags}\n                    label=\"tags\"\n                    name=\"tags\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.tags}\n                    variant=\"outlined\"\n                  />\n                  </Tooltip>\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <Tooltip title=\"Định dạng url\" disableHoverListener>\n                  <TextField\n                    error={Boolean(touched.url && errors.url)}\n                    fullWidth\n                    helperText={touched.url && errors.url}\n                    label=\"Target url\"\n                    name=\"url\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.url}\n                    variant=\"outlined\"\n                  />\n                  </Tooltip>\n                </Grid>\n                <Grid\n                  item\n                  md={12}\n                  xs={12}\n                >\n                  <img src={values.img}></img>\n                </Grid>\n              </Grid>\n              <Box mt={3}>\n                <Card>\n                  <CardHeader title=\"Tải ảnh lên\" />\n                  <Divider />\n                  <CardContent>\n                    <FilesDropzone handleDrop = {handleDrop} files={files} handleRemoveAll={handleRemoveAll}/>\n                  </CardContent>\n                </Card>\n              </Box>\n              <Box mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                >\n                  Lưu\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </form>\n      )}\n    </Formik>\n  );\n};\n\nAdEditForm.propTypes = {\n  className: PropTypes.string,\n  ad: PropTypes.object.isRequired\n};\n\nexport default AdEditForm;\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport {\n  Breadcrumbs,\n  Link,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst Header = ({ className, ...rest }) => {\n  const classes = useStyles();\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n      >\n      <Link\n        variant=\"body1\"\n        color=\"inherit\"\n        to=\"/hbon \"\n        component={RouterLink}\n      >\n        Trang chủ\n      </Link>\n      <Link\n        variant=\"body1\"\n        color=\"inherit\"\n        to=\"/hbon/management/ads\"\n        component={RouterLink}\n      >\n        Quảng cáo \n      </Link>\n      </Breadcrumbs>\n      <Typography\n        variant=\"h3\"\n        color=\"textPrimary\"\n      >\n        Chỉnh sửa quảng cáo \n      </Typography>\n    </div>\n  );\n};\n\nHeader.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Header;\n","import React, {\n  useState,\n  useCallback,\n  useEffect\n} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box,\n  Container,\n  makeStyles\n} from '@material-ui/core';\nimport axios from 'src/utils/axios';\nimport Page from 'src/components/Page';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\nimport AdEditForm from './AdEditForm';\nimport Header from './Header';\nimport {getAdApi}  from '../../../api/ads'\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3)\n  }\n}));\n\nconst  AdEditView  = (props) => {\n  const {adId } = props.match.params;\n  const classes = useStyles();\n  const isMountedRef = useIsMountedRef();\n  const [ad, setAd] = useState(null);\n\n  const getAd = useCallback(async () => {\n    try {\n      let ad = await getAdApi(adId);\n      if (isMountedRef.current) {\n        setAd(ad);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }, [isMountedRef]);\n\n  useEffect(() => {\n    getAd();\n  }, [getAd]);\n\n  if (!ad) {\n    return null;\n  }\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Ad Edit\"\n    >\n      <Container maxWidth={false}>\n        <Header />\n      </Container>\n      <Box mt={3}>\n        <Container maxWidth=\"lg\">\n          <AdEditForm ad={ad} />\n        </Container>\n      </Box>\n    </Page>\n  );\n};\nexport default AdEditView;\n"],"sourceRoot":""}