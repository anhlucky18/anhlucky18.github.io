{"version":3,"sources":["hooks/useIsMountedRef.js","../node_modules/@material-ui/icons/NavigateNext.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","api/schools.js","views/schools/SchoolEditView/SchoolEditForm.js","views/schools/SchoolEditView/Header.js","views/schools/SchoolEditView/index.js"],"names":["useIsMountedRef","isMounted","useRef","useEffect","current","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","_createForOfIteratorHelper","o","Symbol","iterator","Array","isArray","i","F","s","n","length","done","e","_e","f","TypeError","it","err","normalCompletion","didErr","step","next","_e2","addSchool","data","a","app","firestore","collection","doc","id","docRef","total_student","total_teacher","lms_url","trim","get","exists","console","log","set","getSchoolApi","querySnapshot","school","updateSchool","update","result","listAllSchool","docs","map","has_running_command","school_id","where","commands","uploadExcel","user","file","year","reader","FileReader","rABS","readAsBinaryString","onabort","onerror","onload","bstr","target","workbook","XLSX","read","type","command","action","status","executer","Sheets","keys","sheet0_list","SheetNames","sheet0","utils","sheet_to_json","raw","dateNF","header","blankrows","defval","hs","JSON","stringify","sheet1_list","sheet1","gv","template","add","schoolApi","commandid","url","API_URL","axios","post","then","resp","readAsArrayBuffer","useStyles","makeStyles","root","SchoolEditForm","className","rest","classes","history","useHistory","useSnackbar","enqueueSnackbar","initialValues","address","email","name","phone","district","province","submit","validationSchema","Yup","shape","max","required","onSubmit","values","setErrors","setStatus","setSubmitting","wait","push","error","success","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","clsx","Card","CardContent","Grid","container","spacing","item","md","xs","TextField","Boolean","fullWidth","helperText","label","onBlur","onChange","variant","disabled","country","state","Box","mt","Button","color","Header","Breadcrumbs","separator","fontSize","aria-label","Link","to","component","RouterLink","Typography","theme","backgroundColor","palette","background","dark","minHeight","paddingTop","paddingBottom","SchoolEditView","props","schoolId","match","params","isMountedRef","useState","setSchool","getSchool","useCallback","Page","title","Container","maxWidth"],"mappings":"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","file":"static/js/69.033dc3db.chunk.js","sourcesContent":["import {useRef, useEffect } from 'react';\n\nconst useIsMountedRef = () => {\n  const isMounted = useRef(true);\n\n  useEffect(() => () => {\n    isMounted.current = false;\n  }, []);\n\n  return isMounted;\n};\n\nexport default useIsMountedRef;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');\n\nexports.default = _default;","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import app from './firebase';\nimport axios from 'axios';\nimport XLSX from 'xlsx' ;\nimport { API_URL } from '../config';\n\nexport const addSchool = async (data) => {\n    try {\n        var docRef = await app.firestore().collection(\"schools\").doc(data.id);\n        data.total_student=0;\n        data.total_teacher=0;\n        data.lms_url=data.id.trim()+\".dschool.vn\";\n        const doc = docRef.get()\n        if (doc.exists) {\n            console.log(\"doc exist\")\n            return \"existed\";\n        } else {\n            console.log(data);\n            let school  = await app.firestore().collection('schools').doc(data.id).set(data);\n            console.log(\"add school success\");\n        }\n        \n    } catch (err) {\n        console.log(err);\n    }\n};\n\nexport const getSchoolApi = async (id) => {\n    try {\n        let querySnapshot  = await app.firestore().collection('schools').doc(id).get();\n        const school = querySnapshot.data()\n        school.id=id\n          return school\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nexport const updateSchool = async (data) => {\n    try {\n        let id=data.id;\n        let result  = await app.firestore().collection('schools').doc(id).update(data);\n        return result\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nexport const listAllSchool = async (data) => {\n    try {\n        let querySnapshot  = await app.firestore().collection('schools').get();\n        const school = querySnapshot.docs.map((doc) => {\n            return { id: doc.id, ...doc.data() }\n          })\n          return school\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nexport const has_running_command = async (school_id) => {\n    try {\n       \n        let querySnapshot = await app.firestore().collection('commands').where(\"data.school_id\",\"==\",school_id).where(\"type\",\"==\",\"school\").where(\"action\",\"==\",\"upload\").where(\"status\",\"==\",1).get();\n        const commands = querySnapshot.docs.map((doc) => {\n            return {\n              id: doc.id,\n              ...doc.data()\n            };\n          });\n          console.log(commands);\n          return commands;\n        \n      } catch (err) {\n        console.log(err);\n      }\n}\n\nexport const deleteSchools = (ids) => {\n    try {\n      ids.map((id) => {\n        app.firestore().collection('schools').doc(id).delete();\n      })\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  export const uploadExcel = async (user,file,school_id) => {\n    try {\n        let data = {\"school_id\":school_id};\n        data.year=\"2021_2022\";\n        const reader = new FileReader() \n        const rABS = !!reader.readAsBinaryString;  // !! converts object to boolean \n        reader.onabort = () => console.log('file reading was aborted')\n        reader.onerror = () => console.log('file reading has failed')\n        reader.onload = async(e) => {\n            // Do what you want with the file contents \n            var bstr = e.target.result; \n            var workbook = XLSX.read(bstr, { type: rABS ? \"binary\" : \"array\" })\n            var command = {\n              type: \"school\",\n              action: \"upload\",\n              status: 0,\n              executer: user,\n            }\n            console.log(workbook.Sheets);\n            let length=Object.keys( workbook.Sheets).length;\n            console.log(\"length\",length)\n            if(length==2){\n              //issert mẫu mới \n              var sheet0_list = workbook.SheetNames[0];\n              var sheet0 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet0_list], {\n                  raw: false,\n                  dateNF: \"MM-DD-YYYY\",\n                  header:1,\n                  blankrows: false,\n                  defval: \"\"\n              })\n              data.hs = JSON.stringify(sheet0);\n              var sheet1_list = workbook.SheetNames[1];\n              var sheet1 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet1_list], {\n                  raw: false,\n                  dateNF: \"MM-DD-YYYY\",\n                  header:1,\n                  blankrows: false,\n                  defval: \"\"\n              })\n              // const checkhs = check_hs(data.hs)\n              // if(checkhs){\n              //   console.log(\"checkhs\",checkhs)\n              //   return checkhs;\n              // }\n              data.gv = JSON.stringify(sheet1);\n              data.template=2;\n              command.data=data;\n              // const checkgv = check_gv(data.gv);\n              // if(checkgv){\n              //   console.log(\"checkgv\",checkgv)\n              //   return checkgv;\n              // }\n            } else if(length==3){\n              console.log(\"not use 3 temp\")\n              return \"please review template\";\n              //insert mẫu cũ \n              // var sheet0_list = workbook.SheetNames[0];\n              // var sheet0 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet0_list], {\n              //     raw: false,\n              //     dateNF: \"MM-DD-YYYY\",\n              //     header:1,\n              //     blankrows: false,\n              //     defval: \"\"\n              // })\n              // data.hs = JSON.stringify(sheet0);\n              // var sheet1_list = workbook.SheetNames[1];\n              // var sheet1 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet1_list], {\n              //     raw: false,\n              //     dateNF: \"MM-DD-YYYY\",\n              //     header:1,\n              //     blankrows: false,\n              //     defval: \"\"\n              // })\n              // data.gv = JSON.stringify(sheet1);\n              // var sheet2_list = workbook.SheetNames[2];\n              // var sheet2 = XLSX.utils.sheet_to_json(workbook.Sheets[sheet2_list], {\n              //     raw: false,\n              //     dateNF: \"MM-DD-YYYY\",\n              //     header:1,\n              //     blankrows: false,\n              //     defval: \"\"                \n              // })\n              // data.assignment = JSON.stringify(sheet2);\n              // data.template=3;\n              // command.data=data;\n            }\n\n            \n\n            let schoolApi = await app.firestore().collection('commands').add(command);\n            let id = await (await schoolApi.get()).id;\n            console.log(id)\n            command.data.commandid=id;\n            const url = `${API_URL}/api/upload_school`;\n            axios.post(url,{id:id}).then(resp => {\n                console.log(resp.data);\n            });\n            // console.log(\"add command success\",id)\n            return \"success\";\n          }\n          if (rABS) {await reader.readAsBinaryString(file);}\n          else {await reader.readAsArrayBuffer(file);}\n    } catch (err) {\n      console.log(err);\n      return \"Lỗi rồi !!!\";\n    }\n  };\n\n  function check_hs(data){\n    console.log(\"hs:\",data);\n    for (let user_row of data) {\n      if (user_row[0] != \"STT\") {\n        let class_name = user_row[1];\n        let fullname = user_row[3];\n        let birthdate = user_row[4];\n        let password = user_row[8];\n        let username = user_row[7];\n        if(class_name==null||fullname==null||username==null||password==null||class_name==\"\"||fullname==\"\"||username==\"\"||password==\"\"){\n          return \"Xem lại lớp:\"+class_name+\" tên:\"+fullname+\" user:\"+username+\" pass:\"+password;\n        }\n      }\n    }\n    return false;\n  }\n  function check_gv(data){\n    console.log(\"gv:\",data);\n    for (let user_row of data) {\n      if (user_row[0] != \"STT\") {\n\n        let class_name = user_row[1];\n        let fullname = user_row[3];\n        let birthdate = user_row[4];\n        let password = user_row[8];\n        let username = user_row[7];\n        if(class_name==null||fullname==null||username==null||password==null||class_name==\"\"||fullname==\"\"||username==\"\"||password==\"\"){\n          return \"Xem lại lớp:\"+class_name+\" tên:\"+fullname+\" user:\"+username+\" pass:\"+password;\n        }\n      }\n    }\n    return false;\n  }","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Grid,\n  TextField,\n  makeStyles\n} from '@material-ui/core';\nimport wait from 'src/utils/wait';\nimport { useHistory } from 'react-router-dom';\nimport {updateSchool} from '../../../api/schools'\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst SchoolEditForm = ({\n  className,\n  school,\n  ...rest\n}) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  return (\n    <Formik\n      initialValues={{\n        id: school.id || '',\n        address: school.address || '',\n        email: school.email || '',\n        name: school.name || '',\n        phone: school.phone || '',\n        district: school.district || '',\n        province: school.province || '',\n        lms_url: school.lms_url || '',\n        submit: null\n      }}\n      validationSchema={Yup.object().shape({\n        address: Yup.string().max(255),\n        email: Yup.string().email('Must be a valid email').max(255).required('Email is required'),\n        name: Yup.string().max(255).required('Name is required'),\n        phone: Yup.string().max(15)\n      })}\n      onSubmit={async (values, {\n        \n        setErrors,\n        setStatus,\n        setSubmitting\n      }) => {\n        try {\n\n          console.log(values)\n          updateSchool(values);\n          // NOTE: Make API request\n          await wait(500);\n          history.push('/hbon/management/schools');\n        } catch (err) {\n          console.error(err);\n          setStatus({ success: false });\n          setErrors({ submit: err.message });\n          setSubmitting(false);\n        }\n      }}\n    >\n      {({\n        errors,\n        handleBlur,\n        handleChange,\n        handleSubmit,\n        isSubmitting,\n        touched,\n        values\n      }) => (\n        <form\n          className={clsx(classes.root, className)}\n          onSubmit={handleSubmit}\n          {...rest}\n        >\n          <Card>\n            <CardContent>\n              <input type=\"hidden\" name=\"id\" \n                    required\n                    value={values.id}/>\n              <Grid\n                container\n                spacing={3}\n              >\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.name && errors.name)}\n                    fullWidth\n                    helperText={touched.name && errors.name}\n                    label=\"Tên trường\"\n                    name=\"name\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.name}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.id && errors.id)}\n                    fullWidth\n                    helperText={touched.id && errors.id}\n                    label=\"domain\"\n                    name=\"id\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    disabled\n                    value={values.id}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.email && errors.email)}\n                    fullWidth\n                    helperText={touched.email && errors.email}\n                    label=\"Email\"\n                    name=\"email\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    required\n                    value={values.email}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.country && errors.country)}\n                    fullWidth\n                    helperText={touched.country && errors.country}\n                    label=\"Tỉnh/Thành phố\"\n                    name=\"province\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.province}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.state && errors.state)}\n                    fullWidth\n                    helperText={touched.state && errors.state}\n                    label=\"Quận/Huyện\"\n                    name=\"district\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.district}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.address && errors.address)}\n                    fullWidth\n                    helperText={touched.address && errors.address}\n                    label=\"Địa chỉ\"\n                    name=\"address\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.address}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.phone && errors.phone)}\n                    fullWidth\n                    helperText={touched.phone && errors.phone}\n                    label=\"Số điện thoại\"\n                    name=\"phone\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.phone}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid\n                  item\n                  md={6}\n                  xs={12}\n                >\n                  <TextField\n                    error={Boolean(touched.lms_url && errors.lms_url)}\n                    fullWidth\n                    helperText={touched.lms_url && errors.lms_url}\n                    label=\"LMS URL\"\n                    name=\"lms_url\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    value={values.lms_url}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n                <Grid item />\n                \n              </Grid>\n              <Box mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                >\n                  Lưu\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </form>\n      )}\n    </Formik>\n  );\n};\n\nSchoolEditForm.propTypes = {\n  className: PropTypes.string,\n  school: PropTypes.object.isRequired\n};\n\nexport default SchoolEditForm;\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport {\n  Breadcrumbs,\n  Link,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst Header = ({ className, ...rest }) => {\n  const classes = useStyles();\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n      >\n        <Link\n          variant=\"body1\"\n          color=\"inherit\"\n          to=\"/hbon/management/schools\"\n          component={RouterLink}\n        >\n          Trang chủ\n        </Link>\n        <Link\n          variant=\"body1\"\n          color=\"inherit\"\n          to=\"/hbon/management/schools\"\n          component={RouterLink}\n        >\n          Trường học\n        </Link>\n      </Breadcrumbs>\n      <Typography\n        variant=\"h3\"\n        color=\"textPrimary\"\n      >\n        Chỉnh sửa trường học\n      </Typography>\n    </div>\n  );\n};\n\nHeader.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Header;\n","import React, {\n  useState,\n  useCallback,\n  useEffect\n} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box,\n  Container,\n  makeStyles\n} from '@material-ui/core';\nimport axios from 'src/utils/axios';\nimport Page from 'src/components/Page';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\nimport SchoolEditForm from './SchoolEditForm';\nimport Header from './Header';\nimport {getSchoolApi}  from '../../../api/schools'\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3)\n  }\n}));\n\nconst  SchoolEditView  = (props) => {\n  const {schoolId } = props.match.params;\n  const classes = useStyles();\n  const isMountedRef = useIsMountedRef();\n  const [school, setSchool] = useState(null);\n\n  const getSchool = useCallback(async () => {\n    try {\n      let school = await getSchoolApi(schoolId);\n      if (isMountedRef.current) {\n        setSchool(school);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }, [isMountedRef]);\n\n  useEffect(() => {\n    getSchool();\n  }, [getSchool]);\n\n  if (!school) {\n    return null;\n  }\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"School Edit\"\n    >\n      <Container maxWidth={false}>\n        <Header />\n      </Container>\n      <Box mt={3}>\n        <Container maxWidth=\"lg\">\n          <SchoolEditForm school={school} />\n        </Container>\n      </Box>\n    </Page>\n  );\n};\nexport default SchoolEditView;\n"],"sourceRoot":""}